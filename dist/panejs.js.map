{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2b745e42b7c39fdab3bd","webpack:///./src/index.js","webpack:///./src/shapes/index.js","webpack:///./src/shapes/basic/Rect.js","webpack:///./src/cells/Node.js","webpack:///./src/geometry/Rect.js","webpack:///./src/common/utils.js","webpack:///./src/utils/lang.js","webpack:///./src/utils/array.js","webpack:///./src/utils/string.js","webpack:///./src/utils/object.js","webpack:///./src/utils/number.js","webpack:///./src/utils/function.js","webpack:///./src/utils/dom.js","webpack:///./src/utils/geom.js","webpack:///./src/utils/event.js","webpack:///./src/common/detector.js","webpack:///./src/utils/pathData.js","webpack:///./src/utils/transform.js","webpack:///./src/geometry/Point.js","webpack:///./src/geometry/Line.js","webpack:///./src/cells/Cell.js","webpack:///./src/cells/Terminal.js","webpack:///./src/shapes/basic/Path.js","webpack:///./src/shapes/basic/Text.js","webpack:///./src/shapes/basic/Ports.js","webpack:///./src/cells/Portal.js","webpack:///./src/views/PortalView.js","webpack:///./src/common/vector.js","webpack:///./src/geometry/Ellipse.js","webpack:///./src/views/NodeView.js","webpack:///./src/views/VectorView.js","webpack:///./src/common/filters.js","webpack:///./src/views/CellView.js","webpack:///./src/shapes/basic/Image.js","webpack:///./src/shapes/basic/Circle.js","webpack:///./src/shapes/basic/Rhombus.js","webpack:///./src/shapes/basic/Ellipse.js","webpack:///./src/shapes/basic/Polygon.js","webpack:///./src/shapes/basic/Polyline.js","webpack:///./src/shapes/basic/LabelLink.js","webpack:///./src/shapes/basic/ElementLink.js","webpack:///./src/changes/index.js","webpack:///./src/changes/Change.js","webpack:///./src/changes/RootChange.js","webpack:///./src/changes/ChildChange.js","webpack:///./src/changes/VisibleChange.js","webpack:///./src/changes/TerminalChange.js","webpack:///./src/changes/GeometryChange.js","webpack:///./src/changes/CollapseChange.js","webpack:///./src/changes/ChangeCollection.js","webpack:///./src/geometry/index.js","webpack:///./src/geometry/bezier.js","webpack:///./src/common/Events.js","webpack:///./src/core/Model.js","webpack:///./src/changes/SizeChange.js","webpack:///./src/changes/PositionChange.js","webpack:///./src/changes/RotationChange.js","webpack:///./src/changes/AttributeChange.js","webpack:///./src/core/Paper.js","webpack:///./src/views/LinkView.js","webpack:///./src/cells/Link.js","webpack:///./src/handlers/Handler.js","webpack:///./src/handlers/Selection.js","webpack:///./src/controllers/Vertex.js","webpack:///./src/controllers/Controller.js","webpack:///./src/handlers/Connection.js","webpack:///./src/shapes/connector/sharp.js","webpack:///./src/shapes/connector/smooth.js","webpack:///./src/shapes/connector/rounded.js","webpack:///./src/shapes/marker/classic.js","webpack:///./src/shapes/marker/diamond.js","webpack:///./src/shapes/marker/block.js","webpack:///./src/shapes/marker/cloven.js","webpack:///./src/shapes/marker/oval.js","webpack:///./src/style/index.less"],"names":[],"mappings":"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","file":"panejs.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"panejs\"] = factory();\n\telse\n\t\troot[\"panejs\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2b745e42b7c39fdab3bd\n **/","// styles\n// ------\n\nrequire('./style/index.less');\n\n\n// common\n// ------\nimport * as utils           from './common/utils';\nimport vector, { VElement } from './common/vector';\nimport detector             from './common/detector';\nimport Events               from './common/Events';\n\n\n// core\n// ----\nimport Model from './core/Model';\nimport Paper from './core/Paper';\n\n\n// models\n// ------\nimport Cell     from './cells/Cell';\nimport Link     from './cells/Link';\nimport Node     from './cells/Node';\nimport Portal   from './cells/Portal';\nimport Terminal from './cells/Terminal';\n\n\n// views\n// -----\nimport CellView   from './views/CellView';\nimport LinkView   from './views/LinkView';\nimport NodeView   from './views/NodeView';\nimport PortalView from './views/PortalView';\nimport VectorView from './views/VectorView';\n\n\nimport Handler           from './handlers/Handler';\nimport SelectionHandler  from './handlers/Selection';\nimport ConnectionHandler from './handlers/Connection';\n\n\n// connectors\n// ----------\nimport sharpConnector   from './shapes/connector/sharp';\nimport smoothConnector  from './shapes/connector/smooth';\nimport roundedConnector from './shapes/connector/rounded';\n\nPaper\n  .registConnector('sharp', sharpConnector)\n  .registConnector('smooth', smoothConnector)\n  .registConnector('rounded', roundedConnector);\n\n\n// markers\n// -------\nimport classicMarker from './shapes/marker/classic';\nimport diamondMarker from './shapes/marker/diamond';\nimport blockMarker   from './shapes/marker/block';\nimport clovenMarker  from './shapes/marker/cloven';\nimport ovalMarker    from './shapes/marker/oval';\n\nPaper\n  .registMarker('classic', classicMarker)\n  .registMarker('diamond', diamondMarker)\n  .registMarker('cloven', clovenMarker)\n  .registMarker('block', blockMarker)\n  .registMarker('oval', ovalMarker);\n\n\n// exports\n// -------\n\nexport {\n  utils,\n  detector,\n  vector,\n  VElement,\n  Events,\n\n  Model,\n  Paper,\n\n  Cell,\n  Link,\n  Node,\n  Portal,\n  Terminal,\n\n  CellView,\n  LinkView,\n  NodeView,\n  PortalView,\n  VectorView,\n\n  Handler,\n  SelectionHandler,\n  ConnectionHandler,\n};\n\nexport * from './shapes/index';\nexport * from './changes/index';\nexport * from './geometry/index';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import Rect        from './basic/Rect';\nimport Path        from './basic/Path';\nimport Text        from './basic/Text';\nimport Ports       from './basic/Ports';\nimport Image       from './basic/Image';\nimport Circle      from './basic/Circle';\nimport Rhombus     from './basic/Rhombus';\nimport Ellipse     from './basic/Ellipse';\nimport Polygon     from './basic/Polygon';\nimport Polyline    from './basic/Polyline';\nimport LabelLink   from './basic/LabelLink';\nimport ElementLink from './basic/ElementLink';\n\nconst shapes = {\n  basic: {\n    Text,\n    Rect,\n    Path,\n    Image,\n    Ports,\n    Circle,\n    Rhombus,\n    Ellipse,\n    Polygon,\n    Polyline,\n    LabelLink,\n    ElementLink\n  }\n};\n\n\nexport {\n  shapes\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/index.js\n **/","import Node from '../../cells/Node';\n\nclass Rect extends Node {}\n\nRect.setDefaults({\n  markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><rect/></g><text/></g>',\n\n  attrs: {\n    '.': {\n      fill: '#fff',\n      stroke: 'none'\n    },\n    'rect': {\n      'fill': '#fff',\n      'stroke': '#000',\n      'stroke-width': '1',\n      'width': 80,\n      'height': 30\n    },\n    'text': {\n      'fill': '#000',\n      'font-size': 12,\n      'ref-x': .5,\n      'ref-y': .5,\n      'text-anchor': 'middle',\n      'y-alignment': 'middle',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n});\n\nexport default Rect;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Rect.js\n **/","import Rect from '../geometry/Rect';\nimport Cell from '../cells/Cell';\n\n\nclass Node extends Cell {\n\n  // static\n  // ------\n\n  static isNode(node) {\n\n    return node && node instanceof Node;\n  }\n\n\n  // methods\n  // -------\n\n  isNode() {\n\n    return true;\n  }\n\n  getBBox() {\n\n    let pos  = this.getPosition();\n    let size = this.getSize();\n\n    return new Rect(pos.x, pos.y, size.width, size.height);\n  }\n}\n\n\nNode.setDefaults({\n  tagName: 'g',\n  markup: '',\n  classNames: 'pane-cell pane-node', // pane-cell for event handler\n  pane: null,   // specify the drawPane of the view\n  view: null,   // specify the constructor of the view\n  data: null,   // cached data(for business logic)\n  attrs: null,  // styles\n\n  size: {\n    width: 1,\n    height: 1,\n    relative: false\n  },\n  position: {\n    x: 0,\n    y: 0,\n    relative: false\n  },\n  rotation: {\n    angle: 0,\n    inherited: true // inherit the parent's rotation\n  }\n});\n\n\n// exports\n// -------\n\nexport default Node;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/cells/Node.js\n **/","import * as utils from '../common/utils';\nimport      Point from './Point';\nimport      Line  from './Line';\n\n\nclass Rect {\n\n  constructor(x = 0, y = 0, width = 0, height = 0) {\n\n    this.x      = x;\n    this.y      = y;\n    this.width  = width;\n    this.height = height;\n  }\n\n\n  // statics\n  // -------\n\n  static equals(rect1, rect2) {\n\n    let result = this.isRect(rect1) && this.isRect(rect2);\n    if (result) {\n\n      rect1.standardizePort();\n      rect2.standardizePort();\n\n      result = rect1.x === rect2.x\n        && rect1.y === rect2.y\n        && rect1.width === rect2.width\n        && rect1.height === rect2.height;\n    }\n\n    return result;\n  }\n\n  static fromRect(rect) {\n\n    return new Rect(rect.x, rect.y, rect.width, rect.height);\n  }\n\n  static fromVerticesAndRotation(v1, v2, rotation = 0) {\n\n    let cx = (v1.x + v2.x) / 2;\n    let cy = (v1.y + v2.y) / 2;\n\n    let distance      = new Point(v1.x, v1.y).distance(new Point(v2.x, v2.y));\n    let verticesAngle = Math.atan(Math.abs((v2.y - v1.y) / (v1.x - v2.x))) * 180 / Math.PI;\n\n    let width  = Math.abs(distance * Math.sin((90 - rotation + verticesAngle) / 180 * Math.PI));\n    let height = Math.abs(distance * Math.cos((90 - rotation + verticesAngle) / 180 * Math.PI));\n\n    let x = cx - width / 2;\n    let y = cy - height / 2;\n\n    let rect = new Rect(x, y, width, height);\n\n    rect.cx       = cx;\n    rect.cy       = cy;\n    rect.rotation = rotation;\n\n    return rect;\n  }\n\n  static isRect(rect) {\n\n    return rect && rect instanceof Rect;\n  }\n\n  // methods\n  // -------\n\n  getOrigin() {\n\n    return new Point(this.x, this.y);\n  }\n\n  getCenter() {\n\n    return new Point(this.x + this.width / 2, this.y + this.height / 2);\n  }\n\n  getCorner() {\n\n    return new Point(this.x + this.width, this.y + this.height);\n  }\n\n  getTopRight() {\n\n    return new Point(this.x + this.width, this.y);\n  }\n\n  getBottomLeft() {\n\n    return new Point(this.x, this.y + this.height);\n  }\n\n  getNearestSideToPoint(point) {\n\n    // get (left|right|top|bottom) side which is nearest to point\n\n    let distToLeft   = point.x - this.x;\n    let distToTop    = point.y - this.y;\n    let distToRight  = (this.x + this.width) - point.x;\n    let distToBottom = (this.y + this.height) - point.y;\n\n    let closest = distToLeft;\n    let side    = 'left';\n\n    if (distToRight < closest) {\n\n      closest = distToRight;\n      side    = 'right';\n    }\n\n    if (distToTop < closest) {\n\n      closest = distToTop;\n      side    = 'top';\n    }\n\n    if (distToBottom < closest) {\n\n      // closest = distToBottom;\n      side = 'bottom';\n    }\n\n    return side;\n  }\n\n  getNearestPointToPoint(point) {\n\n    // get a point on my boundary nearest to `point`\n\n    if (this.containsPoint(point)) {\n\n      let side = this.getNearestSideToPoint(point);\n\n      if (side === 'right') {\n\n        return new Point(this.x + this.width, point.y);\n\n      } else if (side === 'left') {\n\n        return new Point(this.x, point.y);\n\n      } else if (side === 'bottom') {\n\n        return new Point(point.x, this.y + this.height);\n\n      } else if (side === 'top') {\n\n        return new Point(point.x, this.y);\n      }\n    }\n\n    return point.adhereToRect(this);\n  }\n\n  containsPoint(point) {\n    return point\n      && point.x >= this.x\n      && point.x <= this.x + this.width\n      && point.y >= this.y\n      && point.y <= this.y + this.height;\n  }\n\n  containsRect(rect) {\n\n    this.normalize();\n    rect.normalize();\n\n    let x2 = rect.x;\n    let y2 = rect.y;\n    let w2 = rect.width;\n    let h2 = rect.height;\n\n    let x1 = this.x;\n    let y1 = this.y;\n    let w1 = this.width;\n    let h1 = this.height;\n\n    return x2 >= x1\n      && y2 >= y1\n      && (x2 + w2) <= (x1 + w1)\n      && (y2 + h2) <= (y1 + h1);\n  }\n\n  unContainsRect(rect) {\n\n    this.normalize();\n    rect.normalize();\n\n    return !(this.containPoint(rect.getOrigin())\n    || this.containPoint(rect.getCorner())\n    || this.containPoint(rect.getTopRight())\n    || this.containPoint(rect.getBottomLeft()));\n  }\n\n  intersect(rect) {\n\n    let origin1 = this.getOrigin();\n    let corner1 = this.getCorner();\n    let origin2 = rect.getOrigin();\n    let corner2 = rect.getCorner();\n\n    // no intersection found\n    if (origin1.x >= corner2.x ||\n      origin1.y >= corner2.y ||\n      origin2.x >= corner1.x ||\n      origin2.y >= corner1.y) {\n      return null;\n    }\n\n    let x = Math.max(origin1.x, origin2.x);\n    let y = Math.max(origin1.y, origin2.y);\n    let w = Math.min(corner1.x, corner2.x) - x;\n    let h = Math.min(corner1.y, corner2.y) - y;\n\n    return new Rect(x, y, w, h);\n  }\n\n  union(rect) {\n\n    let origin1 = this.getOrigin();\n    let corner1 = this.getCorner();\n    let origin2 = rect.getOrigin();\n    let corner2 = rect.getCorner();\n\n    let originX = Math.min(origin1.x, origin2.x);\n    let originY = Math.min(origin1.y, origin2.y);\n    let cornerX = Math.max(corner1.x, corner2.x);\n    let cornerY = Math.max(corner1.y, corner2.y);\n\n    return new Rect(originX, originY, cornerX - originX, cornerY - originY);\n  }\n\n  intersectionWithLineFromCenterToPoint(point, angle) {\n\n    // Find point on my boundary where line starting from my center ending\n    // in point p intersects me. If angle is specified, intersection with\n    // rotated rectangle is computed.\n\n    let result;\n    let center = this.getCenter();\n\n    if (angle) {\n      point.rotate(center, angle);\n    }\n\n    // clockwise, starting from the top side\n    let sides = [\n      new Line(this.getOrigin(), this.getTopRight()),\n      new Line(this.getTopRight(), this.getCorner()),\n      new Line(this.getCorner(), this.getBottomLeft()),\n      new Line(this.getBottomLeft(), this.getOrigin())\n    ];\n\n    let connector = new Line(center, point);\n\n    for (let i = sides.length - 1; i >= 0; i -= 1) {\n      let intersection = sides[i].intersection(connector);\n      if (intersection) {\n        result = intersection;\n        break;\n      }\n    }\n\n    if (result && angle) {\n      result.rotate(center, -angle);\n    }\n\n    return result;\n  }\n\n  moveAndExpand(rect) {\n\n    this.x += rect.x || 0;\n    this.y += rect.y || 0;\n    this.width += rect.width || 0;\n    this.height += rect.height || 0;\n\n    return this;\n  }\n\n  grow(amount) {\n\n    this.x -= amount;\n    this.y -= amount;\n    this.width += 2 * amount;\n    this.height += 2 * amount;\n\n    return this;\n  }\n\n  round(precision) {\n\n    this.x      = precision ? utils.toFixed(this.x, precision) : Math.round(this.x);\n    this.y      = precision ? utils.toFixed(this.y, precision) : Math.round(this.y);\n    this.width  = precision ? utils.toFixed(this.width, precision) : Math.round(this.width);\n    this.height = precision ? utils.toFixed(this.height, precision) : Math.round(this.height);\n\n    return this;\n  }\n\n  normalize() {\n\n    // Normalize the rectangle.\n    // i.e., make it so that it has a non-negative width and height.\n    // If width < 0 the function swaps the left and right corners,\n    // and it swaps the top and bottom corners if height < 0\n\n    let x = this.x;\n    let y = this.y;\n    let w = this.width;\n    let h = this.height;\n\n    if (w < 0) {\n      x = x + w;\n      w = -w;\n    }\n\n    if (h < 0) {\n      y = y + h;\n      h = -h;\n    }\n\n    this.x      = x;\n    this.y      = y;\n    this.width  = w;\n    this.height = h;\n\n    return this;\n  }\n\n  getBBox(angle) {\n\n    let rad = utils.toRad(angle || 0);\n    let sin = Math.abs(Math.sin(rad));\n    let cos = Math.abs(Math.cos(rad));\n    let w   = this.width * cos + this.height * sin;\n    let h   = this.width * sin + this.height * cos;\n\n    return new Rect(this.x + (this.width - w) / 2, this.y + (this.height - h) / 2, w, h);\n  }\n\n  snapToGrid(gx, gy) {\n\n    let that   = this;\n    let origin = that.getOrigin();\n    let corner = that.getCorner();\n\n    origin = origin.snapToGrid(gx, gy);\n    corner = corner.snapToGrid(gx, gy);\n\n    that.x      = origin.x;\n    that.y      = origin.y;\n    that.width  = corner.x - origin.x;\n    that.height = corner.y - origin.y;\n\n    return that;\n  }\n\n\n  // common\n  // ------\n\n  equals(rect) {\n\n    return Rect.equals(this, rect);\n  }\n\n  valueOf() {\n\n    return [this.x, this.y, this.width, this.height];\n  }\n\n  toString() {\n\n    return this.valueOf().join(', ');\n  }\n\n  clone() {\n\n    return Rect.fromRect(this);\n  }\n}\n\n\n// exports\n// -------\n\nexport default Rect;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Rect.js\n **/","export * from '../utils/lang';\nexport * from '../utils/array';\nexport * from '../utils/string';\nexport * from '../utils/number';\nexport * from '../utils/object';\nexport * from '../utils/function';\nexport * from '../utils/dom';\nexport * from '../utils/geom';\nexport * from '../utils/event';\nexport * from '../utils/pathData';\nexport * from '../utils/transform';\n\nexport default {};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/common/utils.js\n **/","const toString = Object.prototype.toString;\n\n\nexport const isNull      = val => val === null;\nexport const isString    = val => typeof val === 'string';\nexport const isBoolean   = val => typeof val === 'boolean';\nexport const isUndefined = val => typeof val === 'undefined';\n\n// is null or undefined\nexport const isNil = val => isUndefined(val) || isNull(val);\n\n// function and object are truly\nexport const isObject = (val) => {\n\n  if (!val) {\n    return false;\n  }\n\n  return typeof val === 'function' || typeof val === 'object';\n};\n\nexport const isType     = (val, type) => toString.call(val) === `[object ${type}]`;\nexport const isArray    = val => Array.isArray(val);\nexport const isWindow   = val => val && val === val.window;\nexport const isNumeric  = val => !isArray(val) && (val - parseFloat(val) + 1) >= 0;\nexport const isFunction = val => isType(val, 'Function');\n\nexport const isArrayLike = (val) => {\n\n  if (isArray(val)) {\n    return true;\n  }\n\n  if (isFunction(val) || isWindow(val)) {\n    return false;\n  }\n\n  let len = !!val && 'length' in val && val.length;\n\n  return len === 0 || typeof len === 'number' && len > 0 && (len - 1) in val;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/lang.js\n **/","import { isArrayLike } from './lang';\n\nconst proto = Array.prototype;\n\nexport function toArray(arr) {\n  return isArrayLike(arr) ? proto.slice.call(arr) : [arr];\n}\n\nexport function slice(arr, start, end) {\n  return arr ? proto.slice.call(arr, start, end) : [];\n}\n\nexport function indexOf(arr, item) {\n  return arr ? proto.indexOf.call(arr, item) : -1;\n}\n\nexport function contains(arr, item) {\n  return arr ? indexOf(arr, item) >= 0 : false;\n}\n\nexport function lastIndexOf(arr, item) {\n  return arr ? proto.lastIndexOf.call(arr, item) : -1;\n}\n\nexport function map(arr, iterator, context) {\n  return arr ? proto.map.call(arr, iterator, context) : [];\n}\n\nexport function some(arr, iterator, context) {\n  return arr ? proto.some.call(arr, iterator, context) : false;\n}\n\nexport function every(arr, iterator, context) {\n  return arr ? proto.every.call(arr, iterator, context) : false;\n}\n\nexport function filter(arr, iterator, context) {\n  return arr ? proto.filter.call(arr, iterator, context) : [];\n}\n\nexport function forEach(arr, iterator, context) {\n  arr && proto.forEach.call(arr, iterator, context);\n}\n\nexport function reduce(arr, iterator, initialValue) {\n  return arr ? proto.reduce.call(arr, iterator, initialValue) : initialValue;\n}\n\nexport function reduceRight(arr, iterator, initialValue) {\n  return arr ? proto.reduceRight.call(arr, iterator, initialValue) : initialValue;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/array.js\n **/","import { isNil } from './lang';\nimport { getByPath } from './object';\n\nconst proto = String.prototype;\n\nexport const toString = str => String(str);\nexport const toUpper  = str => toString(str).toUpperCase();\nexport const toLower  = str => toString(str).toLowerCase();\n\nexport const ucFirst = str => str.charAt(0).toUpperCase() + str.substring(1);\nexport const lcFirst = str => str.charAt(0).toLowerCase() + str.substring(1);\n\nexport function trim(str) {\n  return str ? proto.trim.call(toString(str)) : '';\n}\n\nexport function split(str, divider = /\\s+/) {\n  return toString(str).split(divider);\n}\n\nexport function startWith(str, prefix) {\n  return toString(str).indexOf(prefix) === 0;\n}\n\nexport function endWith(str, suffix) {\n  return toString(str).indexOf(suffix, toString(str).length - suffix.length) !== -1;\n}\n\nfunction padStr(str, max, pad, isStart) {\n\n  if (isNil(str) || isNil(max)) {\n    return str;\n  }\n\n  let result    = String(str);\n  let targetLen = typeof max === 'number'\n    ? max\n    : parseInt(max, 10);\n\n  if (isNaN(targetLen) || !isFinite(targetLen)) {\n    return result;\n  }\n\n\n  let length = result.length;\n  if (length >= targetLen) {\n    return result;\n  }\n\n\n  let fill = isNil(pad) ? '' : String(pad);\n  if (fill === '') {\n    fill = ' ';\n  }\n\n  let fillLen = targetLen - length;\n\n  while (fill.length < fillLen) {\n    fill += fill;\n  }\n\n  let truncated = fill.length > fillLen ? fill.substr(0, fillLen) : fill;\n\n  return isStart\n    ? truncated + result\n    : result + truncated;\n}\n\nexport const padStart = (str, max, pad) => padStr(str, max, pad, true);\nexport const padEnd   = (str, max, pad) => padStr(str, max, pad, false);\n\n\nexport function uuid() {\n\n  // credit: http://stackoverflow.com/posts/2117523/revisions\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n\n    let r = Math.random() * 16 | 0;\n    let v = c === 'x' ? r : (r & 0x3 | 0x8);\n\n    return v.toString(16);\n  });\n}\n\nexport function hashCode(str) {\n\n  // Return a simple hash code from a string.\n  // See http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/.\n\n  let hash   = 0;\n  let length = str.length;\n\n  if (length === 0) {\n    return hash;\n  }\n\n  for (let i = 0; i < length; i += 1) {\n\n    let c = str.charCodeAt(i);\n\n    hash = ((hash << 5) - hash) + c;\n    hash &= hash; // Convert to 32bit integer\n  }\n\n  return hash;\n}\n\nexport function format(tpl, data) {\n\n  if (tpl && data) {\n    return toString(tpl).replace(/\\$\\{(.*?)\\}/g, (input, key) => {\n      let val = getByPath(data, key);\n      return !isNil(val) ? val : input;\n    });\n  }\n\n  return tpl;\n}\n\nexport function escape(str) {\n\n  let mapping = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n\n  let badChars     = /[&<>\"'`]/g;\n  let shouldEscape = /[&<>\"'`]/;\n\n  if (shouldEscape.test(str)) {\n    return str.replace(badChars, chr => mapping[chr]);\n  }\n\n  return str;\n}\n\nexport function sanitizeText(text) {\n\n  // Replace all spaces with the Unicode No-break space.\n  // ref: http://www.fileformat.info/info/unicode/char/a0/index.htm\n  // IE would otherwise collapse all spaces into one. This is useful\n  // e.g. in tests when you want to compare the actual DOM text content\n  // without having to add the unicode character in the place of all spaces.\n\n  return toString(text).replace(/ /g, '\\u00A0');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/string.js\n **/","import { split } from './string';\nimport { forEach } from './array';\nimport { isArray, isObject, isWindow } from './lang';\n\n\nexport function hasOwn(obj, key) {\n\n  return obj && Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexport function keys(obj) {\n\n  return obj ? Object.keys(obj) : [];\n}\n\nexport function forIn(obj, iterator, context) {\n\n  forEach(keys(obj), (key) => {\n    iterator.call(context, obj[key], key);\n  });\n}\n\nexport function extend(target = {}, ...sources) {\n\n  forEach(sources, (source) => {\n    if (source) {\n      /* eslint guard-for-in: 0 */\n      for (let key in source) {\n        target[key] = source[key];\n      }\n    }\n  });\n\n  return target;\n}\n\nexport function merge(target = {}, ...sources) {\n\n  forEach(sources, (source) => {\n    if (source) {\n      /* eslint guard-for-in: 0 */\n      for (let name in source) {\n\n        let src         = target[name];\n        let copy        = source[name];\n        let copyIsArray = isArray(copy);\n\n        if (copyIsArray || isPlainObject(copy)) {\n\n          let clone;\n          if (copyIsArray) {\n            clone = src && isArray(src) ? src : [];\n          } else {\n            clone = src && isPlainObject(src) ? src : {};\n          }\n\n          target[name] = merge(clone, copy);\n\n        } else {\n          target[name] = copy;\n        }\n      }\n    }\n  });\n\n  return target;\n}\n\nexport function getByPath(obj, path, delimiter = '.') {\n\n  const paths = split(path, delimiter);\n  while (paths.length) {\n\n    let key = paths.shift();\n\n    if (Object(obj) === obj && key in obj) {\n      obj = obj[key];\n    } else {\n      return undefined;\n    }\n  }\n\n  return obj;\n}\n\nexport function destroy(obj) {\n\n  if (obj) {\n    for (let prop in obj) {\n      if (hasOwn(obj, prop)) {\n        delete obj[prop];\n      }\n    }\n    if (obj) {\n\n      /* eslint no-proto: 0 */\n      obj.prototype = obj.__proto__ = null;\n    }\n    obj.destroyed = true;\n  }\n}\n\nexport function isEmptyObject(obj) {\n\n  /* eslint guard-for-in: 0 */\n  /* eslint no-unused-vars: 0 */\n  for (let key in obj) {\n    return false;\n  }\n\n  return true;\n}\n\nexport function isPlainObject(obj) {\n\n  // Not plain objects:\n  //  - Any object or value whose internal [[Class]] property is not \"[object Object]\"\n  //  - DOM nodes\n  //  - window\n  if (!isObject(obj) || obj.nodeType || isWindow(obj)) {\n    return false;\n  }\n\n  if (obj.constructor && !hasOwn(obj.constructor.prototype, 'isPrototypeOf')) {\n    return false;\n  }\n\n  // If the function hasn't returned already, we're confident that\n  // |obj| is a plain object, created by {} or constructed with new Object\n  return true;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/object.js\n **/","import { isString, isNil } from './lang';\n\nexport function isFinite(value) {\n\n  return window.isFinite(value) && !window.isNaN(parseFloat(value));\n}\n\nexport function isPercentage(str) {\n\n  return isString(str) && str.slice(-1) === '%';\n}\n\nexport function toInt(value) {\n\n  return parseInt(value, 10);\n}\n\nexport function toFloat(value, percentage) {\n\n  let v = parseFloat(value);\n  return percentage ? v / 100 : v;\n}\n\nexport function toPercentage(value, precision = 2) {\n\n  return `${toFixed(value * 100, precision)}%`;\n}\n\nexport function toFixed(value, precision = 2) {\n\n  let power = Math.pow(10, precision);\n\n  return toFloat((Math.round(value * power) / power).toFixed(precision));\n}\n\nexport function fixNumber(num, percentage, defaultValue) {\n\n  let ret = toFloat(num, percentage);\n\n  return isNaN(ret) ? defaultValue : ret;\n}\n\nexport function fixIndex(index, max) {\n\n  if (isNil(index)) {\n    return max;\n  }\n\n  while (index < 0) {\n    index += max;\n  }\n\n  return Math.min(index, max);\n}\n\nexport function clamp(value, min, max) {\n\n  return min < max\n    ? (value < min ? min : value > max ? max : value)\n    : (value < max ? max : value > min ? min : value);\n}\n\nexport function isWithin(value, min, max) {\n\n  return min < max\n    ? (value >= min && value <= max)\n    : (value >= max && value <= min);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/number.js\n **/","import { isFunction } from './lang';\n\nexport function invoke(fn, args, context) {\n\n  let ret;\n\n  if (isFunction(fn)) {\n\n    let len = args.length;\n    let [a1, a2, a3] = args;\n\n    if (len === 0) {\n      ret = fn.call(context);\n    } else if (len === 1) {\n      ret = fn.call(context, a1);\n    } else if (len === 2) {\n      ret = fn.call(context, a1, a2);\n    } else if (len === 3) {\n      ret = fn.call(context, a1, a2, a3);\n    } else {\n      ret = fn.apply(context, args);\n    }\n  }\n\n  return ret;\n}\n\nexport function bind(fn, ...args) {\n\n  return isFunction(fn)\n    ? invoke(Function.prototype.bind, args, fn)\n    : fn;\n}\n\n\nconst deferred = [];\n\nexport function defer(fn) {\n\n  deferred.push(fn);\n}\n\nexport function flush() {\n\n  let fn = deferred.pop();\n  while (fn) {\n    fn();\n    fn = deferred.pop();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/function.js\n **/","import {\n  isNil,\n  isObject,\n  isString,\n  isWindow,\n  isBoolean,\n  isFunction,\n  isUndefined,\n} from './lang';\nimport { forEach, reduce } from './array';\nimport { trim, split } from './string';\nimport { forIn } from './object';\n\n\n// classNames\n// ----------\n\nconst rclass       = /[\\t\\r\\n\\f]/g;\nconst rnotwhite    = (/\\S+/g);\nconst transformKey = (() => {\n\n  if (isUndefined(document)) {\n    return '';\n  }\n\n  const element    = createElement('div');\n  const transforms = [\n    'transform',\n    'webkitTransform',\n    'OTransform',\n    'MozTransform',\n    'msTransform'\n  ];\n\n  for (let i = 0, l = transforms.length; i < l; i += 1) {\n\n    const key = transforms[i];\n\n    if (element.style[key] !== undefined) {\n      return key;\n    }\n  }\n\n  return transforms[0];\n})();\n\nconst fillSpaces = str => ` ${str} `;\n\nexport function getClassName(elem) {\n\n  return elem.getAttribute ? elem.getAttribute('class') : '';\n}\n\nexport function hasClass(node, selector) {\n\n  if (isNil(node) || isNil(selector)) {\n    return false;\n  }\n\n  let classNames = fillSpaces(getClassName(node));\n  let className  = fillSpaces(selector);\n\n  return node.nodeType === 1\n    ? classNames.replace(rclass, ' ').indexOf(className) > -1\n    : false;\n}\n\nexport function addClass(node, selector) {\n\n  if (isNil(node) || isNil(selector)) {\n    return;\n  }\n\n  if (isFunction(selector)) {\n    addClass(node, selector.call(node, getClassName(node)));\n    return;\n  }\n\n  if (isString(selector) && node.nodeType === 1) {\n\n    let classes  = selector.match(rnotwhite) || [];\n    let oldValue = fillSpaces(getClassName(node)).replace(rclass, ' ');\n    let newValue = reduce(classes, (ret, cls) => {\n\n      if (ret.indexOf(fillSpaces(cls)) < 0) {\n        ret += `${cls} `;\n      }\n\n      return ret;\n\n    }, oldValue);\n\n    newValue = trim(newValue);\n\n    if (oldValue !== newValue) {\n      node.setAttribute('class', newValue);\n    }\n  }\n}\n\nexport function removeClass(node, selector) {\n\n  if (isNil(node)) {\n    return;\n  }\n\n  if (isFunction(selector)) {\n    removeClass(node, selector.call(node, getClassName(node)));\n    return;\n  }\n\n  if ((!selector || isString(selector)) && node.nodeType === 1) {\n\n    let classes  = (selector || '').match(rnotwhite) || [];\n    let oldValue = fillSpaces(getClassName(node)).replace(rclass, ' ');\n    let newValue = reduce(classes, (ret, cls) => {\n\n      let className = fillSpaces(cls);\n\n      if (ret.indexOf(className) > -1) {\n        ret = ret.replace(className, ' ');\n      }\n\n      return ret;\n\n    }, oldValue);\n\n    newValue = selector ? trim(newValue) : '';\n\n    if (oldValue !== newValue) {\n      node.setAttribute('class', newValue);\n    }\n  }\n}\n\nexport function toggleClass(node, selector, stateVal) {\n\n  if (isNil(node) || isNil(selector)) {\n    return;\n  }\n\n  if (isBoolean(stateVal) && isString(selector)) {\n    stateVal\n      ? addClass(node, selector)\n      : removeClass(node, selector);\n\n    return;\n  }\n\n  if (isFunction(selector)) {\n    toggleClass(node, selector.call(node, getClassName(node), stateVal), stateVal);\n\n    return;\n  }\n\n  if (isString(selector)) {\n    forEach(selector.match(rnotwhite) || [], (cls) => {\n      hasClass(node, cls)\n        ? removeClass(node, cls)\n        : addClass(node, cls);\n    });\n  }\n}\n\n\n// style\n// -----\n\nexport function styleStrToObject(styleStr) {\n\n  return reduce(split(styleStr, ';'), (result, style) => {\n\n    if (style) {\n      let [key, value] = split(style, '=');\n\n      result[key] = trim(value);\n    }\n\n    return result;\n\n  }, {});\n}\n\nexport function setStyle(elem, name, value) {\n\n  if (elem) {\n\n    let pairs = {};\n\n    if (isObject(name)) {\n\n      pairs = name;\n\n    } else if (isString(name) && isUndefined(value)) {\n\n      pairs = styleStrToObject(name);\n\n    } else {\n\n      pairs[name] = value;\n    }\n\n    forIn(pairs, (v, k) => {\n      elem.style[k === 'transform' ? transformKey : k] = v;\n    });\n  }\n}\n\nexport function getComputedStyle(elem, name) {\n\n  // IE9+\n\n  let computed = elem.ownerDocument.defaultView.opener\n    ? elem.ownerDocument.defaultView.getComputedStyle(elem, null)\n    : window.getComputedStyle(elem, null);\n\n  if (computed && name) {\n    return computed.getPropertyValue(name) || computed[name];\n  }\n\n  return computed;\n}\n\nexport function normalizeSides(box) {\n\n  if (Object(box) !== box) {\n\n    box = isNil(box) ? 0 : box;\n\n    return {\n      top: box,\n      right: box,\n      bottom: box,\n      left: box\n    };\n  }\n\n  return {\n    top: isNil(box.top) ? 0 : box.top,\n    right: isNil(box.right) ? 0 : box.right,\n    bottom: isNil(box.bottom) ? 0 : box.bottom,\n    left: isNil(box.left) ? 0 : box.left,\n  };\n}\n\n\n// elem\n// ----\n\nconst docElem = document.documentElement;\n\nexport const containsElement = docElem.compareDocumentPosition || docElem.contains ?\n  (context, elem) => {\n\n    let aDown = context.nodeType === 9 ? context.documentElement : context;\n    let bUp   = elem && elem.parentNode;\n\n    return context === bUp || !!(bUp && bUp.nodeType === 1 && (\n        aDown.contains\n          ? aDown.contains(bUp)\n          : context.compareDocumentPosition && context.compareDocumentPosition(bUp) & 16\n      ));\n  } :\n  (context, elem) => {\n\n    if (elem) {\n\n      /* eslint no-cond-assign: 0 */\n      while ((elem = elem.parentNode)) {\n        if (elem === context) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\nexport function createElement(tagName, doc) {\n\n  return (doc || document).createElement(tagName);\n}\n\nexport function removeElement(elem) {\n\n  if (elem && elem.parentNode) {\n    elem.parentNode.removeChild(elem);\n  }\n}\n\nexport function emptyElement(elem) {\n\n  if (elem) {\n    while (elem.firstChild) {\n      elem.removeChild(elem.firstChild);\n    }\n  }\n}\n\nexport function getNodeName(elem) {\n\n  return elem.nodeName ? elem.nodeName.toLowerCase() : '';\n}\n\nexport function isNode(elem, nodeName, attrName, attrValue) {\n\n  let ret = elem && !isNaN(elem.nodeType);\n\n  if (ret) {\n    ret = isNil(nodeName) || getNodeName(elem) === nodeName.toLowerCase();\n  }\n\n  if (ret) {\n    ret = isNil(attrName) || elem.getAttribute(attrName) === attrValue;\n  }\n\n  return ret;\n}\n\nexport function getWindow(elem) {\n\n  return isWindow(elem)\n    ? elem : elem.nodeType === 9\n    ? elem.defaultView || elem.parentWindow\n    : false;\n}\n\nexport function showHide(elem, show) {\n\n  /* eslint no-underscore-dangle: \"off\" */\n\n  if (elem && elem.style) {\n\n    let display = elem.style.display;\n\n    if (show && display === 'none') {\n\n      if (!isUndefined(elem.__display)) {\n        display = elem.__display;\n        delete elem.__display;\n      } else {\n        display = '';\n      }\n\n      elem.style.display = display || '';\n\n    } else if (!show && display !== 'none') {\n\n      if (display) {\n        elem.__display = display;\n      }\n\n      elem.style.display = 'none';\n    }\n  }\n}\n\nexport function isHidden(elem) {\n\n  return elem && (elem.style.display === 'none' || !containsElement(elem.ownerDocument, elem));\n}\n\nexport function getOffset(elem) {\n\n  let box = {\n    top: 0,\n    left: 0\n  };\n\n  let doc = elem && elem.ownerDocument;\n\n  if (!doc) {\n    return box;\n  }\n\n  let docElement = doc.documentElement;\n\n  // Make sure it's not a disconnected DOM node\n  if (!containsElement(docElement, elem)) {\n    return box;\n  }\n\n  // If we don't have gBCR, just use 0,0 rather than error\n  // BlackBerry 5, iOS 3 (original iPhone)\n  if (elem.getBoundingClientRect) {\n    box = elem.getBoundingClientRect();\n  }\n\n  let win = getWindow(doc);\n  let { top, left } = box;\n\n  top += (win.pageYOffset || docElement.scrollTop) - (docElement.clientTop || 0);\n  left += (win.pageXOffset || docElement.scrollLeft) - (docElement.clientLeft || 0);\n\n  return { top, left };\n}\n\nexport function getOffsetUntil(elem, stop) {\n\n  let node = elem;\n  let left = 0;\n  let top  = 0;\n\n  while (node && node !== stop && node !== document.documentElement) {\n    left += node.offsetLeft;\n    top += node.offsetTop;\n    node = node.offsetParent;\n  }\n\n  return { left, top };\n}\n\n\n// xml namespaces.\nconst ns = {\n  xml: 'http://www.w3.org/XML/1998/namespace',\n  xmlns: 'http://www.w3.org/2000/svg',\n  xlink: 'http://www.w3.org/1999/xlink'\n};\n\n// svg version.\nconst svgVersion = '1.1';\n\nfunction parseXML(str, async) {\n\n  let xml;\n\n  try {\n\n    let parser = new DOMParser();\n\n    if (!isUndefined(async)) {\n      parser.async = async;\n    }\n\n    xml = parser.parseFromString(str, 'text/xml');\n\n  } catch (error) {\n    xml = null;\n  }\n\n  if (!xml || xml.getElementsByTagName('parsererror').length) {\n    throw new Error(`Invalid XML: ${str}`);\n  }\n\n  return xml;\n}\n\nexport function createSvgDocument(content) {\n\n  // Create an SVG document element.\n  // If `content` is passed, it will be used as the SVG content of\n  // the `<svg>` root element.\n\n  let svg = `<svg xmlns=\"${ns.xmlns}\" xmlns:xlink=\"${ns.xlink}\" version=\"${svgVersion}\">${content || ''}</svg>`;\n  let xml = parseXML(svg, false);\n  return xml.documentElement;\n}\n\nexport function createSvgElement(tagName, doc) {\n\n  return (doc || document).createElementNS(ns.xmlns, tagName);\n}\n\n\n// attribute\n// ---------\n\nfunction qualifyAttributeName(name) {\n\n  if (name.indexOf(':') !== -1) {\n\n    let combined = name.split(':');\n\n    return {\n      ns: ns[combined[0]],\n      local: combined[1]\n    };\n  }\n\n  return {\n    ns: null,\n    local: name\n  };\n}\n\nexport function setAttribute(elem, name, value) {\n\n  if (isNil(value)) {\n\n    removeAttribute(elem, name);\n\n  } else if (name === 'id') {\n\n    elem.id = value;\n\n  } else {\n\n    let qualified = qualifyAttributeName(name);\n\n    qualified.ns\n      // attribute names can be namespaced. E.g. `image` elements\n      // have a `xlink:href` attribute to set the source of the image.\n      ? elem.setAttributeNS(qualified.ns, name, value)\n      : elem.setAttribute(name, value);\n  }\n}\n\nexport function removeAttribute(elem, name) {\n\n  let qualified = qualifyAttributeName(name);\n  if (qualified.ns) {\n    if (elem.hasAttributeNS(qualified.ns, qualified.local)) {\n      elem.removeAttributeNS(qualified.ns, qualified.local);\n    }\n  } else if (elem.hasAttribute(name)) {\n    elem.removeAttribute(name);\n  }\n}\n\n\n// transform\n// ---------\n\nexport function setScale(elem, sx, sy) {\n\n  if (elem) {\n    elem.style[transformKey] = `scale(${sx}, ${sy})`;\n  }\n}\n\nexport function setRotation(elem, angle, ox, oy) {\n\n  if (elem) {\n    elem.style[transformKey] = `rotate(${angle}, ${ox}, ${oy})`;\n  }\n}\n\nexport function setTranslate(elem, tx, ty) {\n\n  if (elem) {\n\n    let translate = `translateX(${tx}px) translateY(${ty}px)`;\n\n    // if (transformKey !== 'msTransform') {\n    //     // The Z transform will keep this in the GPU (faster, and prevents artifacts),\n    //     // but IE9 doesn't support 3d transforms and will choke.\n    //     translate += ' translateZ(0)';\n    // }\n\n    elem.style[transformKey] = translate;\n  }\n}\n\nexport function getTransformToElement(source, target) {\n\n  if (source.getTransformToElement) {\n    return source.getTransformToElement(target);\n  }\n\n  // chrome 48 removed svg getTransformToElement api\n\n  let matrix;\n  try {\n    matrix = target.getScreenCTM().inverse();\n  } catch (e) {\n    throw new Error('Can not inverse source element\\'s ctm.');\n  }\n\n  return matrix.multiply(source.getScreenCTM());\n}\n\nfunction getActualBoundingClientRect(node) {\n\n  // same as native getBoundingClientRect, except it takes into\n  // account  parent <frame> offsets if the element lies within\n  // a nested document (<frame> or <iframe>-like).\n\n  let boundingRect = node.getBoundingClientRect();\n\n  // The original object returned by getBoundingClientRect is immutable,\n  // so we clone it We can't use extend because the properties are not\n  // considered part of the object by hasOwnProperty in IE9\n\n  let rect = {};\n\n  /* eslint-disable guard-for-in */\n  for (let k in boundingRect) {\n    rect[k] = boundingRect[k];\n  }\n  /* eslint-enable guard-for-in */\n\n  if (node.ownerDocument !== document) {\n    let frameElement = node.ownerDocument.defaultView.frameElement;\n    if (frameElement) {\n      let frameRect = getActualBoundingClientRect(frameElement);\n      rect.top += frameRect.top;\n      rect.bottom += frameRect.top;\n      rect.left += frameRect.left;\n      rect.right += frameRect.left;\n    }\n  }\n\n  return rect;\n}\n\nexport function getBounds(elem) {\n\n  let doc;\n\n  if (elem === document) {\n    doc  = document;\n    elem = document.documentElement;\n  } else {\n    doc = elem.ownerDocument;\n  }\n\n  const docEle = doc.documentElement;\n  const bounds = getActualBoundingClientRect(elem);\n\n  if (isUndefined(bounds.width)) {\n    bounds.width = document.body.scrollWidth - bounds.left - bounds.right;\n  }\n  if (isUndefined(bounds.height)) {\n    bounds.height = document.body.scrollHeight - bounds.top - bounds.bottom;\n  }\n\n  bounds.top    = bounds.top - docEle.clientTop;\n  bounds.left   = bounds.left - docEle.clientLeft;\n  bounds.right  = doc.body.clientWidth - bounds.width - bounds.left;\n  bounds.bottom = doc.body.clientHeight - bounds.height - bounds.top;\n\n  return bounds;\n}\n\nexport function getScrollParent(elem) {\n\n  // In firefox if the el is inside an iframe with display: none;\n  // window.getComputedStyle() will return null;\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n\n  let computed = getComputedStyle(elem) || {};\n  let position = computed.position;\n\n  if (position === 'fixed') {\n    return elem;\n  }\n\n  let parent = elem;\n\n  while (parent = parent.parentNode) {\n    let style;\n\n    /* eslint-disable no-empty */\n    try {\n      style = getComputedStyle(parent);\n    } catch (err) { }\n    /* eslint-enable no-empty */\n\n\n    if (typeof style === 'undefined' || style === null) {\n      return parent;\n    }\n\n    let overflow  = style.overflow;\n    let overflowX = style.overflowX;\n    let overflowY = style.overflowY;\n\n    if (/(auto|scroll)/.test(overflow + overflowY + overflowX)) {\n      if (position !== 'absolute' || ['relative', 'absolute', 'fixed'].indexOf(style.position) >= 0) {\n        return parent;\n      }\n    }\n  }\n\n  return document.body;\n}\n\nexport function getScrollBarWidth() {\n\n  const inner = createElement('p');\n  const outer = createElement('div');\n\n  setStyle(inner, {\n    width: '100%',\n    height: '200px'\n  });\n\n  setStyle(outer, {\n    overflow: 'hidden',\n    visibility: 'hidden',\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    width: '200px',\n    height: '100px'\n  });\n\n  outer.appendChild(inner);\n  document.body.appendChild(outer);\n\n  let w1 = inner.offsetWidth;\n\n  outer.style.overflow = 'scroll';\n\n  let w2 = inner.offsetWidth;\n  if (w1 === w2) {\n    w2 = outer.clientWidth;\n  }\n\n  document.body.removeChild(outer);\n\n  return w1 - w2;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/dom.js\n **/","export function toDeg(rad) {\n\n  return (180 * rad / Math.PI) % 360;\n}\n\nexport function toRad(deg, over360) {\n\n  deg = over360 ? deg : (deg % 360);\n\n  return deg * Math.PI / 180;\n}\n\nexport function snapToGrid(val, gridSize = 1, method = 'round') {\n\n  return Math[method](val / gridSize) * gridSize;\n}\n\nexport function normalizeAngle(angle) {\n\n  return (angle % 360) + (angle < 0 ? 360 : 0);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/geom.js\n **/","import { some } from '../utils/array';\nimport { hasOwn } from '../utils/object';\nimport { isFunction } from '../utils/lang';\nimport { containsElement } from '../utils/dom';\nimport detector            from '../common/detector';\n\n\nconst WIN      = window;\nconst DOC      = window.document;\nconst IS_TOUCH = detector.IS_TOUCH;\n\nconst hooks = {\n  mouseenter: {\n    type: 'mouseover',\n    wrap: mouseEnterLeaveWrap\n  },\n  mouseleave: {\n    type: 'mouseout',\n    wrap: mouseEnterLeaveWrap\n  }\n};\n\nconst isMatchSelector = (() => {\n\n  const testDiv = DOC.createElement('div');\n\n  // match selector\n  const matchesSelector = testDiv.matches ||\n    testDiv.webkitMatchesSelector ||\n    testDiv.mozMatchesSelector ||\n    testDiv.msMatchesSelector ||\n    testDiv.oMatchesSelector;\n\n  const hasMatchesSelector = matchesSelector && matchesSelector.call(testDiv, 'div');\n\n  return (elem, selector) => {\n\n    if (hasMatchesSelector) {\n      return matchesSelector.call(elem, selector);\n    }\n\n    let parent = elem.parentNode;\n\n    // if the element is an orphan, and the browser doesn't support matching\n    // orphans, append it to a documentFragment\n    if (!parent && !hasMatchesSelector) {\n      parent = DOC.createDocumentFragment();\n      parent.appendChild(elem);\n    }\n\n    // from the parent element's context, get all nodes that match the selector\n    let nodes = parent.querySelectorAll(selector);\n\n    return some(nodes, node => node === elem);\n  };\n})();\n\nfunction mouseEnterLeaveWrap(elem, handler) {\n  return (e) => {\n    if (!isHover(e.delegateTarget || elem, e)) {\n      handler.call(this, e);\n    }\n  };\n}\n\nfunction isHover(elem, e) {\n\n  const target = e.type === 'mouseover'\n    ? e.relatedTarget || e.fromElement\n    : e.relatedTarget || e.toElement;\n\n  return containsElement(elem, target) || elem === target;\n}\n\nfunction fixEvent(e) {\n\n  // add W3C standard event methods\n  e.preventDefault  = () => { e.returnValue = false; };\n  e.stopPropagation = () => { e.cancelBubble = true; };\n\n  return e;\n}\n\nfunction handleEvent(event) {\n\n  let result  = true;\n  let element = this;\n\n  // grab the event object (IE uses a global event object)\n  event = event || fixEvent((DOC.parentWindow || WIN).event);\n\n  // get a reference to the hash table of event handlers\n  let handlers = element.events[event.type];\n\n  // execute each event handler\n  for (let key in handlers) {\n\n    if (hasOwn(handlers, key)) {\n\n      element.$$handleEvent = handlers[key];\n\n      if (element.$$handleEvent(event) === false) {\n        result = false;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction addEvent(elem, type, handler) {\n\n  if (elem.addEventListener) {\n    elem.addEventListener(type, handler, false);\n  } else {\n\n    // assign each event handler a unique ID\n    if (!handler.$$guid) {\n      addEvent.guid += 1;\n      handler.$$guid = addEvent.guid;\n    }\n\n    // create a hash table of event types for the element\n    if (!elem.events) {\n      elem.events = {};\n    }\n\n    let fixedName = `on${type}`;\n\n    // create a hash table of event handlers for each element/event pair\n    let handlers = elem.events[type];\n    if (!handlers) {\n      handlers = elem.events[type] = {};\n      // store the existing event handler (if there is one)\n      if (elem[fixedName]) {\n        handlers[0] = elem[fixedName];\n      }\n    }\n    // store the event handler in the hash table\n    handlers[handler.$$guid] = handler;\n    // assign a global event handler to do all the work\n    elem[fixedName]          = handleEvent;\n  }\n}\n\naddEvent.guid = 0;\n\nfunction getDelegateTarget(elem, target, selector) {\n\n  while (target && target !== elem) {\n\n    if (isMatchSelector(target, selector)) {\n      return target;\n    }\n\n    target = target.parentElement;\n  }\n\n  return null;\n}\n\n\nexport function removeEventListener(elem, type, handler) {\n\n  let hook    = hooks[type];\n  let wrapper = handler._delegateWrapper;\n\n  type = hook ? hook.type : type;\n\n  if (elem.removeEventListener) {\n\n    elem.removeEventListener(type, handler, false);\n    wrapper && elem.removeEventListener(type, wrapper, false);\n\n  } else if (elem.events && elem.events[type]) {\n\n    // delete the event handler from the hash table\n    delete elem.events[type][handler.$$guid];\n\n    if (wrapper) {\n      delete elem.events[type][wrapper.$$guid];\n    }\n  }\n}\n\nexport function addEventListener(elem, type, selector, handler, once) {\n\n  let hook = hooks[type];\n\n  type = hook ? hook.type : type;\n\n  if (isFunction(selector)) {\n    return hook\n      ? addEvent(elem, type, hook.wrap(elem, selector))\n      : addEvent(elem, type, selector);\n  }\n\n  function wrapper(e) {\n\n    // if this event has a delegateTarget, then we add it to the event\n    // object (so that handlers may have a reference to the delegator\n    // element) and fire the callback\n    let delegateTarget = getDelegateTarget(elem, e.target, selector);\n    if (delegateTarget) {\n\n      e.delegateTarget = delegateTarget;\n\n      if (hook) {\n        handler = hook.wrap(elem, handler);\n      }\n\n      if (once === true) {\n        removeEventListener(elem, type, wrapper);\n      }\n\n      handler.call(elem, e);\n    }\n  }\n\n  handler._delegateWrapper = wrapper;\n  addEvent(elem, type, wrapper);\n\n  return handler;\n}\n\nexport function normalizeEvent(e) {\n\n  let touchEvent = IS_TOUCH\n    && e.originalEvent\n    && e.originalEvent.changedTouches\n    && e.originalEvent.changedTouches[0];\n\n  if (touchEvent) {\n    for (let prop in e) {\n      // copy all the properties from the input event that are not\n      // defined on the touch event (functions included).\n      if (touchEvent[prop] === undefined) {\n        touchEvent[prop] = e[prop];\n      }\n    }\n    return touchEvent;\n  }\n\n  return e;\n}\n\nexport const hasAltKey   = e => e.altKey;\nexport const hasCtrlKey  = e => e.ctrlKey;\nexport const hasMetaKey  = e => e.metaKey;\nexport const hasShiftKey = e => e.shiftKey;\n\nexport function hasModifierKey(e) {\n\n  return hasCtrlKey(e) || hasMetaKey(e) || hasShiftKey(e);\n}\n\nexport function isLeftMouseButton(e) {\n\n  return detector.IS_IE\n    ? e.button === 1\n    : e.button === 0;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/event.js\n **/","const ua = navigator.userAgent;\nconst av = navigator.appVersion;\n\n\n// exports\n// -------\n\nexport default {\n\n  // IE\n  IS_IE: ua.indexOf('MSIE') >= 0,\n\n  IS_IE11: !!ua.match(/Trident\\/7\\./),\n\n  // Netscape\n  IS_NS: ua.indexOf('Mozilla/') >= 0 && ua.indexOf('MSIE') < 0,\n\n  // Firefox\n  IS_FF: ua.indexOf('Firefox/') >= 0,\n\n  // Chrome\n  IS_GC: ua.indexOf('Chrome/') >= 0,\n\n  // Safari\n  IS_SF: ua.indexOf('AppleWebKit/') >= 0 && ua.indexOf('Chrome/') < 0,\n\n  // Opera\n  IS_OP: ua.indexOf('Opera/') >= 0,\n\n  // True if -o-transform is available as a CSS style. This is the case\n  // for Opera browsers that use Presto/2.5 and later.\n  IS_OT: ua.indexOf('Presto/2.4.') < 0\n  && ua.indexOf('Presto/2.3.') < 0\n  && ua.indexOf('Presto/2.2.') < 0\n  && ua.indexOf('Presto/2.1.') < 0\n  && ua.indexOf('Presto/2.0.') < 0\n  && ua.indexOf('Presto/1.') < 0,\n\n  // True if -moz-transform is available as a CSS style. This is the case\n  // for all Firefox-based browsers newer than or equal 3, such as Camino,\n  // Iceweasel, Seamonkey and Iceape.\n  IS_MT: (ua.indexOf('Firefox/') >= 0 && ua.indexOf('Firefox/1.') < 0 && ua.indexOf('Firefox/2.') < 0)\n  || (ua.indexOf('Iceweasel/') >= 0 && ua.indexOf('Iceweasel/1.') < 0 && ua.indexOf('Iceweasel/2.') < 0)\n  || (ua.indexOf('SeaMonkey/') >= 0 && ua.indexOf('SeaMonkey/1.') < 0)\n  || (ua.indexOf('Iceape/') >= 0 && ua.indexOf('Iceape/1.') < 0),\n\n  IS_IOS: !!ua.match(/(iPad|iPhone|iPod)/g),\n\n  IS_WIN: av.indexOf('Win') > 0,\n\n  IS_MAC: av.indexOf('Mac') > 0,\n\n  IS_POINTER: window.navigator.msPointerEnabled || false,\n\n  IS_TOUCH: 'ontouchstart' in document.documentElement\n  || navigator.MaxTouchPoints > 0\n  || navigator.msMaxTouchPoints > 0,\n\n\n  SUPPORT_FOREIGN_OBJECT: (function () {\n\n    if (document.createElementNS) {\n\n      let toString = Object.prototype.toString;\n      let foreign  = document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject');\n\n      return /SVGForeignObject/.test(toString.call(foreign));\n    }\n\n    return false;\n  })()\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/common/detector.js\n **/","import { forEach } from './array';\n\nexport function lineToPathData(line) {\n\n  return [\n    'M', line.getAttribute('x1'), line.getAttribute('y1'),\n    'L', line.getAttribute('x2'), line.getAttribute('y2')\n  ].join(' ');\n}\n\nexport function polygonToPathData(polygon) {\n\n  let d = [];\n\n  forEach(polygon.points, (p, i) => {\n    d.push(i === 0 ? 'M' : 'L', p.x, p.y);\n  });\n\n  d.push('Z');\n\n  return d.join(' ');\n}\n\nexport function polylineToPathData(polyline) {\n\n  let d = [];\n\n  forEach(polyline.points, (p, i) => {\n    d.push(i === 0 ? 'M' : 'L', p.x, p.y);\n  });\n\n  return d.join(' ');\n}\n\nexport function rectToPathData(rect) {\n\n  let x  = parseFloat(rect.getAttribute('x')) || 0;\n  let y  = parseFloat(rect.getAttribute('y')) || 0;\n  let w  = parseFloat(rect.getAttribute('width')) || 0;\n  let h  = parseFloat(rect.getAttribute('height')) || 0;\n  let rx = parseFloat(rect.getAttribute('rx')) || 0;\n  let ry = parseFloat(rect.getAttribute('ry')) || 0;\n  let r  = x + w;\n  let b  = y + h;\n\n  let d;\n\n  if (!rx && !ry) {\n\n    d = [\n      'M', x, y,\n      'H', r,\n      'V', b,\n      'H', x,\n      'V', y,\n      'Z'\n    ];\n\n  } else {\n\n    d = [\n      'M', x + rx, y,\n      'L', r - rx, y,\n      'Q', r, y, r, y + ry,\n      'L', r, y + h - ry,\n      'Q', r, b, r - rx, b,\n      'L', x + rx, b,\n      'Q', x, b, x, b - rx,\n      'L', x, y + ry,\n      'Q', x, y, x + rx, y,\n      'Z'\n    ];\n  }\n  return d.join(' ');\n}\n\nlet KAPPA = 0.5522847498307935;\n\nexport function circleToPathData(circle) {\n\n  let cx = parseFloat(circle.getAttribute('cx')) || 0;\n  let cy = parseFloat(circle.getAttribute('cy')) || 0;\n  let r  = parseFloat(circle.getAttribute('r'));\n  let cd = r * KAPPA; // Control distance.\n\n  return [\n    'M', cx, cy - r,    // Move to the first point.\n    'C', cx + cd, cy - r, cx + r, cy - cd, cx + r, cy, // I. Quadrant.\n    'C', cx + r, cy + cd, cx + cd, cy + r, cx, cy + r, // II. Quadrant.\n    'C', cx - cd, cy + r, cx - r, cy + cd, cx - r, cy, // III. Quadrant.\n    'C', cx - r, cy - cd, cx - cd, cy - r, cx, cy - r, // IV. Quadrant.\n    'Z'\n  ].join(' ');\n}\n\nexport function ellipseToPathData(ellipse) {\n\n  let cx  = parseFloat(ellipse.getAttribute('cx')) || 0;\n  let cy  = parseFloat(ellipse.getAttribute('cy')) || 0;\n  let rx  = parseFloat(ellipse.getAttribute('rx'));\n  let ry  = parseFloat(ellipse.getAttribute('ry')) || rx;\n  let cdx = rx * KAPPA; // Control distance x.\n  let cdy = ry * KAPPA; // Control distance y.\n\n  return [\n    'M', cx, cy - ry,    // Move to the first point.\n    'C', cx + cdx, cy - ry, cx + rx, cy - cdy, cx + rx, cy, // I. Quadrant.\n    'C', cx + rx, cy + cdy, cx + cdx, cy + ry, cx, cy + ry, // II. Quadrant.\n    'C', cx - cdx, cy + ry, cx - rx, cy + cdy, cx - rx, cy, // III. Quadrant.\n    'C', cx - rx, cy - cdy, cx - cdx, cy - ry, cx, cy - ry, // IV. Quadrant.\n    'Z'\n  ].join(' ');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/pathData.js\n **/","import { toFloat }     from './number';\nimport { trim, split } from './string';\n\n\nexport function parseTranslate(transform) {\n\n  let translate = { tx: 0, ty: 0 };\n\n  if (transform) {\n\n    let match = transform.match(/translate\\((.*)\\)/);\n    if (match) {\n\n      let arr = split(match[1], /[ ,]+/);\n      if (arr[0]) {\n        translate.tx += toFloat(arr[0]);\n      }\n\n      if (arr[1]) {\n        translate.ty += toFloat(arr[1]);\n      }\n    }\n  }\n\n  return translate;\n}\n\nexport function parseScale(transform) {\n\n  let scale = { sx: 1, sy: 1 };\n\n  if (transform) {\n\n    let match = transform.match(/scale\\((.*)\\)/);\n    if (match) {\n\n      let arr = split(match[1], /[ ,]+/);\n      if (arr[0]) {\n        scale.sx *= toFloat(arr[0]);\n      }\n\n      if (arr[1] || arr[0]) {\n        scale.sy *= toFloat(arr[1] || arr[0]);\n      }\n    }\n  }\n\n  return scale;\n}\n\nexport function parseRotate(transform) {\n\n  let rotate = { angle: 0 };\n\n  if (transform) {\n\n    let match = transform.match(/rotate\\((.*)\\)/);\n    if (match) {\n\n      let arr = split(match[1], /[ ,]+/);\n      if (arr[0]) {\n        rotate.angle += toFloat(arr[0]);\n      }\n\n      if (arr[1] && arr[2]) {\n        rotate.cx = toFloat(arr[1]);\n        rotate.cy = toFloat(arr[2]);\n      }\n    }\n  }\n\n  return rotate;\n}\n\nexport function parseTransform(transform) {\n\n  return {\n    translate: parseTranslate(transform),\n    rotate: parseRotate(transform),\n    scale: parseScale(transform)\n  };\n}\n\nexport function clearTranslate(transform) {\n\n  return transform ? trim(transform.replace(/translate\\([^)]*\\)/g, '')) : '';\n}\n\nexport function clearScale(transform) {\n\n  return transform ? trim(transform.replace(/scale\\([^)]*\\)/g, '')) : '';\n}\n\nexport function clearRotate(transform) {\n\n  return transform ? trim(transform.replace(/rotate\\([^)]*\\)/g, '')) : '';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/transform.js\n **/","import * as utils from '../common/utils';\n\nclass Point {\n\n  constructor(x = 0, y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n\n\n  // statics\n  // -------\n\n  static equals(p1, p2) {\n\n    return this.isPoint(p1)\n      && this.isPoint(p2)\n      && p1.x === p2.x\n      && p1.y === p2.y;\n  }\n\n  static isPoint(p) {\n    return p && p instanceof Point;\n  }\n\n  static isPointLike(p) {\n\n    if (this.isPoint(p)) {\n      return true;\n    } else if (p) {\n      return utils.hasOwn(p, 'x') && utils.hasOwn(p, 'y');\n    }\n\n    return false;\n  }\n\n  static fromPoint(p) {\n\n    return new Point(p.x, p.y);\n  }\n\n  static fromPolar(r, angle, origin) {\n\n    origin = origin || new Point(0, 0);\n\n    let x = Math.abs(r * Math.cos(angle));\n    let y = Math.abs(r * Math.sin(angle));\n\n    let deg = utils.normalizeAngle(utils.toDeg(angle));\n\n    if (deg < 90) {\n      y = -y;\n    } else if (deg < 180) {\n      x = -x;\n      y = -y;\n    } else if (deg < 270) {\n      x = -x;\n    }\n\n    return new Point(origin.x + x, origin.y + y);\n  }\n\n  static fromString(str) {\n\n    let arr = str.split(str.indexOf('@') === -1 ? ' ' : '@');\n\n    return new Point(utils.toFloat(arr[0]), utils.toFloat(arr[1]));\n  }\n\n  static random(x1, x2, y1, y2) {\n\n    // Create a point with random coordinates that fall\n    // into the range `[x1, x2]` and `[y1, y2]`.\n\n    let x = Math.floor(Math.random() * (x2 - x1 + 1) + x1);\n    let y = Math.floor(Math.random() * (y2 - y1 + 1) + y1);\n\n    return new Point(x, y);\n  }\n\n\n  // methods\n  // -------\n\n  update(x = 0, y = 0) {\n\n    this.x = x;\n    this.y = y;\n\n    return this;\n  }\n\n  translate(dx = 0, dy = 0) {\n\n    this.x += dx;\n    this.y += dy;\n\n    return this;\n  }\n\n  rotate(origin, angle) {\n\n    // Rotate point by angle around origin `origin`.\n\n    angle = (angle + 360) % 360;\n\n    this.toPolar(origin);\n    this.y += utils.toRad(angle);\n\n    let p = Point.fromPolar(this.x, this.y, origin);\n\n    this.x = p.x;\n    this.y = p.y;\n\n    return this;\n  }\n\n  scale(sx, sy, origin) {\n\n    origin = origin || new Point(0, 0);\n\n    this.x = origin.x + sx * (this.x - origin.x);\n    this.y = origin.y + sy * (this.y - origin.y);\n\n    return this;\n  }\n\n  move(ref, distance) {\n\n    // Move point on the line from `ref` to me by `distance`.\n\n    let rad = utils.toRad(ref.theta(this));\n\n    return this.translate(Math.cos(rad) * distance, -Math.sin(rad) * distance);\n  }\n\n  reflect(ref) {\n\n    // Returns a point that is the reflection of me with\n    // the center of inversion in ref point.\n\n    return ref.move(this, this.distance(ref));\n  }\n\n  diff(point) {\n\n    return new Point(this.x - point.x, this.y - point.y);\n  }\n\n  round(precision) {\n\n    this.x = precision ? utils.toFixed(this.x, precision) : Math.round(this.x);\n    this.y = precision ? utils.toFixed(this.y, precision) : Math.round(this.y);\n\n    return this;\n  }\n\n  smooth() {\n\n    return this.round(2);\n  }\n\n  theta(point) {\n\n    // Compute the angle between me and `point` and the x axis.\n    // (cartesian-to-polar coordinates conversion)\n    // Return theta angle in degrees.\n\n    point = point || new Point();\n\n    // invert the y-axis.\n    let y = -(point.y - this.y);\n    let x = point.x - this.x;\n\n    let PRECISION = 10;\n    // Note that `atan2` is not defined for `x`, `y` both equal zero.\n    let rad       = utils.toFixed(x, PRECISION) === 0 && utils.toFixed(y, PRECISION) === 0\n      ? 0\n      : Math.atan2(y, x);\n\n    // Correction for III. and IV. quadrant.\n    if (rad < 0) {\n      rad = 2 * Math.PI + rad;\n    }\n\n    return utils.toDeg(rad);\n  }\n\n  distance(point) {\n\n    // Returns distance between me and point `point`.\n\n    point = point || new Point();\n\n    let dx = point.x - this.x;\n    let dy = point.y - this.y;\n\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  manhattanDistance(point) {\n\n    // Returns a manhattan (taxi-cab) distance between me and point `p`.\n\n    point = point || new Point();\n\n    return Math.abs(point.x - this.x) + Math.abs(point.y - this.y);\n  }\n\n  toPolar(origin) {\n\n    // Converts rectangular to polar coordinates.\n    // An origin can be specified, otherwise it's `0 0`.\n\n    origin = origin || new Point(0, 0);\n\n    let dx = this.x - origin.x;\n    let dy = this.y - origin.y;\n\n    this.y = utils.toRad(origin.theta(Point.fromPoint(this)));\n    this.x = Math.sqrt(dx * dx + dy * dy);\n\n    return this;\n  }\n\n  normalize(len = 1) {\n\n    // Scale the line segment between (0,0)\n    // and me to have a length of len.\n\n    let x = this.x;\n    let y = this.y;\n\n    if (x === 0 && y === 0) {\n      return this;\n    }\n\n    let scale;\n\n    if (x === 0) {\n      scale = len / y;\n    } else if (y === 0) {\n      scale = len / x;\n    } else {\n      scale = len / this.distance(new Point());\n    }\n\n    this.x = scale * x;\n    this.y = scale * y;\n\n    return this;\n  }\n\n  changeInAngle(dx, dy, ref) {\n\n    // Returns change in angle from my previous position (-dx, -dy) to\n    // my new position relative to ref point.\n\n    // Revert the translation and measure the change in angle around x-axis.\n    return Point.fromPoint(this).translate(-dx, -dy).theta(ref) - this.theta(ref);\n  }\n\n  snapToGrid(gx, gy) {\n\n    this.x = utils.snapToGrid(this.x, gx);\n    this.y = utils.snapToGrid(this.y, gy || gx);\n\n    return this;\n  }\n\n  adhereToRect(rect) {\n\n    // If point lies outside rectangle `rect`, return the nearest point on\n    // the boundary of rect `rect`, otherwise return point itself.\n\n    if (rect.containsPoint(this)) {\n      return this;\n    }\n\n    this.x = Math.min(Math.max(this.x, rect.x), rect.x + rect.width);\n    this.y = Math.min(Math.max(this.y, rect.y), rect.y + rect.height);\n\n    return this;\n  }\n\n  magnitude() {\n\n    return Math.sqrt((this.x * this.x) + (this.y * this.y)) || 0.01;\n  }\n\n  // common\n  // ------\n\n  valueOf() {\n    return [this.x, this.y];\n  }\n\n  toString() {\n    return this.valueOf().join(', ');\n  }\n\n  equals(p) {\n    return Point.equals(this, p);\n  }\n\n  clone() {\n    return Point.fromPoint(this);\n  }\n}\n\n\n// exports\n// -------\n\nexport default Point;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Point.js\n **/","import * as utils from '../common/utils';\nimport      Point from './Point';\n\n\nclass Line {\n\n  constructor(start, end) {\n\n    if (!start) {\n      throw new Error('The start point of line must be specified');\n    }\n\n    if (!end) {\n      throw new Error('The end point of line must be specified');\n    }\n\n    this.start = start;\n    this.end   = end;\n  }\n\n\n  // statics\n  // -------\n\n  static equals(line1, line2) {\n\n    return this.isLine(line1)\n      && this.isLine(line2)\n      && ((line1.start && line1.start.equals(line2.start)) || (!line1.start && !line2.start))\n      && ((line1.end && line1.end.equals(line2.end)) || (!line1.end && !line2.end));\n  }\n\n  static fromLine(line) {\n\n    return new Line(line.start.clone(), line.end.clone());\n  }\n\n  static isLine(line) {\n\n    return line && line instanceof Line;\n  }\n\n\n  // methods\n  // -------\n\n  getLength() {\n\n    return Math.sqrt(this.getSquaredLength());\n  }\n\n  getSquaredLength() {\n\n    // Return the line's length without sqrt.\n    // Note that for applications where the exact length\n    // is not necessary (e.g. compare only)\n\n    let dx = this.end.x - this.start.x;\n    let dy = this.end.y - this.end.x;\n\n    return dx * dx + dy * dy;\n  }\n\n  getMidpoint() {\n\n    let x = (this.start.x + this.end.x) / 2;\n    let y = (this.start.y + this.end.y) / 2;\n\n    return new Point(x, y);\n  }\n\n  getPointAt(percent) {\n\n    // get point at `percent` (0~1).\n\n    let x = (1 - percent) * this.start.x + percent * this.end.x;\n    let y = (1 - percent) * this.start.y + percent * this.end.y;\n\n    return new Point(x, y);\n  }\n\n  intersection(line) {\n\n    let start1 = this.start;\n    let end1   = this.end;\n\n    let start2 = line.start;\n    let end2   = line.end;\n\n    let point1 = new Point(end1.x - start1.x, end1.y - start1.y);\n    let point2 = new Point(end2.x - start2.x, end2.y - start2.y);\n\n    let det     = point1.x * point2.y - point1.y * point2.x;\n    let deltaPt = new Point(start2.x - start1.x, start2.y - start1.y);\n    let alpha   = deltaPt.x * point2.y - deltaPt.y * point2.x;\n    let beta    = deltaPt.x * point1.y - deltaPt.y * point1.x;\n\n    // no intersection found\n    if (det === 0 || alpha * det < 0 || beta * det < 0) {\n      return null;\n    }\n\n    if (det > 0) {\n      if (alpha > det || beta > det) {\n        return null;\n      }\n    } else {\n      if (alpha < det || beta < det) {\n        return null;\n      }\n    }\n\n    return new Point(start1.x + (alpha * point1.x / det), start1.y + (alpha * point1.y / det));\n  }\n\n  getDirection() {\n\n    // get cardinal direction of the line.\n    // One of the following bearings : NE, E, SE, S, SW, W, NW, N.\n\n    let start = this.start;\n    let end   = this.end;\n\n    let lat1 = utils.toRad(start.y);\n    let lat2 = utils.toRad(end.y);\n    let lon1 = start.x;\n    let lon2 = end.x;\n    let dLon = utils.toRad(lon2 - lon1);\n\n    let y = Math.sin(dLon) * Math.cos(lat2);\n    let x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);\n\n    let bearings = ['NE', 'E', 'SE', 'S', 'SW', 'W', 'NW', 'N'];\n    let brng     = utils.toDeg(Math.atan2(y, x));\n    let index    = brng - 22.5;\n\n    if (index < 0) {\n      index += 360;\n    }\n\n    index = utils.toInt(index / 45);\n\n    return bearings[index];\n  }\n\n  getOffset(point) {\n\n    // get the offset of the `point` from the line.\n    // + if the `point` is on the right side of the line,\n    // - if on the left and `0` if on the line.\n\n    let start = this.start;\n    let end   = this.end;\n\n    // Find the sign of the determinant of vectors (start,end), where p is the query point.\n    return ((end.x - start.x) * (point.y - start.y) - (end.y - start.y) * (point.x - start.x)) / 2;\n  }\n\n\n  // common\n  // ------\n\n  valueOf() {\n\n    return [this.satrt.valueOf(), this.end.valueOf()];\n  }\n\n  toString() {\n\n    return this.start.toString() + ' ' + this.end.toString();\n  }\n\n  equals(line) {\n\n    return Line.equals(this, line);\n  }\n\n  clone() {\n\n    return Line.fromLine(this);\n  }\n}\n\n\n// exports\n// -------\n\nexport default Line;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Line.js\n **/","import * as utils from '../common/utils';\nimport Terminal   from '../cells/Terminal';\n\n\n// private\n// -------\n\nfunction insertChild(child, index) {\n\n  let childCount = this.getChildCount();\n\n  index = utils.fixIndex(index, childCount);\n\n  if (child.parent === this && index === childCount) {\n    index -= 1;\n  }\n\n  // update parent\n  child.removeFromParent({ silent: true });\n  child.parent = this;\n\n  if (this.children && this.children.length) {\n    this.children.splice(index, 0, child);\n  } else {\n    // speed up\n    this.children = [];\n    this.children.push(child);\n  }\n\n  return this;\n}\n\nfunction getModel(primary, backup) {\n\n  let model = primary && primary.getModel();\n\n  if (!model && backup && backup.getModel) {\n    model = backup.getModel();\n  }\n\n  return model;\n}\n\nfunction scheduleSetParent(scheduled) {\n\n  this.setParent.scheduled = scheduled;\n\n  return this;\n}\n\nfunction isSetParentScheduled() {\n\n  return this.setParent.scheduled === true;\n}\n\nfunction scheduleSetTerminal(scheduled) {\n\n  this.setTerminal.scheduled = scheduled;\n\n  return this;\n}\n\nfunction isSetTerminalScheduled() {\n\n  return this.setTerminal.scheduled === true;\n}\n\n\nclass Cell {\n\n  constructor(options) {\n\n    const metadata = utils.merge({}, this.constructor.defaults, options);\n\n    // bind some common props\n    this.data     = metadata.data;\n    this.attrs    = metadata.attrs || {};\n    this.visible  = metadata.visible !== false;\n    this.metadata = metadata;\n  }\n\n\n  // static\n  // ------\n\n  static setDefaults(options) {\n\n    // update default options\n    this.defaults = utils.merge({}, this.defaults, options);\n  }\n\n\n  // link\n  // ----\n\n  isLink() {\n\n    return false;\n  }\n\n  getTerminal(isSource = true) {\n\n    return isSource ? this.source : this.target;\n  }\n\n  setTerminal(terminal, isSource = true, options = {}) {\n\n    scheduleSetTerminal.call(this, false);\n\n    if (!options.silent) {\n\n      let model = getModel(this, terminal);\n      if (model) {\n        // fully replace the previous terminal\n        model.setTerminal(this, terminal, isSource);\n        scheduleSetTerminal.call(this, true);\n      }\n    }\n\n    if (!isSetTerminalScheduled.call(this)) {\n\n      terminal = terminal ? new Terminal(terminal) : null;\n\n      if (isSource) {\n        this.source = terminal;\n\n        if (terminal) {\n          this.sourceNode  = terminal.node;\n          this.sourcePort  = terminal.port;\n          this.sourcePoint = terminal.point;\n        } else {\n          this.sourceNode  = null;\n          this.sourcePort  = null;\n          this.sourcePoint = null;\n        }\n\n      } else {\n        this.target = terminal;\n\n        if (terminal) {\n          this.targetNode  = terminal.node;\n          this.targetPort  = terminal.port;\n          this.targetPoint = terminal.point;\n        } else {\n          this.targetNode  = null;\n          this.targetPort  = null;\n          this.targetPoint = null;\n        }\n      }\n    }\n\n    return this;\n  }\n\n  getTerminalNode(isSource = true) {\n\n    let node = isSource\n      ? this.sourceNode\n      : this.targetNode;\n\n    if (!node) {\n\n      let terminal = this.getTerminal(isSource);\n\n      node = terminal && terminal.node || null;\n    }\n\n    return node;\n  }\n\n  setTerminalNode(node, isSource = true, options = {}) {\n\n    scheduleSetTerminal.call(this, false);\n\n    if (!options.silent) {\n      let model = getModel(this, node);\n      if (model) {\n        model.setTerminalNode(this, node, isSource);\n        scheduleSetTerminal.call(this, true);\n      }\n    }\n\n    if (!isSetTerminalScheduled.call(this)) {\n\n      if (isSource) {\n        this.sourceNode = node;\n      } else {\n        this.targetNode = node;\n      }\n\n      let terminal = this.getTerminal(isSource);\n      if (terminal) {\n        terminal.node = node;\n      }\n    }\n\n    return this;\n  }\n\n  getTerminalPort(isSource = true) {\n\n    let port = isSource\n      ? this.sourcePort\n      : this.targetPort;\n\n    if (!port) {\n\n      let terminal = this.getTerminal(isSource);\n\n      port = terminal && terminal.port || null;\n    }\n\n    return port;\n  }\n\n  setTerminalPort(port, isSource = true, options = {}) {\n\n    // partial replace the terminal port\n\n    scheduleSetTerminal.call(this, false);\n\n    if (!options.silent) {\n      let model = getModel(this);\n      if (model) {\n        model.setTerminalPort(this, port, isSource);\n        scheduleSetTerminal.call(this, true);\n      }\n    }\n\n    if (!isSetTerminalScheduled.call(this)) {\n\n      if (isSource) {\n        this.sourcePort = port;\n      } else {\n        this.targetPort = port;\n      }\n\n      let terminal = this.getTerminal(isSource);\n      if (terminal) {\n        terminal.port = port;\n      }\n    }\n\n    return this;\n  }\n\n  getTerminalPoint(isSource = true) {\n\n    let point = isSource\n      ? this.sourcePoint\n      : this.targetPoint;\n\n    if (!point) {\n\n      let terminal = this.getTerminal(isSource);\n\n      point = terminal && terminal.point || null;\n    }\n\n    return point;\n  }\n\n  setTerminalPoint(point, isSource = true, options = {}) {\n\n    scheduleSetTerminal.call(this, false);\n\n    if (!options.silent) {\n      let model = getModel(this);\n      if (model) {\n        model.setTerminalPoint(this, point, isSource);\n        scheduleSetTerminal.call(this, true);\n      }\n    }\n\n    if (!isSetTerminalScheduled.call(this)) {\n\n      if (isSource) {\n        this.sourcePoint = point;\n      } else {\n        this.targetPoint = point;\n      }\n\n      let terminal = this.getTerminal(isSource);\n      if (terminal) {\n        terminal.point = point;\n      }\n    }\n\n    return this;\n  }\n\n  removeFromTerminal(isSource = true, options = {}) {\n\n    // remove link from terminal\n    let terminal = this.getTerminal(isSource);\n    if (terminal) {\n\n      scheduleSetTerminal.call(this, false);\n\n      if (!options.silent) {\n        let model = getModel(this, terminal);\n        if (model) {\n          model.removeFromTerminal(this, isSource);\n          scheduleSetTerminal.call(this, true);\n        }\n      }\n\n      if (!isSetTerminalScheduled.call(this)) {\n        terminal.removeLink(this, isSource, { silent: true });\n      }\n    }\n\n    return this;\n  }\n\n\n  // node\n  // ----\n\n  isNode() {\n\n    return false;\n  }\n\n  getLinks() {\n\n    return this.links || [];\n  }\n\n  getLinkCount() {\n\n    return this.getLinks().length;\n  }\n\n  indexOfLink(link) {\n\n    return utils.indexOf(this.links, link);\n  }\n\n  getLinkAt(index) {\n\n    return this.links ? this.links[index] : null;\n  }\n\n  eachLink(iterator, context) {\n\n    return utils.forEach(this.links, iterator, context);\n  }\n\n  filterLink(iterator, context) {\n\n    return utils.filter(this.links, iterator, context);\n  }\n\n  addLink(link, outgoing = true, options = {}) {\n\n    if (!link) {\n      return this;\n    }\n\n    scheduleSetTerminal.call(link, false);\n\n    if (!options.silent) {\n      let model = getModel(link, this);\n      if (model) {\n        // fully replace the previous terminal\n        model.setTerminal(link, this, outgoing);\n        scheduleSetTerminal.call(link, true);\n      }\n    }\n\n    if (!isSetTerminalScheduled.call(link)) {\n\n      link.removeFromTerminal(outgoing, { silent: true });\n\n      // when source and target are the same node, these's\n      // no need to relate link with node once more.\n      if (!this.links || this.indexOfLink(link) < 0\n        || link.getTerminalNode(!outgoing) !== this) {\n\n        if (!this.links) {\n          this.links = [];\n        }\n\n        // links are unordered, push it to the array directly.\n        this.links.push(link);\n      }\n\n      link.setTerminal(this, outgoing, { silent: true });\n    }\n\n    return this;\n  }\n\n  removeLink(link, outgoing = true, options = {}) {\n\n    if (!link) {\n      return this;\n    }\n\n    scheduleSetTerminal.call(link, false);\n\n    if (!options.silent) {\n      let model = getModel(link, this);\n      if (model) {\n        // fully remove the previous terminal\n        model.setTerminal(link, null, outgoing);\n        scheduleSetTerminal.call(link, true);\n      }\n    }\n\n    if (!isSetTerminalScheduled.call(link)) {\n\n      // when the source and target are the same, do not remove it\n      if (this.links && link.getTerminalNode(!outgoing) !== this) {\n\n        let index = this.indexOfLink(link);\n        if (index >= 0) {\n          this.links.splice(index, 1);\n        }\n      }\n\n      link.setTerminal(null, outgoing, { silent: true });\n    }\n\n    return this;\n  }\n\n\n  // children\n  // --------\n\n  getChildren() {\n\n    return this.children || [];\n  }\n\n  getChildCount() {\n\n    return this.getChildren().length;\n  }\n\n  indexOfChild(child) {\n\n    return utils.indexOf(this.children, child);\n  }\n\n  getChildAt(index) {\n\n    return this.children ? this.children[index] : null;\n  }\n\n  eachChild(iterator, context) {\n\n    return utils.forEach(this.children, iterator, context);\n  }\n\n  filterChild(iterator, context) {\n\n    return utils.filter(this.children, iterator, context);\n  }\n\n  insertChild(child, index, options = {}) {\n\n    if (!child) {\n      return this;\n    }\n\n    if (utils.isObject(index)) {\n      options = index;\n    }\n\n    scheduleSetParent.call(child, false);\n\n    if (!options.silent) {\n      child.setParent(this, index);\n    }\n\n    if (!isSetParentScheduled.call(child)) {\n      // if unscheduled, insert it directly\n      insertChild.call(this, child, index);\n    }\n\n    return this;\n  }\n\n  removeChild(child, options = {}) {\n\n    return this.removeChildAt(this.indexOfChild(child), options);\n  }\n\n  removeChildAt(index, options = {}) {\n\n    let child = this.getChildAt(index);\n    if (child) {\n\n      scheduleSetParent.call(child, false);\n\n      if (!options.silent) {\n        child.setParent(null);\n      }\n\n      if (!isSetParentScheduled.call(child)) {\n        this.children.splice(index, 1);\n        child.parent = null;\n      }\n    }\n\n    // return the removed child\n    return child;\n  }\n\n\n  // parent\n  // ------\n\n  getParent() {\n\n    return this.parent;\n  }\n\n  setParent(parent, index, options = {}) {\n\n    scheduleSetParent.call(this, false);\n\n    // try to schedule a change\n    if (!options.silent) {\n\n      // this cell maybe not in a model, try get parent's model\n      let model = getModel(this, parent);\n      // schedule a change\n      if (model) {\n        model.setParent(this, parent, index);\n        scheduleSetParent.call(this, true);\n      }\n    }\n\n    if (!isSetParentScheduled.call(this)) {\n      if (parent) {\n        insertChild.call(parent, this, index);\n      } else {\n        this.removeFromParent({ silent: true });\n      }\n    }\n\n    return this;\n  }\n\n  removeFromParent(options = {}) {\n\n    if (this.parent) {\n\n      let scheduled = false;\n\n      // try to schedule a change\n      if (!options.silent) {\n        let model = getModel(this, this.parent);\n        if (model) {\n          model.removeCell(this);\n          scheduled = true;\n        }\n      }\n\n      if (!scheduled) {\n        this.parent.removeChild(this, { silent: true });\n      }\n    }\n\n    return this;\n  }\n\n  isOrphan() {\n\n    return utils.isNil(this.parent);\n  }\n\n  isAncestor(descendant) {\n\n    if (!descendant) {\n      return false;\n    }\n\n    while (descendant && descendant !== this) {\n      descendant = descendant.parent;\n    }\n\n    return descendant === this;\n  }\n\n  contains(descendant) {\n\n    return this.isAncestor(this, descendant);\n  }\n\n  getAncestors() {\n\n    let result = [];\n    let parent = this.parent;\n\n    while (parent) {\n      result.push(parent);\n      parent = parent.parent;\n    }\n\n    return result;\n  }\n\n  getDescendants() {\n\n    let result = [];\n\n    this.eachChild((child) => {\n      result.push(child);\n      result = result.concat(this.getDescendants(child));\n    });\n\n    return result;\n  }\n\n\n  // geometry\n  // --------\n\n  getSize(raw) {\n\n    return raw ? this.metadata.size : this.size;\n  }\n\n  _setSize(size) {\n\n    this.metadata.size = size;\n  }\n\n  setSize(size, options = {}) {\n\n    let scheduled = false;\n\n    size = {\n      width: size.width,\n      height: size.height,\n      relative: size.relative === true\n    };\n\n    if (!options.silent) {\n      let model = this.getModel();\n      if (model) {\n        model.setSize(this, size);\n        scheduled = true;\n      }\n    }\n\n    if (!scheduled) {\n      this._setSize(size);\n    }\n\n    return this;\n  }\n\n  resize(width, height, options = {}) {\n\n    return this.setSize({ width, height }, options);\n  }\n\n  getPosition(raw) {\n\n    return raw ? this.metadata.position : this.position;\n  }\n\n  _setPosition(position) {\n\n    this.metadata.position = position;\n  }\n\n  setPosition(position, options = {}) {\n\n    let scheduled = false;\n\n    position = {\n      x: position.x,\n      y: position.y,\n      relative: position.relative === true\n    };\n\n    if (!options.silent) {\n      let model = this.getModel();\n      if (model) {\n        model.setPosition(this, position);\n        scheduled = true;\n      }\n    }\n\n    if (!scheduled) {\n      this._setPosition(position);\n    }\n\n    return this;\n  }\n\n  translate(x, y, options = {}) {\n\n    return this.setPosition({ x, y }, options);\n  }\n\n  getRotation(raw) {\n\n    return raw ? this.metadata.rotation : this.rotation;\n  }\n\n  _setRotation(rotation) {\n\n    this.metadata.rotation = rotation;\n  }\n\n  setRotation(rotation, options = {}) {\n\n    let scheduled = false;\n\n    rotation = {\n      angle: rotation.angle,\n      relative: rotation.relative === true\n    };\n\n    if (!options.silent) {\n      let model = this.getModel();\n      if (model) {\n        model.setRotation(this, rotation);\n        scheduled = true;\n      }\n    }\n\n    if (!scheduled) {\n      this._setRotation(rotation);\n    }\n\n    return this;\n  }\n\n  rotate(angle, options = {}) {\n\n    return this.setRotation({ angle }, options);\n  }\n\n  getGeometry(raw) {\n\n    return {\n      size: this.getSize(raw),\n      position: this.getPosition(raw),\n      rotation: this.getRotation(raw)\n    };\n  }\n\n  _setGeometry(geom) {\n\n    utils.forEach(['size', 'position', 'rotation'], (key) => {\n\n      let val = geom[key];\n      if (val) {\n        this[`_set${utils.ucFirst(key)}`](val);\n      }\n\n    });\n  }\n\n  setGeometry(geom, options = {}) {\n\n    let scheduled = false;\n\n    if (!options.silent) {\n\n      let model = this.getModel();\n      if (model) {\n        model.setGeometry(this, geom);\n        scheduled = true;\n      }\n    }\n\n    if (!scheduled) {\n      this._setGeometry(geom);\n    }\n\n    return this;\n  }\n\n\n  // collapse\n  // --------\n\n  isCollapsed() {\n\n    return this.metadata.collapsed === true;\n  }\n\n  _setCollapsed(collapsed) {\n\n    this.metadata.collapsed = collapsed;\n  }\n\n  setCollapsed(collapsed, options = {}) {\n\n    let scheduled = false;\n\n    if (!options.silent) {\n\n      let model = getModel(this);\n      if (model) {\n        model.setCollapsed(this, collapsed);\n        scheduled = true;\n      }\n    }\n\n    if (!scheduled) {\n      this._setCollapsed(collapsed);\n    }\n\n    return this;\n  }\n\n  collapse(options = {}) {\n\n    return this.setCollapsed(true, options);\n  }\n\n  expand(options = {}) {\n\n    return this.setCollapsed(false, options);\n  }\n\n  toggleCollapse(options = {}) {\n\n    return this.isCollapsed()\n      ? this.expand(options)\n      : this.collapse(options);\n  }\n\n\n  // visible\n  // -------\n\n  isVisible() {\n\n    return this.visible !== false;\n  }\n\n  _setVisible(visible) {\n\n    this.visible\n      = this.metadata.visible\n      = !!visible;\n  }\n\n  setVisible(visible, options = {}) {\n\n    let scheduled = false;\n\n    if (!options.silent) {\n\n      let model = getModel(this);\n      if (model) {\n        model.setVisible(this, visible);\n        scheduled = true;\n      }\n    }\n\n    if (!scheduled) {\n      this._setVisible(visible);\n    }\n\n    return this;\n  }\n\n  show(options = {}) {\n\n    return this.setVisible(true, options);\n  }\n\n  hide(options = {}) {\n\n    return this.setVisible(false, options);\n  }\n\n  toggleVisible(options = {}) {\n\n    return this.isVisible()\n      ? this.hide(options)\n      : this.show(options);\n  }\n\n\n  // attribute\n  // ---------\n\n  getAttribute() {\n\n    return this.metadata.attrs;\n  }\n\n  _setAttribute(attrs) {\n\n    this.metadata.attrs = utils.merge({}, this.getAttribute(), attrs);\n  }\n\n  setAttribute(attrs, options = {}) {\n\n    let scheduled = false;\n\n    if (!options.silent) {\n\n      let model = this.getModel();\n      if (model) {\n        model.setAttribute(this, attrs);\n        scheduled = true;\n      }\n    }\n\n    if (!scheduled && this.metadata) {\n      this._setAttribute(attrs);\n    }\n\n    return this;\n  }\n\n\n  // access\n  // ------\n\n  getId() {\n\n    return this.id;\n  }\n\n  setId(id) {\n\n    this.id = id;\n  }\n\n  getModel() {\n\n    return this.model;\n  }\n\n  setModel(model) {\n\n    this.model = model || null;\n\n    return this;\n  }\n\n  addTo(parent, index, model = this.getModel()) {\n\n    if (model) {\n      model.addCell(this, parent, index);\n    }\n\n    return this;\n  }\n\n  getView(paper) {\n\n    return paper.getView(this);\n  }\n\n  getClassName() {\n\n    let classNames = this.metadata.classNames;\n\n    return utils.isArray(classNames)\n      ? classNames.join(' ')\n      : classNames || '';\n  }\n\n  getTagName() {\n\n    return this.metadata.tagName || 'g';\n  }\n\n  getMarkup() {\n\n    return this.metadata.markup;\n  }\n\n  getRenderData() {\n\n    // get the data for render markup\n    return this.data;\n  }\n\n\n  // lang\n  // ----\n\n  valueOf() {\n\n    return this.data;\n  }\n\n  toString() {\n\n    return this.getId() || Object.toString.call(this);\n  }\n\n  cloneData() {\n\n    let data = this.data;\n    if (data) {\n\n      if (data.clone && utils.isFunction(data.clone)) {\n        return data.clone();\n      }\n\n      if (utils.isNode(data)) {\n        return data.cloneNode(true);\n      }\n\n      if (utils.isObject(data)) {\n        return utils.merge({}, data);\n      }\n    }\n\n    return data;\n  }\n\n  clone(options, withData) {\n\n    let metadata = utils.merge({}, this.metadata, options);\n\n    metadata.data    = withData === true ? this.cloneData() : this.data;\n    metadata.visible = this.visible;\n\n    return new this.constructor(metadata);\n  }\n\n  destroy() {\n\n    this.eachChild(child => child.destroy());\n    this.eachLink(link => link.destroy());\n\n    this.removeFromTerminal(true)\n      .removeFromTerminal(false)\n      .removeFromParent();\n\n    utils.destroy(this);\n  }\n}\n\n\n// exports\n// -------\n\nexport default Cell;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/cells/Cell.js\n **/","import * as utils from '../common/utils';\nimport Point from '../geometry/Point';\n\n\nfunction scheduleSetTerminal(scheduled) {\n\n  this.setTerminal.scheduled = scheduled;\n\n  return this;\n}\n\nfunction isSetTerminalScheduled() {\n\n  return this.setTerminal.scheduled === true;\n}\n\n\nclass Terminal {\n\n  constructor(terminal) {\n\n    if (terminal instanceof Terminal) {\n      return terminal;\n    }\n\n    if (terminal) {\n\n      if (terminal.isNode && terminal.isNode()) {\n\n        this.node = terminal;\n\n      } else if (Point.isPointLike(terminal)) {\n\n        this.point = Point.fromPoint(terminal);\n\n      } else if (utils.isObject(terminal)) {\n\n        this.node  = terminal.node;\n        this.port  = terminal.port;\n        this.point = Point.isPointLike(terminal.point)\n          ? Point.fromPoint(terminal.point)\n          : null;\n      }\n    }\n\n    return this;\n  }\n\n  addLink(link, isSource = true, options = {}) {\n\n    if (link) {\n\n      scheduleSetTerminal.call(link, false);\n\n      if (!options.silent) {\n        let model = link.getModel() || this.getModel();\n        if (model) {\n          model.setTerminal(link, this, isSource);\n          scheduleSetTerminal.call(link, true);\n        }\n      }\n\n      if (!isSetTerminalScheduled.call(link)) {\n\n        if (this.node) {\n          this.node.addLink(link, isSource, { silent: true });\n        }\n\n        link.setTerminal(this, isSource, { silent: true });\n      }\n    }\n\n    return this;\n  }\n\n  removeLink(link, isSource = true, options = {}) {\n\n    if (link) {\n\n      scheduleSetTerminal.call(link, false);\n\n      if (!options.silent) {\n        let model = link.getModel() || this.getModel();\n        if (model) {\n          model.setTerminal(link, null, isSource);\n          scheduleSetTerminal.call(link, true);\n        }\n      }\n\n      if (!isSetTerminalScheduled.call(link)) {\n\n        if (this.node) {\n          this.node.removeLink(link, isSource, { silent: true });\n        }\n\n        link.setTerminal(null, isSource, { silent: true });\n      }\n    }\n\n    return this;\n  }\n\n  duplicate(terminal) {\n\n    let cloned = new Terminal(terminal);\n\n    // copy the missing properties\n    utils.forEach(['node', 'port', 'point'], function (key) {\n      if (this[key] && !cloned[key]) {\n        cloned[key] = this[key];\n      }\n    }, this);\n\n    return cloned;\n  }\n\n  getModel() {\n\n    return this.node && this.node.getModel();\n  }\n}\n\n\n// exports\n// -------\n\nexport default Terminal;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/cells/Terminal.js\n **/","import * as utils from '../../common/utils';\nimport Node       from '../../cells/Node';\n\n\nclass Path extends Node {\n\n  constructor(options) {\n\n    super(options);\n\n    this.parsePathData();\n  }\n\n  parsePathData() {\n\n    // parse path data\n\n    let pathData  = this.getPathData() || '';\n    let operators = pathData.match(/([A-Za-z])/g);\n\n    pathData = pathData\n      .replace(/^[A-Za-z]/, '')\n      .replace(/[A-Za-z]$/, '');\n\n    let groups = utils.split(pathData, /[A-Za-z]/);\n\n    groups = utils.map(groups, (group) => {\n\n      group = utils.trim(group);\n\n      let xys    = utils.split(group, /[\\s,]+/);\n      let points = [];\n\n      for (let i = 0, l = xys.length; i < l; i += 2) {\n        points.push({\n          x: utils.toFloat(xys[i]),\n          y: utils.toFloat(xys[i + 1])\n        });\n      }\n\n      return points;\n    });\n\n    let points = utils.reduce(groups, (previous, group) => previous.concat(group), []);\n\n    let minX = points[0].x;\n    let minY = points[0].y;\n    utils.forEach(points, (point) => {\n      minX = Math.min(point.x, minX);\n      minY = Math.min(point.y, minY);\n    });\n\n    let formatted = [];\n    utils.forEach(groups, (group, index) => {\n\n      if (operators[index]) {\n        formatted.push(operators[index]);\n      }\n\n      utils.forEach(group, (point) => {\n\n        let x = utils.toFixed(point.x - minX, 2);\n        let y = utils.toFixed(point.y - minY, 2);\n\n        formatted.push(x, y);\n      });\n    });\n\n    if (operators[groups.length]) {\n      formatted.push(operators[groups.length]);\n    }\n\n    let d     = formatted.join(' ');\n    let attrs = this.metadata.attrs;\n\n    if (attrs.path) {\n      attrs.path.d = d;\n    } else {\n      attrs.path = {\n        d\n      };\n    }\n  }\n\n  getPathData() {\n\n    let metadata = this.metadata;\n    let attrs    = metadata.attrs;\n    let pathAttr = attrs && attrs.path;\n    let pathData = pathAttr && pathAttr.d;\n\n    if (!pathData) {\n\n      let regPath = /<path(?:.+)d=([\"|'])(.*?)\\1/;\n      let markup  = metadata.markup || '';\n      let match   = markup.match(regPath);\n\n      if (match) {\n        pathData = match[2];\n      }\n    }\n\n    return pathData;\n  }\n}\n\nPath.setDefaults({\n\n  markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><path/></g><text/></g>',\n\n  size: {\n    width: 60,\n    height: 60\n  },\n\n  attrs: {\n    '.': {\n      fill: '#ffffff',\n      stroke: 'none'\n    },\n    'path': {\n      fill: '#ffffff',\n      stroke: '#000000'\n    },\n    'text': {\n      'font-size': 14,\n      'text': '',\n      'text-anchor': 'middle',\n      'ref': 'path',\n      'ref-x': .5,\n      'ref-dy': 10,\n      'fill': '#000000',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n});\n\n\nexport default Path;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Path.js\n **/","import Node from '../../cells/Node';\n\nclass Text extends Node {}\n\nText.setDefaults({\n\n  markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><text/></g></g>',\n\n  attrs: {\n    '.': {\n      fill: '#fff',\n      stroke: 'none'\n    },\n    'text': {\n      'font-size': 18,\n      'fill': '#000'\n    }\n  }\n});\n\n\nexport default Text;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Text.js\n **/","import * as utils from '../../common/utils';\nimport     Portal from '../../cells/Portal';\n\n\nclass Ports extends Portal {\n\n  constructor(options) {\n\n    super(options);\n\n    this.updatePortsAttrs();\n  }\n\n  updatePortsAttrs() {\n\n    let attrs = {};\n\n    utils.forEach(this.inPorts, function (port, index) {\n      utils.merge(attrs, this.getPortAttrs(port, index, true));\n    }, this);\n\n    utils.forEach(this.outPorts, function (port, index) {\n      utils.merge(attrs, this.getPortAttrs(port, index, false));\n    }, this);\n\n    utils.merge(this.attrs, attrs);\n\n    return this;\n  }\n\n  // get the attrs for every port, so we can customize\n  // the port's position, color, etc\n  getPortAttrs(port, index, isInPort) {\n\n    let attrs = {};\n    let ports = isInPort ? this.inPorts : this.outPorts;\n\n    let rootSelector  = this.getPortSelector(port, isInPort);\n    let labelSelector = rootSelector + '>.port-label';\n\n    attrs[labelSelector] = { text: port.id };\n    attrs[rootSelector]  = {\n      'ref': '.node-body',\n      'ref-y': (index + 0.5) * (1 / ports.length)\n    };\n\n    if (!isInPort) {\n      attrs[rootSelector]['ref-dx'] = 0;\n    }\n\n    return attrs;\n  }\n\n  getPortSelector(port, isInPort) {\n\n    return this.getPortsWrapSelector(isInPort) + '>.pane-port[data-id=\"' + port.id + '\"]';\n  }\n\n  getPortsWrapSelector(isInPort) {\n\n    return '.pane-ports.' + (isInPort ? 'in' : 'out');\n  }\n}\n\n\nPorts.setDefaults({\n  size: {\n    width: 80,\n    height: 100\n  },\n\n  markup: '' +\n  '<g class=\"pane-rotatable\">' +\n  '  <g class=\"pane-scalable\">' +\n  '    <rect class=\"node-body\"/>' +\n  '  </g>' +\n  '  <text class=\"node-label\"/>' +\n  '  <g class=\"pane-ports in\" />' +\n  '  <g class=\"pane-ports out\" />' +\n  '</g>',\n\n  portMarkup: '' +\n  '<g class=\"pane-port\" data-id=\"${id}\">' +\n  '  <circle class=\"port-body\"/>' +\n  '  <text class=\"port-label\"/>' +\n  '</g>',\n\n  attrs: {\n    '.node-label': {\n      'text': 'port',\n      'ref-x': 0.5,\n      'ref-y': 0.5,\n      'y-alignment': 'middle',\n      'text-anchor': 'middle'\n    },\n    '.in .port-label': {\n      x: -15,\n      dy: 4\n    },\n    '.out .port-label': {\n      x: 15,\n      dy: 4\n    }\n  }\n});\n\n\n// exports\n// -------\n\nexport default Ports;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Ports.js\n **/","import { uuid } from '../utils/string';\nimport { isObject } from '../utils/lang';\nimport { map, some, forEach } from '../utils/array';\nimport Node       from '../cells/Node';\nimport PortalView from '../views/PortalView';\n\nclass Portal extends Node {\n\n  constructor(options) {\n\n    super(options);\n\n    this.inPorts  = map(this.metadata.inPorts, port => this.standardizePort(port));\n    this.outPorts = map(this.metadata.outPorts, port => this.standardizePort(port));\n    this.portById = {};\n\n    forEach(this.inPorts, (port) => {\n      this.portById[port.id] = port;\n    });\n\n    forEach(this.outPorts, (port) => {\n      this.portById[port.id] = port;\n    });\n  }\n\n  eachInPort(iterator, context) {\n\n    forEach(this.inPorts, iterator, context);\n  }\n\n  eachOutPort(iterator, context) {\n\n    forEach(this.outPorts, iterator, context);\n  }\n\n  getInPorts() {\n\n    return this.inPorts;\n  }\n\n  getOutPorts() {\n\n    return this.outPorts;\n  }\n\n  getPortById(id) {\n\n    return this.portById[id] || null;\n  }\n\n  isInPort(port) {\n\n    return some(this.inPorts, item => item.id === port.id);\n  }\n\n  isOutPort(port) {\n\n    return some(this.outPorts, item => item.id === port.id);\n  }\n\n  standardizePort(port) {\n\n    if (!isObject(port)) {\n      port = { id: port };\n    }\n\n    if (!port.id) {\n      port.id = uuid();\n    }\n\n    return port;\n  }\n\n  getPortMarkup() {\n\n    return this.metadata.portMarkup;\n  }\n}\n\n\nPortal.setDefaults({\n  portMarkup: '',\n  inPorts: [],\n  outPorts: [],\n  view: PortalView\n});\n\n\n// exports\n// -------\n\nexport default Portal;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/cells/Portal.js\n **/","import * as utils from '../common/utils';\nimport     vector from '../common/vector';\nimport    Ellipse from '../geometry/Ellipse';\nimport   NodeView from '../views/NodeView';\n\n\nclass PortalView extends NodeView {\n\n  renderMarkup() {\n\n    super.renderMarkup();\n    this.renderPorts();\n\n    return this;\n  }\n\n  renderPorts() {\n\n    let vel  = this.vel;\n    let cell = this.getCell();\n\n    let inPorts    = cell.getInPorts();\n    let outPorts   = cell.getOutPorts();\n    let portMarkup = cell.getPortMarkup();\n\n    let inPortWrap  = vel.findOne(cell.getPortsWrapSelector(true));\n    let outPortWrap = vel.findOne(cell.getPortsWrapSelector(false));\n\n    if (inPortWrap) {\n\n      inPortWrap.empty();\n\n      utils.forEach(inPorts, function (port) {\n        let html = this.compileMarkup(portMarkup, port);\n        inPortWrap.append(vector(html));\n      }, this);\n    }\n\n    if (outPortWrap) {\n\n      outPortWrap.empty();\n\n      utils.forEach(outPorts, function (port) {\n        let html = this.compileMarkup(portMarkup, port);\n        outPortWrap.append(vector(html));\n      }, this);\n    }\n\n\n    return this;\n  }\n\n  getConnectionPointOnPort() {\n\n    return null;\n  }\n\n  getPortBodyBBox(port) {\n\n    let node   = this.getCell();\n    let portId = utils.isObject(port) ? port.id : port;\n\n    port = node.getPortById(portId);\n\n    let selector = node.getPortSelector(port, node.isInPort(port));\n    if (selector) {\n      let vel  = this.findOne(selector);\n      let body = vel && vel.findOne('.port-body');\n      if (body) {\n        return body.getBBox();\n      }\n    }\n\n    return null;\n  }\n\n  getPortBodyGeom(port) {\n\n    let node   = this.getCell();\n    let portId = utils.isObject(port) ? port.id : port;\n\n    port = node.getPortById(portId);\n\n    let selector = node.getPortSelector(port, node.isInPort(port));\n    if (selector) {\n      let vel  = this.findOne(selector);\n      let body = vel && vel.findOne('.port-body');\n      let elem = body && body.node;\n\n      if (elem) {\n\n        let bbox   = body.getBBox(false, this.getPane());\n        let center = bbox.getCenter();\n\n        let result;\n\n        if (utils.isNode(elem, 'circle')) {\n          let r = utils.getComputedStyle(elem, 'r');\n\n          r = utils.toFloat(r);\n\n          if (r) {\n            result = new Ellipse(center.x, center.y, r, r);\n          }\n        } else if (utils.isNode(elem, 'ellipse')) {\n          let rx = utils.getComputedStyle(elem, 'rx');\n          let ry = utils.getComputedStyle(elem, 'ry');\n\n          rx = utils.toFloat(rx);\n          ry = utils.toFloat(ry);\n\n          if (rx && ry) {\n            result = new Ellipse(center.x, center.y, rx, ry);\n          }\n        } else {\n          result = bbox;\n        }\n\n        return result;\n      }\n    }\n\n    return null;\n  }\n\n  findPortByElem(elem) {\n\n    let that  = this;\n    let vel   = that.vel;\n    let cell  = that.cell;\n    let vPort = vector(elem);\n\n    let className = 'pane-port';\n\n    if (!vPort.hasClass(className)) {\n      vPort = vPort.findParent(className, vel.node);\n    }\n\n    if (vPort) {\n\n      let vWrap = vPort.parent();\n      if (vWrap) {\n\n        let index = vPort.index();\n        let type  = vWrap.hasClass('in')\n          ? 'in' : vWrap.hasClass('out')\n          ? 'out' : '';\n        let ports = type === 'in'\n          ? cell.inPorts : type === 'out'\n          ? cell.outPorts\n          : [];\n\n        let selector = cell.getPortSelector(type, index);\n        let result   = null;\n\n        utils.some(ports, (port) => {\n\n          if (port.selector === selector) {\n            result = port;\n            return true;\n          }\n\n          return false;\n\n        });\n\n        return result;\n      }\n    }\n\n    return null;\n  }\n}\n\n\n// exports\n// -------\n\nexport default PortalView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/PortalView.js\n **/","import * as utils from '../common/utils';\nimport       Rect from '../geometry/Rect';\nimport      Point from '../geometry/Point';\n\n\nlet pathCount = 0;\n\nfunction createPathId() {\n\n  let id;\n\n  do {\n    pathCount += 1;\n    id = `pane-path-${pathCount}`;\n  } while (document.getElementById(id));\n\n  return id;\n}\n\nfunction deltaTransformPoint(matrix, point) {\n\n  return {\n    x: point.x * matrix.a + point.y * matrix.c,\n    y: point.x * matrix.b + point.y * matrix.d\n  };\n}\n\nfunction decomposeMatrix(matrix) {\n\n  // @see https://gist.github.com/2052247\n\n  // calculate delta transform point\n  let px = deltaTransformPoint(matrix, {\n    x: 0,\n    y: 1\n  });\n  let py = deltaTransformPoint(matrix, {\n    x: 1,\n    y: 0\n  });\n\n  // calculate skew\n  let skewX = ((180 / Math.PI) * Math.atan2(px.y, px.x) - 90);\n  let skewY = ((180 / Math.PI) * Math.atan2(py.y, py.x));\n\n  return {\n    skewX,\n    skewY,\n    translateX: matrix.e,\n    translateY: matrix.f,\n    scaleX: Math.sqrt(matrix.a * matrix.a + matrix.b * matrix.b),\n    scaleY: Math.sqrt(matrix.c * matrix.c + matrix.d * matrix.d),\n    rotation: skewX // rotation is the same as skew x\n  };\n}\n\nexport class VElement {\n\n  constructor(elem) {\n\n    if (!(this instanceof VElement)) {\n      return new VElement(elem);\n    }\n\n    if (elem instanceof VElement) {\n      elem = elem.node;\n    }\n\n    if (!elem) {\n      throw new Error('Unknown elem for VElement');\n    }\n\n    this.node = elem;\n\n    return this;\n  }\n\n  attr(name, value) {\n\n    if (utils.isUndefined(name)) { // return all attributes.\n\n      return utils.reduce(this.node.attributes, (result, attr) => {\n        result[attr.nodeName] = attr.nodeValue;\n        return result;\n      }, {});\n    }\n\n    if (utils.isString(name) && utils.isUndefined(value)) {\n      return this.node.getAttribute(name);\n    }\n\n    if (utils.isObject(name)) {\n      this.setAttrs(name);\n    } else {\n      this.setAttr(name, value);\n    }\n\n    return this;\n  }\n\n  setAttr(name, value) {\n\n    if (utils.isNil(value)) {\n      this.removeAttr(name);\n    } else {\n      utils.setAttribute(this.node, name, value);\n    }\n\n    return this;\n  }\n\n  setAttrs(attrs) {\n\n    utils.forIn(attrs, function (value, name) {\n      this.setAttr(name, value);\n    }, this);\n\n    return this;\n  }\n\n  removeAttr(name) {\n\n    utils.removeAttribute(this.node, name);\n\n    return this;\n  }\n\n  show() {\n\n    utils.showHide(this.node, true);\n\n    return this;\n  }\n\n  hide() {\n\n    utils.showHide(this.node, false);\n\n    return this;\n  }\n\n  toggle(state) {\n\n    if (utils.isBoolean(state)) {\n      return state ? this.show() : this.hide();\n    }\n\n    if (utils.isHidden(this.node)) {\n      this.show();\n    } else {\n      this.hide();\n    }\n\n    return this;\n  }\n\n  getClassName() {\n\n    return utils.getClassName(this.node);\n  }\n\n  hasClass(selector) {\n\n    return utils.hasClass(this.node, selector);\n  }\n\n  addClass(selector) {\n\n    utils.addClass(this.node, selector);\n\n    return this;\n  }\n\n  removeClass(selector) {\n\n    utils.removeClass(this.node, selector);\n\n    return this;\n  }\n\n  toggleClass(selector, stateVal) {\n\n    utils.toggleClass(this.node, selector, stateVal);\n\n    return this;\n  }\n\n  css(name, value) {\n\n    if (!name) {\n      return this.node.style;\n    }\n\n    utils.setStyle(this.node, name, value);\n\n    return this;\n  }\n\n  text(content, options = {}) {\n\n    // replace all spaces with the Unicode No-break space\n    // (http://www.fileformat.info/info/unicode/char/a0/index.htm).\n    // IE would otherwise collapse all spaces into one.\n    content = utils.sanitizeText(content);\n\n    // `alignment-baseline` does not work in Firefox.\n    // Setting `dominant-baseline` on the `<text>` element doesn't work in IE9.\n    // In order to have the 0,0 coordinate of the `<text>` element (or the first `<tspan>`)\n    // in the top left corner we translate the `<text>` element by `0.8em`.\n    // See `http://www.w3.org/Graphics/SVG/WG/wiki/How_to_determine_dominant_baseline`.\n    // See also `http://apike.ca/prog_svg_text_style.html`.\n    let y = this.attr('y');\n    if (!y) {\n      this.attr('y', '0.8em');\n    }\n\n    // An empty text gets rendered into the DOM in webkit-based browsers.\n    // In order to unify this behaviour across all browsers we rather\n    // hide the text element when it's empty.\n    this.attr('display', content ? null : 'none');\n\n    // Preserve spaces. In other words, we do not want consecutive spaces to get collapsed to one.\n    this.attr('xml:space', 'preserve');\n\n    // Easy way to erase all `<tspan>` children;\n    this.node.textContent = '';\n\n\n    let textNode        = this.node;\n    let textPathOptions = options.textPath;\n    if (textPathOptions) {\n\n      // Wrap the text in the SVG <textPath> element that points to a path\n      // defined by `options.textPath` inside the internal `<defs>` element.\n      let defs = this.find('defs');\n      if (!defs.length) {\n        defs = createVElement('defs');\n        this.append(defs);\n      }\n\n      // If `opt.textPath` is a plain string, consider it to be directly\n      // the SVG path data for the text to go along (this is a shortcut).\n      // Otherwise if it is an object and contains the `d` property,\n      // then this is our path.\n      let isTextPathObject = Object(textPathOptions) === textPathOptions;\n\n      // d attr\n      let d = isTextPathObject ? textPathOptions.d : textPathOptions;\n\n      let vPath;\n\n      if (d) {\n\n        vPath = createVElement('path', {\n          d,\n          id: createPathId()\n        });\n\n        defs.append(vPath);\n      }\n\n      let vTextPath = createVElement('textPath');\n\n      // Set attributes on the `<textPath>`. The most important one\n      // is the `xlink:href` that points to our newly created `<path/>` element in `<defs/>`.\n      // Note that we also allow the following construct:\n      // `t.text('my text', {textPath: {'xlink:href': '#my-other-path'}})`.\n      // In other words, one can completely skip the auto-creation of the path\n      // and use any other arbitrary path that is in the document.\n      if (!textPathOptions['xlink:href'] && vPath) {\n        vTextPath.attr('xlink:href', `#${vPath.node.id}`);\n      }\n\n      if (isTextPathObject) {\n        vTextPath.attr(textPathOptions);\n      }\n\n      this.append(vTextPath);\n\n      // Now all the `<tspan>`s will be inside the `<textPath>`.\n      textNode = vTextPath.node;\n    }\n\n\n    let offset      = 0;\n    let lines       = content.split('\\n');\n    let lineHeight  = options.lineHeight;\n    let annotations = options.annotations;\n\n    let includeAnnotationIndices = options.includeAnnotationIndices;\n\n    if (annotations) {\n      annotations = utils.isArray(annotations) ? annotations : [annotations];\n    }\n\n    lineHeight = lineHeight === 'auto' ? '1.5em' : lineHeight || '1em';\n\n\n    utils.forEach(lines, (line, i) => {\n\n      let vLine = createVElement('tspan', {\n        dy: i ? lineHeight : '0',\n        x: this.attr('x') || 0\n      });\n\n      vLine.addClass('pane-text-line');\n\n      if (line) {\n\n        if (annotations) {\n          // Get the line height based on the biggest font size\n          // in the annotations for this line.\n          let maxFontSize = 0;\n\n          // Find the *compacted* annotations for this line.\n          let lineAnnotations = vector.annotateString(line, annotations, {\n            offset: -offset,\n            includeAnnotationIndices\n          });\n\n          utils.forEach(lineAnnotations, (annotation) => {\n\n            let tspan;\n\n            if (utils.isObject(annotation)) {\n\n              let fontSize = utils.toInt(annotation.attrs['font-size']);\n              if (fontSize && fontSize > maxFontSize) {\n                maxFontSize = fontSize;\n              }\n\n              tspan = createVElement('tspan', annotation.attrs);\n              if (includeAnnotationIndices) {\n                // If `includeAnnotationIndices` is `true`,\n                // set the list of indices of all the applied annotations\n                // in the `annotations` attribute. This list is a comma\n                // separated list of indices.\n                tspan.attr('annotations', annotation.annotations);\n              }\n\n              if (annotation.attrs.class) {\n                tspan.addClass(annotation.attrs.class);\n              }\n\n              tspan.node.textContent = annotation.t;\n\n            } else {\n              tspan = document.createTextNode(annotation || ' ');\n            }\n\n            vLine.append(tspan);\n          });\n\n          if (options.lineHeight === 'auto' && maxFontSize && i !== 0) {\n            vLine.attr('dy', (maxFontSize * 1.2) + 'px');\n          }\n\n        } else {\n          vLine.node.textContent = line;\n        }\n\n      } else {\n\n        // Make sure the textContent is never empty.\n        // If it is, add a dummy character and make it invisible,\n        // making the following lines correctly relatively positioned.\n        // `dy=1em` won't work with empty lines otherwise.\n        vLine.addClass('pane-text-empty');\n        vLine.node.style.opacity = 0;\n        vLine.node.textContent   = '-';\n      }\n\n      textNode.appendChild(vLine.node);\n\n      offset += line.length + 1;      // + 1 = newline character.\n\n    }, this);\n\n    return this;\n  }\n\n  html(content) {\n\n    this.node.innerHTML = content;\n\n    return this;\n  }\n\n  remove() {\n\n    utils.removeElement(this.node);\n\n    return this;\n  }\n\n  empty() {\n\n    utils.emptyElement(this.node);\n\n    return this;\n  }\n\n  append(elem) {\n    eachElem(elem, function (item) {\n      this.node.appendChild(normalize(item));\n    }, this);\n\n    return this;\n  }\n\n  prepend(elem) {\n    eachElem(elem, function (item) {\n      this.node.insertBefore(normalize(item), this.node.firstChild);\n    }, this);\n\n    return this;\n  }\n\n  before(elem) {\n    eachElem(elem, function (item) {\n      if (this.node.parentNode) {\n        this.node.parentNode.insertBefore(normalize(item), this.node);\n      }\n    }, this);\n\n    return this;\n  }\n\n  after(elem) {\n    eachElem(elem, function (item) {\n      if (this.node.parentNode) {\n        this.node.parentNode.insertBefore(normalize(item), this.node.nextSibling);\n      }\n    }, this);\n\n    return this;\n  }\n\n  appendTo(elem) {\n\n    getLastVElement(elem).append(this);\n\n    return this;\n  }\n\n  prependTo(elem) {\n\n    getLastVElement(elem).prepend(this);\n\n    return this;\n  }\n\n  insertBefore(elem) {\n\n    getLastVElement(elem).before(this);\n\n    return this;\n  }\n\n  insertAfter(elem) {\n\n    getLastVElement(elem).after(this);\n\n    return this;\n  }\n\n  getSVG() {\n\n    return this.node instanceof window.SVGSVGElement\n      ? this\n      : vectorize(this.node.ownerSVGElement);\n  }\n\n  getDefs() {\n\n    let svg  = this.getSVG();\n    let defs = svg.node.getElementsByTagName('defs');\n\n    if (defs && defs.length) {\n      defs = vectorize(defs[0]);\n    } else {\n      defs = createVElement('defs');\n      svg.append(defs);\n    }\n\n    return defs;\n  }\n\n  clone() {\n\n    let cloned = vectorize(this.node.cloneNode(true));\n\n    if (this.node.id) {\n      cloned.node.removeAttribute('id');\n    }\n\n    return cloned;\n  }\n\n  find(selector) {\n\n    return utils.map(this.node.querySelectorAll(selector), vectorize);\n  }\n\n  findOne(selector) {\n\n    let found = this.node.querySelector(selector);\n    return found ? vectorize(found) : null;\n  }\n\n  findParent(className, terminator) {\n\n    let stop = terminator || this.node.ownerSVGElement;\n    let node = this.node.parentNode;\n\n    while (node && node !== stop) {\n      let vel = vectorize(node);\n      if (vel.hasClass(className)) {\n        return vel;\n      }\n\n      node = node.parentNode;\n    }\n\n    return null;\n  }\n\n  parent() {\n\n    let parentNode = this.node && this.node.parentNode;\n    if (parentNode) {\n      return vectorize(parentNode);\n    }\n\n    return null;\n  }\n\n  index() {\n\n    let idx  = 0;\n    let node = this.node.previousSibling;\n\n    while (node) {\n      // nodeType 1 for ELEMENT_NODE\n      if (node.nodeType === 1) {\n        idx += 1;\n      }\n      node = node.previousSibling;\n    }\n\n    return idx;\n  }\n\n  translate(tx, ty, relative) {\n\n    let raw = this.attr('transform') || '';\n    let ts  = utils.parseTranslate(raw);\n\n    if (utils.isUndefined(tx)) {\n      return ts;\n    }\n\n    tx = relative ? ts.tx + tx : tx;\n    ty = relative ? ts.ty + ty : ty;\n\n    let mutant = utils.clearTranslate(raw);\n    let final  = 'translate(' + tx + ',' + ty + ')';\n\n    // Note that `translate()` is always the first transformation.\n    // This is usually the desired case.\n    if (mutant) {\n      final = final + ' ' + mutant;\n    }\n\n    this.attr('transform', final);\n\n    return this;\n  }\n\n  rotate(angle, cx, cy, relative) {\n\n    let raw = this.attr('transform') || '';\n    let rt  = utils.parseRotate(raw);\n\n    if (utils.isUndefined(angle)) {\n      return rt;\n    }\n\n    angle %= 360;\n\n    let newAngle  = relative ? rt.angle + angle : angle;\n    let newOrigin = utils.isUndefined(cx) || utils.isUndefined(cy) ? '' : ',' + cx + ',' + cy;\n\n    let mutant = utils.clearRotate(raw);\n    let final  = 'rotate(' + newAngle + newOrigin + ')';\n\n    if (mutant) {\n      final = mutant + ' ' + final;\n    }\n\n    return this.attr('transform', final);\n  }\n\n  scale(sx, sy, relative) {\n\n    let raw = this.attr('transform') || '';\n    let sc  = utils.parseScale(raw);\n\n    if (utils.isUndefined(sx)) {\n      return sc;\n    }\n\n    if (utils.isUndefined(sy)) {\n      sy = sx;\n    }\n\n\n    sx = relative ? sc.sx * sx : sx;\n    sy = relative ? sc.sy * sy : sy;\n\n    let mutant = utils.clearScale(raw);\n    let final  = 'scale(' + sx + ',' + sy + ')';\n\n    if (mutant) {\n      final = mutant + ' ' + final;\n    }\n\n    return this.attr('transform', final);\n  }\n\n  getBBox(withoutTransformations, target) {\n\n    // Get SVGRect that contains coordinates and dimension of the real\n    // bounding box, i.e. after transformations are applied.\n    // If `target` is specified, bounding box will be computed\n    // relatively to `target` element.\n\n    // If the element is not in the live DOM, it does not have a bounding\n    // box defined and so fall back to 'zero' dimension element.\n    if (!this.node.ownerSVGElement) {\n      return new Rect(0, 0, 0, 0);\n    }\n\n    let box;\n    try {\n      box = this.node.getBBox();\n      // We are creating a new object as the standard says that\n      // you can't modify the attributes of a bbox.\n      box = {\n        x: box.x,\n        y: box.y,\n        width: box.width,\n        height: box.height\n      };\n    } catch (e) {\n      // fallback for IE\n      box = {\n        x: this.node.clientLeft,\n        y: this.node.clientTop,\n        width: this.node.clientWidth,\n        height: this.node.clientHeight\n      };\n    }\n\n    if (!withoutTransformations) {\n\n      let matrix = this.getTransformToElement(target || this.node.ownerSVGElement);\n\n      box = vector.transformRect(box, matrix);\n    }\n\n    return Rect.fromRect(box);\n  }\n\n  toLocalPoint(x, y) {\n\n    // Convert global point into the coordinate space of this element.\n    let svg   = this.getSVG().node;\n    let point = svg.createSVGPoint();\n\n    point.x = x;\n    point.y = y;\n\n    try {\n      // ref: https://msdn.microsoft.com/zh-cn/library/hh535760(v=vs.85).aspx\n      let globalPoint         = point.matrixTransform(svg.getScreenCTM().inverse());\n      let globalToLocalMatrix = this.getTransformToElement(svg).inverse();\n      return globalPoint.matrixTransform(globalToLocalMatrix);\n\n    } catch (e) {\n      // IE9 throws an exception in odd cases.\n      // (`Unexpected call to method or property access`)\n      // We have to make do with the original coordianates.\n      return point;\n    }\n  }\n\n  getTransformToElement(toElem) {\n\n    return utils.getTransformToElement(this.node, toElem);\n  }\n\n  translateCenterToPoint(point) {\n\n    let bbox   = this.getBBox();\n    let center = bbox.getCenter();\n\n    this.translate(point.x - center.x, point.y - center.y);\n\n    return this;\n  }\n\n  translateAndAutoOrient(position, reference, target) {\n\n    // Efficiently auto-orient an element.\n    // This basically implements the orient=auto attribute of markers.\n    // The easiest way of understanding on what this does is to imagine\n    // the element is an arrowhead. Calling this method on the arrowhead\n    // makes it point to the `position` point while being auto-oriented\n    // (properly rotated) towards the `reference` point. `target` is the\n    // element relative to which the transformations are applied. Usually\n    // a viewport.\n\n\n    // Clean-up previously set transformations except the scale. If we\n    // didn't clean up the previous transformations then they'd add up\n    // with the old ones. Scale is an exception as it doesn't add up,\n    // consider: `this.scale(2).scale(2).scale(2)`. The result is that the\n    // element is scaled by the factor 2, not 8.\n\n    let scale = this.scale();\n    this.attr('transform', '');\n    this.scale(scale.sx, scale.sy);\n\n    let svg  = this.getSVG().node;\n    let bbox = this.getBBox(false, target);\n\n    // 1. Translate to origin.\n    let translateToOrigin = svg.createSVGTransform();\n    translateToOrigin.setTranslate(-bbox.x - bbox.width / 2, -bbox.y - bbox.height / 2);\n\n\n    // 2. Rotate around origin.\n    let rotateAroundOrigin = svg.createSVGTransform();\n\n    let angle = Point\n      .fromPoint(position)\n      .changeInAngle(position.x - reference.x, position.y - reference.y, reference);\n    rotateAroundOrigin.setRotate(angle, 0, 0);\n\n\n    // 3. Translate to the `position` + the offset (half my width) towards the `reference` point.\n    let transformFinal = svg.createSVGTransform();\n    let finalPosition  = Point.fromPoint(position).move(reference, bbox.width / 2);\n\n    let tx = position.x + (position.x - finalPosition.x);\n    let ty = position.y + (position.y - finalPosition.y);\n\n    transformFinal.setTranslate(tx, ty);\n\n\n    // 4. Apply transformations.\n    let matrix    = this.getTransformToElement(target);\n    let transform = svg.createSVGTransform();\n    transform.setMatrix(\n      transformFinal.matrix.multiply(\n        rotateAroundOrigin.matrix.multiply(\n          translateToOrigin.matrix.multiply(matrix)))\n    );\n\n\n    // Instead of directly setting the `matrix()` transform on the element,\n    // first, decompose the matrix into separate transforms. This allows us\n    // to use normal vector's methods as they don't work on matrices.\n    // An example of this is to retrieve a scale of an element.\n\n    let decomposition = decomposeMatrix(transform.matrix);\n\n    tx = utils.toFixed(decomposition.translateX, 2);\n    ty = utils.toFixed(decomposition.translateY, 2);\n    this.translate(tx, ty);\n    this.rotate(utils.toFixed(decomposition.rotation, 2));\n    // Note that scale has been already applied\n    // this.scale(decomposition.scaleX, decomposition.scaleY);\n\n    return this;\n  }\n\n  animateAlongPath() { }\n\n  sample(interval) {\n\n    // Interpolate path by discrete points.\n    // The precision of the sampling is controlled by `interval`.\n    // In other words, `sample()` will generate a point on the path\n    // starting at the beginning of the path going to the end every\n    // `interval` pixels.\n    // The sampler can be very useful. E.g. finding intersection between\n    // two paths (finding the two closest points from two samples).\n\n\n    // `path.getTotalLength()`\n    // Returns the computed value for the total length of the path using\n    // the browser's distance-along-a-path algorithm, as a distance in the\n    // current user coordinate system.\n\n    // `path.getPointAtLength(distance)`\n    // Returns the (x,y) coordinate in user space which is distance units\n    // along the path, utilizing the browser's distance-along-a-path algorithm.\n\n    interval = interval || 1;\n\n    let length   = this.node.getTotalLength();\n    let distance = 0;\n    let samples  = [];\n\n    while (distance < length) {\n\n      let sample = this.node.getPointAtLength(distance);\n\n      samples.push({\n        distance,\n        x: sample.x,\n        y: sample.y\n      });\n\n      distance += interval;\n    }\n\n    return samples;\n  }\n\n  toPath() {\n\n    let path = vectorize(utils.createSvgElement('path'));\n    let d    = this.toPathData();\n\n    path.attr(this.attr());\n\n    d && path.attr('d', d);\n\n    return path;\n  }\n\n  toPathData() {\n\n    let tagName = this.node.tagName.toLowerCase();\n    if (tagName === 'path') {\n      return this.attr('d');\n    }\n\n    let method = utils[tagName + 'ToPathData'];\n    if (utils.isFunction(method)) {\n      return method(this.node);\n    }\n\n    throw new Error(tagName + ' cannot be converted to PATH.');\n  }\n\n  findIntersection(ref, target) {\n\n    // Find the intersection of a line starting in the center of the `node`\n    // ending in the point `ref`. `target` is an SVG element to which\n    // node's transformations are relative to. Note that `ref` point must\n    // be in  the coordinate system of the `target` for this function to\n    // work  properly. Returns a point in the `target` coordinate system\n    // (the same system as `ref` is in) if an intersection is found.\n    // Returns `undefined` otherwise.\n\n    let that = this;\n    let svg  = that.getSVG().node;\n\n    target = target || svg;\n\n    let bbox   = Rect.fromRect(that.getBBox(false, target));\n    let center = bbox.getCenter();\n    let spot   = bbox.intersectionWithLineFromCenterToPoint(ref);\n\n    if (!spot) {\n      return undefined;\n    }\n\n    let tagName = that.node.localName.toUpperCase();\n\n    // Little speed up optimalization for `<rect>` element. We do not do conversion\n    // to path element and sampling but directly calculate the intersection through\n    // a transformed geometrical rectangle.\n    if (tagName === 'RECT') {\n\n      let gRect                = new Rect(\n        parseFloat(this.attr('x') || 0),\n        parseFloat(this.attr('y') || 0),\n        parseFloat(this.attr('width')),\n        parseFloat(this.attr('height'))\n      );\n      // Get the rect transformation matrix with regards to the SVG document.\n      let rectMatrix           = that.getTransformToElement(target);\n      // Decompose the matrix to find the rotation angle.\n      let rectMatrixComponents = vector.decomposeMatrix(rectMatrix);\n      // Now we want to rotate the rectangle back so that we\n      // can use `intersectionWithLineFromCenterToPoint()` passing the angle as the second argument.\n      let resetRotation = svg.createSVGTransform();\n      resetRotation.setRotate(-rectMatrixComponents.rotation, center.x, center.y);\n      let rect = vector.transformRect(gRect, resetRotation.matrix.multiply(rectMatrix));\n\n      spot = Rect\n        .fromRect(rect)\n        .intersectionWithLineFromCenterToPoint(ref, rectMatrixComponents.rotation);\n\n    } else if (tagName === 'PATH'\n      || tagName === 'POLYGON'\n      || tagName === 'POLYLINE'\n      || tagName === 'CIRCLE'\n      || tagName === 'ELLIPSE') {\n\n      let pathNode       = (tagName === 'PATH') ? that : that.toPath();\n      let samples        = pathNode.sample();\n      let minDistance    = Infinity;\n      let closestSamples = [];\n\n      for (let i = 0, len = samples.length; i < len; i + 1) {\n\n        let sample         = samples[i];\n        // Convert the sample point in the local coordinate system to the global coordinate system.\n        let gp             = vector.createSVGPoint(sample.x, sample.y);\n        gp                 = gp.matrixTransform(that.getTransformToElement(target));\n        sample             = Point.fromPoint(gp);\n        let centerDistance = sample.distance(center);\n        // Penalize a higher distance to the reference point by 10%.\n        // This gives better results. This is due to\n        // inaccuracies introduced by rounding errors and getPointAtLength() returns.\n        let refDistance = sample.distance(ref) * 1.1;\n        let distance    = centerDistance + refDistance;\n        if (distance < minDistance) {\n          minDistance    = distance;\n          closestSamples = [{\n            sample,\n            refDistance\n          }];\n        } else if (distance < minDistance + 1) {\n          closestSamples.push({\n            sample,\n            refDistance\n          });\n        }\n      }\n\n      closestSamples.sort((a, b) => a.refDistance - b.refDistance);\n      spot = closestSamples[0].sample;\n    }\n\n    return spot;\n  }\n}\n\nfunction getLastVElement(elem) {\n\n  let vel = vector.isVElement(elem) ? elem : createVElement(elem);\n\n  return utils.isArray(vel) ? vel[vel.length - 1] : vel;\n}\n\nfunction eachElem(elem, iterator, context) {\n\n  if (elem) {\n    let vel = utils.map(utils.isArray(elem) ? elem : [elem], (item) => {\n      if (vector.isVElement(item)) {\n        return item;\n      }\n      return createVElement(elem);\n    });\n\n    utils.forEach(vel, iterator, context);\n  }\n}\n\nfunction vectorize(node) {\n  return new VElement(node);\n}\n\nfunction normalize(elem) {\n  return elem instanceof VElement ? elem.node : elem;\n}\n\nfunction createVElement(elem, attrs, children) {\n\n  if (!elem) {\n    return null;\n  }\n\n  if (elem instanceof VElement) {\n    elem = elem.node;\n  }\n\n  if (utils.isString(elem)) {\n\n    elem = utils.trim(elem);\n\n    if (elem.toLowerCase() === 'svg') {\n      // create a new SVG canvas\n      elem = utils.createSvgDocument();\n\n    } else if (elem[0] === '<') {\n\n      // Create element from an SVG string.\n      let svgDoc = utils.createSvgDocument(elem);\n      if (svgDoc.childNodes.length > 1) {\n        return utils.map(svgDoc.childNodes, childNode =>\n          vectorize(document.importNode(childNode, true))\n        );\n      }\n\n      elem = document.importNode(svgDoc.firstChild, true);\n    } else {\n      // create svg node by tagName.\n      elem = utils.createSvgElement(elem);\n    }\n  }\n\n  let vel = vectorize(elem);\n\n  // set attributes.\n  attrs && vel.setAttrs(attrs);\n\n  // append children.\n  children && vel.append(children);\n\n  return vel;\n}\n\n\n// vector\n// ------\n\nconst vector = VElement.create = createVElement;\nconst svgDocument = createVElement('svg').node;\n\n\nutils.extend(vector, {\n\n  isVElement(obj) {\n\n    return obj instanceof VElement;\n  },\n\n  createSVGPoint(x, y) {\n\n    let point = svgDocument.createSVGPoint();\n\n    point.x = x;\n    point.y = y;\n\n    return point;\n  },\n\n  createSVGMatrix(matrix) {\n\n    let svgMatrix = svgDocument.createSVGMatrix();\n\n    /* eslint guard-for-in: 0 */\n    for (let key in matrix) {\n      svgMatrix[key] = matrix[key];\n    }\n\n    return svgMatrix;\n  },\n\n  createSVGTransform(matrix) {\n\n    if (!utils.isUndefined(matrix)) {\n\n      if (!(matrix instanceof SVGMatrix)) {\n        matrix = vector.createSVGMatrix(matrix);\n      }\n      return svgDocument.createSVGTransformFromMatrix(matrix);\n    }\n\n    return svgDocument.createSVGTransform();\n  },\n\n  transformRect(rect, matrix) {\n\n    let point = svgDocument.createSVGPoint();\n\n    point.x = rect.x;\n    point.y = rect.y;\n\n    let corner1 = point.matrixTransform(matrix);\n\n\n    point.x = rect.x + rect.width;\n    point.y = rect.y;\n\n    let corner2 = point.matrixTransform(matrix);\n\n\n    point.x = rect.x + rect.width;\n    point.y = rect.y + rect.height;\n\n    let corner3 = point.matrixTransform(matrix);\n\n\n    point.x = rect.x;\n    point.y = rect.y + rect.height;\n\n    let corner4 = point.matrixTransform(matrix);\n\n\n    let minX = Math.min(corner1.x, corner2.x, corner3.x, corner4.x);\n    let maxX = Math.max(corner1.x, corner2.x, corner3.x, corner4.x);\n    let minY = Math.min(corner1.y, corner2.y, corner3.y, corner4.y);\n    let maxY = Math.max(corner1.y, corner2.y, corner3.y, corner4.y);\n\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  },\n\n  annotations(t, annotations, options) {\n\n    annotations = annotations || [];\n    annotations = utils.isArray(annotations) ? annotations : [annotations];\n    options     = options || {};\n\n    let compacted = [];\n    let ret       = [];\n    let offset    = options.offset || 0;\n    let batch;\n    let item;\n    let prev;\n\n    for (let i = 0, l = t.length; i < l; i += 1) {\n\n      item = ret[i] = t[i];\n\n      for (let j = 0, k = annotations.length; j < k; j += 1) {\n\n        let annotation = annotations[j];\n        let start      = annotation.start + offset;\n        let end        = annotation.end + offset;\n\n        if (i >= start && i < end) {\n          // Annotation applies.\n          if (utils.isObject(item)) {\n            // There is more than one annotation to be applied => Merge attributes.\n            item.attrs = utils.merge({}, item.attrs, annotation.attrs);\n          } else {\n            item = ret[i] = {\n              t: t[i],\n              attrs: annotation.attrs\n            };\n          }\n          if (options.includeAnnotationIndices) {\n\n            if (!item.annotations) {\n              item.annotations = [];\n            }\n\n            item.annotations.push(j);\n          }\n        }\n      }\n\n      prev = ret[i - 1];\n\n      if (!prev) {\n\n        batch = item;\n\n      } else if (utils.isObject(item) && utils.isObject(prev)) {\n        // Both previous item and the current one are annotations. If the attributes\n        // didn't change, merge the text.\n        if (JSON.stringify(item.attrs) === JSON.stringify(prev.attrs)) {\n          batch.t += item.t;\n        } else {\n          compacted.push(batch);\n          batch = item;\n        }\n\n      } else if (utils.isObject(item)) {\n        // Previous item was a string, current item is an annotation.\n        compacted.push(batch);\n        batch = item;\n\n      } else if (utils.isObject(prev)) {\n        // Previous item was an annotation, current item is a string.\n        compacted.push(batch);\n        batch = item;\n\n      } else {\n        // Both previous and current item are strings.\n        batch = (batch || '') + item;\n      }\n    }\n\n    if (batch) {\n      compacted.push(batch);\n    }\n\n    return compacted;\n  }\n});\n\n\n// exports\n// -------\n\nexport default vector;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/common/vector.js\n **/","import  Rect from './Rect';\nimport Point from './Point';\n\nclass Ellipse {\n\n  constructor(x = 0, y = 0, a = 0, b = 0) {\n\n    this.x = x;\n    this.y = y;\n    this.a = a;\n    this.b = b;\n  }\n\n\n  // statics\n  // -------\n\n  static equals(e1, e2) {\n\n    return this.isEllipse(e1)\n      && this.isEllipse(e2)\n      && e1.x === e2.x\n      && e1.y === e2.y\n      && e1.a === e2.a\n      && e1.b === e2.b;\n  }\n\n  static fromEllipse(e) {\n\n    return new Ellipse(e.x, e.y, e.a, e.b);\n  }\n\n  static isEllipse(e) {\n\n    return e && e instanceof Ellipse;\n  }\n\n\n  // methods\n  // -------\n\n  getCenter() {\n\n    return new Point(this.x, this.y);\n  }\n\n  getBBox() {\n\n    return new Rect(this.x - this.a, this.y - this.b, 2 * this.a, 2 * this.b);\n  }\n\n  grow(amount) {\n\n    this.a += amount;\n    this.b += amount;\n\n    return this;\n  }\n\n  intersectionWithLineFromCenterToPoint(point, angle) {\n\n    // Find point on me where line from my center to `point` intersects with\n    // my boundary.\n    // If angle is specified, intersection with rotated ellipse is computed.\n\n    let result;\n    let center = this.getCenter();\n\n    if (angle) {\n      point.rotate(center, angle);\n    }\n\n    let dx = point.x - this.x;\n    let dy = point.y - this.y;\n    if (dx === 0) {\n\n      result = this.getBBox().getNearestPointToPoint(point);\n\n      if (angle) {\n        return result.rotate(center, -angle);\n      }\n\n      return result;\n    }\n\n    let m  = dy / dx;\n    let mm = m * m;\n    let aa = this.a * this.a;\n    let bb = this.b * this.b;\n    let x  = Math.sqrt(1 / ((1 / aa) + (mm / bb)));\n\n    x = dx < 0 ? -x : x;\n\n    let y = m * x;\n\n    result = new Point(this.x + x, this.y + y);\n\n    if (angle) {\n      return result.rotate(center, -angle);\n    }\n\n    return result;\n  }\n\n\n  // common\n  // ------\n\n  equals(ellipse) {\n\n    return Ellipse.equals(this, ellipse);\n  }\n\n  valueOf() {\n\n    return [this.x, this.y, this.a, this.b];\n  }\n\n  toString() {\n\n    return this.valueOf().join(', ');\n  }\n\n  clone() {\n\n    return Ellipse.fromEllipse(this);\n  }\n}\n\n\n// exports\n// -------\n\nexport default Ellipse;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Ellipse.js\n **/","import * as utils from '../common/utils';\nimport VectorView from '../views/VectorView';\n\n\nclass NodeView extends VectorView {\n\n  static get specialAttributes() {\n\n    return [\n      'text',\n      'html',\n      'style',\n      'ref',\n      'ref-x',\n      'ref-y',\n      'ref-dx',\n      'ref-dy',\n      'ref-width',\n      'ref-height',\n      'x-alignment',\n      'y-alignment',\n      // 'port'\n    ];\n  }\n\n  render() {\n\n    this.vel.empty();\n    this.renderMarkup();\n\n    this.scalableNode  = this.findOne('.pane-scalable');\n    this.rotatableNode = this.findOne('.pane-rotatable');\n\n    return this\n      .update()\n      .resize()\n      .rotate()\n      .translate();\n  }\n\n  update(specifiedAttrs) {\n\n    // process the `attrs` object and set attributes\n    // on sub elements based on the selectors.\n\n    let allAttrs  = this.cell.attrs;\n    let rotatable = this.rotatableNode;\n    let rotation;\n\n    if (rotatable) {\n      rotation = rotatable.attr('transform');\n      rotatable.attr('transform', '');\n    }\n\n    let nodesMap  = {};\n    let relatives = [];\n\n    utils.forIn(specifiedAttrs || allAttrs, (attrs, selector) => {\n\n      let vels = this.find(selector);\n      if (!vels.length) {\n        return;\n      }\n\n      nodesMap[selector] = vels;\n\n      let specials = NodeView.specialAttributes.slice();\n\n      // filter\n      if (utils.isObject(attrs.filter)) {\n        specials.push('filter');\n        this.applyFilter(vels, attrs.filter);\n      }\n\n      // gradient\n      if (utils.isObject(attrs.fill)) {\n        specials.push('fill');\n        this.applyGradient(vels, 'fill', attrs.fill);\n      }\n\n      // gradient\n      if (utils.isObject(attrs.stroke)) {\n        specials.push('stroke');\n        this.applyGradient(vels, 'stroke', attrs.stroke);\n      }\n\n      // text\n      if (!utils.isNil(attrs.text)) {\n        specials.push('lineHeight', 'textPath', 'annotations');\n        utils.forEach(vels, (vel) => {\n          vel.text(attrs.text, {\n            textPath: attrs.textPath,\n            lineHeight: attrs.lineHeight,\n            annotations: attrs.annotations\n          });\n        });\n      }\n\n\n      let normal = {};\n\n      utils.forIn(attrs, (value, key) => {\n        if (!utils.contains(specials, key)) {\n          normal[key] = value;\n        }\n      });\n\n      if (!utils.isEmptyObject(normal)) {\n        // set regular attributes\n        utils.forEach(vels, (vel) => {\n          vel.attr(normal);\n        });\n      }\n\n      // `port` attribute contains the `id` of the port\n      // that the underlying magnet represents.\n      // if (attrs.port) {\n      //    forEach(vels, function (vel) {\n      //        vel.attr('port', isUndefined(attrs.port.id) ? attrs.port : attrs.port.id);\n      //    });\n      // }\n\n      // TODO: vel.css()\n\n      // if (attrs.style) {\n      //    forEach(vels, function (vel) {\n      //        vel.css(attrs.style);\n      //    });\n      // }\n\n      // html\n      if (!utils.isNil(attrs.html)) {\n        utils.forEach(vels, (vel) => {\n          vel.node.innerHTML = attrs.html;\n        });\n      }\n\n\n      // Special `ref-x` and `ref-y` attributes make it possible to\n      // set both absolute or relative positioning of sub elements.\n      let isRelative = utils.some([\n        'ref-x',\n        'ref-y',\n        'ref-dx',\n        'ref-dy',\n        'x-alignment',\n        'y-alignment',\n        'ref-width',\n        'ref-height'\n      ], key => !utils.isNil(attrs[key]));\n\n      if (isRelative) {\n        relatives.push(selector);\n      }\n    });\n\n\n    // Note that we're using the bounding box without transformation\n    // because we are already inside a transformed coordinate system.\n    let size = this.cell.size;\n    let bbox = {\n      x: 0,\n      y: 0,\n      width: size.width,\n      height: size.height\n    };\n\n    utils.forEach(relatives, (selector) => {\n\n      let attrs     = allAttrs[selector];\n      let specified = specifiedAttrs && specifiedAttrs[selector];\n      if (specified) {\n        attrs = utils.merge({}, attrs, specified);\n      }\n\n      utils.forEach(nodesMap[selector], (vel) => {\n        this.positionRelative(vel, bbox, attrs, nodesMap);\n      });\n\n    });\n\n    if (rotatable) {\n      rotatable.attr('transform', rotation || '');\n    }\n\n    return this;\n  }\n\n  positionRelative(vel, bbox, attrs, nodeMapping) {\n\n    let ref = attrs.ref;\n\n    // `ref` is the selector of the reference element.\n    // If no `ref` specified, reference element is the root element.\n    if (ref) {\n\n      let refVel = nodeMapping && nodeMapping[ref];\n      if (refVel) {\n        refVel = refVel[0];\n      } else {\n        refVel = ref === '.' ? this.vel : this.vel.findOne(ref);\n      }\n\n      if (!refVel) {\n        throw new Error('NodeView: reference does not exists.');\n      }\n\n      // Get the bounding box of the reference element\n      // relative to the root `<g>` element.\n      bbox = refVel.getBBox(false, this.elem);\n    }\n\n    let refDx = utils.toFloat(attrs['ref-dx']);\n    let refDy = utils.toFloat(attrs['ref-dy']);\n\n    let yAlign = attrs['y-alignment'];\n    let xAlign = attrs['x-alignment'];\n\n    // 'ref-y', 'ref-x', 'ref-width', 'ref-height' can be\n    // defined by value or by percentage e.g 4, 0.5, '200%'.\n\n    let refX        = attrs['ref-x'];\n    let xPercentage = utils.isPercentage(refX);\n    refX            = utils.toFloat(refX, xPercentage);\n\n    let refY        = attrs['ref-y'];\n    let yPercentage = utils.isPercentage(refY);\n    refY            = utils.toFloat(refY, yPercentage);\n\n    let refWidth    = attrs['ref-width'];\n    let wPercentage = utils.isPercentage(refWidth);\n    refWidth        = utils.toFloat(refWidth, wPercentage);\n\n    let refHeight   = attrs['ref-height'];\n    let hPercentage = utils.isPercentage(refHeight);\n    refHeight       = utils.toFloat(refHeight, hPercentage);\n\n    // `ref-width` and `ref-height` defines the width and height\n    // of the sub element relatively to the reference element size.\n    if (utils.isFinite(refWidth)) {\n      if (wPercentage || refWidth >= 0 && refWidth <= 1) {\n        vel.attr('width', utils.toFixed(refWidth * bbox.width, 2));\n      } else {\n        vel.attr('width', Math.max(utils.toFixed(refWidth + bbox.width, 2), 0));\n      }\n    }\n\n    if (utils.isFinite(refHeight)) {\n      if (hPercentage || refHeight >= 0 && refHeight <= 1) {\n        vel.attr('height', utils.toFixed(refHeight * bbox.height, 2));\n      } else {\n        vel.attr('height', Math.max(utils.toFixed(refHeight + bbox.height, 2), 0));\n      }\n    }\n\n\n    // Check if the node is a descendant of the scalable group.\n    let scalableNode = vel.findParent('pane-scalable', this.elem);\n\n    // Remove the previous translate() from the transform attribute\n    // and translate the element relative to the bounding box following\n    // the `ref-x` and `ref-y` attributes.\n    let transformAttr = vel.attr('transform');\n    if (transformAttr) {\n      vel.attr('transform', utils.clearTranslate(transformAttr));\n    }\n\n    // The final translation of the sub element.\n    let tx = 0;\n    let ty = 0;\n    let scale;\n\n    // `ref-dx` and `ref-dy` define the offset of the sub element relative\n    // to the right and/or bottom coordinate of the reference element.\n    if (utils.isFinite(refDx)) {\n      if (scalableNode) {\n        scale = scalableNode.scale();\n        tx    = bbox.x + bbox.width + refDx / scale.sx;\n      } else {\n        tx = bbox.x + bbox.width + refDx;\n      }\n    }\n\n    if (utils.isFinite(refDy)) {\n      if (scalableNode) {\n        scale = scale || scalableNode.scale();\n        ty    = bbox.y + bbox.height + refDy / scale.sy;\n      } else {\n        ty = bbox.y + bbox.height + refDy;\n      }\n    }\n\n    if (utils.isFinite(refX)) {\n      if (xPercentage || refX > 0 && refX < 1) {\n        tx = bbox.x + bbox.width * refX;\n      } else if (scalableNode) {\n        scale = scale || scalableNode.scale();\n        tx    = bbox.x + refX / scale.sx;\n      } else {\n        tx = bbox.x + refX;\n      }\n    }\n\n    if (utils.isFinite(refY)) {\n      if (xPercentage || refY > 0 && refY < 1) {\n        ty = bbox.y + bbox.height * refY;\n      } else if (scalableNode) {\n        scale = scale || scalableNode.scale();\n        ty    = bbox.y + refY / scale.sy;\n      } else {\n        ty = bbox.y + refY;\n      }\n    }\n\n    if (!utils.isNil(yAlign) || !utils.isNil(xAlign)) {\n\n      let velBBox = vel.getBBox(false, this.getPane());\n\n      if (yAlign === 'middle') {\n        ty -= velBBox.height / 2;\n      } else if (utils.isFinite(yAlign)) {\n        ty += (yAlign > -1 && yAlign < 1) ? velBBox.height * yAlign : yAlign;\n      }\n\n      if (xAlign === 'middle') {\n        tx -= velBBox.width / 2;\n      } else if (utils.isFinite(xAlign)) {\n        tx += (xAlign > -1 && xAlign < 1) ? velBBox.width * xAlign : xAlign;\n      }\n    }\n\n    vel.translate(utils.toFixed(tx, 2), utils.toFixed(ty, 2));\n\n    return this;\n  }\n\n  scale(sx, sy) {\n    // Scale the whole `<g>` group.\n\n    this.vel.scale(sx, sy);\n\n    return this;\n  }\n\n  resize() {\n\n    if (!this.scalableNode) {\n      return this;\n    }\n\n    // get bbox without transform\n    let nativeBBox = this.scalableNode.getBBox(true);\n\n    // Make sure `scalableBBox.width` and `scalableBBox.height` are not\n    // zero which can happen if the element does not have any content.\n    // By making the width(height) 1, we prevent HTML errors of the type\n    // `scale(Infinity, Infinity)`.\n    let size = this.cell.getSize();\n\n    let sx = size.width / (nativeBBox.width || 1);\n    let sy = size.height / (nativeBBox.height || 1);\n\n    sx = utils.toFixed(sx, 2);\n    sy = utils.toFixed(sy, 2);\n\n    this.scalableNode.attr('transform', 'scale(' + sx + ',' + sy + ')');\n\n    // Update must always be called on non-rotated element. Otherwise,\n    // relative positioning would work with wrong (rotated) bounding boxes.\n    this.update();\n\n    return this;\n  }\n\n  rotate() {\n\n    if (this.rotatableNode) {\n\n      let size = this.cell.getSize();\n      let ox   = size.width / 2;\n      let oy   = size.height / 2;\n\n      this.rotatableNode.attr('transform', 'rotate(' + this.cell.getRotation() + ',' + ox + ',' + oy + ')');\n    }\n\n    return this;\n  }\n\n  translate() {\n\n    let position = this.cell.getPosition();\n    this.vel.attr('transform', 'translate(' + position.x + ',' + position.y + ')');\n\n    return this;\n  }\n\n  getBBox() {\n\n    return this.vel.getBBox();\n  }\n\n  getStrokeWidth() {\n\n    let vTarget = this.findOne('rect')\n      || this.findOne('path')\n      || this.findOne('circle')\n      || this.findOne('ellipse')\n      || this.findOne('polyline')\n      || this.findOne('polygon');\n\n    if (vTarget && vTarget.node) {\n\n      let strokeWidth = utils.getComputedStyle(vTarget.node, 'stroke-width');\n\n      return strokeWidth && utils.toFloat(strokeWidth) || 0;\n    }\n\n    return 0;\n  }\n\n  getStrokedBBox() {\n\n    let sw   = this.getStrokeWidth() - 1;\n    let bbox = this.getCell().getBBox();\n\n    return sw ? bbox.grow(sw / 2) : bbox;\n  }\n\n  getConnectionPointOnBorder() {\n\n    return null;\n  }\n}\n\n\n// exports\n// -------\n\nexport default NodeView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/NodeView.js\n **/","import * as utils from '../common/utils';\nimport     vector from '../common/vector';\nimport    filters from '../common/filters';\nimport   CellView from '../views/CellView';\n\n\nclass VectorView extends CellView {\n\n  ensureElement() {\n\n    this.vel = vector(this.cell.getTagName(), {\n      class: this.cell.getClassName()\n    });\n\n    this.elem = this.vel.node;\n\n    // attach cell's id to elem\n    this.elem.cellId = this.cell.id;\n\n    let pane = this.getPane();\n    if (pane) {\n      pane.appendChild(this.elem);\n    }\n\n    return this;\n  }\n\n  renderMarkup() {\n\n    // `markup` is rendered by default. Set the `markup` on model\n    // if the default markup is not desirable.\n\n    let markup = this.compileMarkup(this.cell.getMarkup(), this.cell.getRenderData());\n    if (markup) {\n      this.vel.append(vector(markup));\n    } else {\n      throw new Error('`markup` is missing while the default `render()` implementation is used.');\n    }\n\n    return this;\n  }\n\n  find(selector) {\n\n    return selector === '.' ? [this.vel] : this.vel.find(selector);\n  }\n\n  findOne(selector) {\n\n    return selector === '.' ? this.vel : this.vel.findOne(selector);\n  }\n\n  applyAttr(selector, attrs) {\n\n    if (attrs) {\n      utils.forEach(this.find(selector), (vel) => {\n        vel.attr(attrs);\n      });\n    }\n\n    return this;\n  }\n\n  applyFilter(selector, filter) {\n\n    // `selector` is a CSS selector or `'.'`.\n    // `filter` must be in the special filter format:\n    //   {\n    //      name: <name of the filter>,\n    //      args: { <arguments>, ... }\n    //   }\n    //\n    // example:\n    //   {\n    //      name: 'blur',\n    //      args: {\n    //        radius: 5\n    //      }\n    //   }\n\n    if (!filter) {\n      return this;\n    }\n\n    let name   = filter.name || '';\n    let args   = filter.args || {};\n    let attrs  = filter.attrs;\n    let render = filters[name];\n\n    if (!name || !render) {\n      throw new Error('Invalided filter: \"' + name + '\"');\n    }\n\n    let vels = utils.isString(selector) ? this.find(selector) : selector;\n    if (!vels.length) {\n      return this;\n    }\n\n\n    let svg  = this.paper.svg;\n    let hash = utils.hashCode(JSON.stringify(filter));\n    let id   = name + '-' + this.paper.id + '-' + hash;\n\n    // define filter\n    if (!svg.getElementById(id)) {\n\n      let vFilter = vector(render(args));\n      // Set the filter area to be 3x the bounding box of the cell\n      // and center the filter around the cell.\n      vFilter.attr({\n        filterUnits: 'objectBoundingBox',\n        x: -1,\n        y: -1,\n        width: 3,\n        height: 3\n      });\n\n      if (attrs) {\n        vFilter.attr(attrs);\n      }\n\n      vFilter.node.id = id;\n\n      vector(svg).getDefs().append(vFilter);\n    }\n\n    // apply filter\n    utils.forEach(vels, (vel) => {\n      vel.attr('filter', 'url(#' + id + ')');\n    });\n\n    return this;\n  }\n\n  applyGradient(selector, attrName, gradient) {\n\n    // `selector` is a CSS selector or `'.'`.\n    // `attrName` is either a `'fill'` or `'stroke'`.\n    // `gradient` must be in the special gradient format:\n    //   {\n    //     type: <linearGradient|radialGradient>,\n    //     stops: [ { offset: <offset>, color: <color> }, ... ]\n    //   }\n    //\n    // example:\n    //   {\n    //     type: 'linearGradient',\n    //     stops: [\n    //       {\n    //          offset: '10%',\n    //          color: 'green'\n    //       }, {\n    //          offset: '50%',\n    //          color: 'blue'\n    //       }\n    //     ]\n    //   }\n\n    if (!attrName || !gradient) {\n      return this;\n    }\n\n    let type  = gradient.type;\n    let stops = gradient.stops;\n    let attrs = gradient.attrs;\n\n    if (!type || !stops || !stops.length) {\n      return this;\n    }\n\n    let vels = utils.isString(selector) ? this.find(selector) : selector;\n    if (!vels.length) {\n      return this;\n    }\n\n    let svg = this.paper.svg;\n    let id  = type + '-' + this.paper.id + '-' + utils.hashCode(JSON.stringify(gradient));\n\n    // define gradient\n    if (!svg.getElementById(id)) {\n\n      let gradientStr = [\n        '<' + type + '>',\n        utils.map(stops, stop =>\n          '<stop offset=\"' + stop.offset + '\" stop-color=\"' + stop.color + '\" stop-opacity=\"' + (utils.isFinite(stop.opacity) ? stop.opacity : 1) + '\" />'\n        ).join(''),\n        '</' + type + '>'\n      ].join('');\n\n      let vGradient = vector(gradientStr);\n\n      if (attrs) {\n        vGradient.attr(attrs);\n      }\n\n      vGradient.node.id = id;\n      vector(svg).getDefs().append(vGradient);\n    }\n\n    // apply gradient\n    utils.forEach(vels, (vel) => {\n      vel.attr(attrName, 'url(#' + id + ')');\n    });\n\n    return this;\n  }\n\n  getBounds(elem) {\n\n    // fix `utils.getBounds` of elements in foreignObject.\n    if (elem) {\n\n      const doc = elem === document\n        ? elem\n        : elem.ownerDocument;\n\n      // get the bounds of the cell\n      let bounds = utils.getBounds(this.elem);\n      // get the offset relative to the cell's root element\n      let offset = utils.getOffsetUntil(elem, this.elem);\n\n      let paper = this.getPaper();\n      let scale = paper && paper.sx || 1;\n\n      // calc the bounds\n      let width  = (elem.offsetWidth || elem.clientWidth) * scale;\n      let height = (elem.offsetHeight || elem.clientHeight) * scale;\n      let left   = bounds.left + offset.left * scale;\n      let top    = bounds.top + offset.top * scale;\n      let right  = doc.body.clientWidth - width - left;\n      let bottom = doc.body.clientHeight - height - top;\n\n      return {\n        left,\n        top,\n        right,\n        bottom,\n        width,\n        height\n      };\n    }\n\n    return null;\n  }\n}\n\n\n// exports\n// -------\n\nexport default VectorView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/VectorView.js\n **/","import { isFinite, trim } from '../common/utils';\n\n\n// exports\n// -------\n\nexport default {\n\n  outline(args = {}) {\n\n    // `color`   ... outline color\n    // `width`   ... outline width\n    // `opacity` ... outline opacity\n    // `margin`  ... gap between outline and the element\n\n    let color   = args.color || 'blue';\n    let width   = isFinite(args.width) ? args.width : 1;\n    let margin  = isFinite(args.margin) ? args.margin : 2;\n    let opacity = isFinite(args.opacity) ? args.opacity : 1;\n\n    let innerRadius = margin;\n    let outerRadius = margin + width;\n\n    return trim(`\n      <filter>\n        <feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/>\n        <feMorphology in=\"SourceAlpha\" result=\"morphedOuter\" operator=\"dilate\" radius=\"${outerRadius}\" />\n        <feMorphology in=\"SourceAlpha\" result=\"morphedInner\" operator=\"dilate\" radius=\"${innerRadius}\" />\n        <feComposite result=\"morphedOuterColored\" in=\"colored\" in2=\"morphedOuter\" operator=\"in\"/>\n        <feComposite operator=\"xor\" in=\"morphedOuterColored\" in2=\"morphedInner\" result=\"outline\"/>\n        <feMerge>\n          <feMergeNode in=\"outline\"/>\n          <feMergeNode in=\"SourceGraphic\"/>\n        </feMerge>\n      </filter>\n    `);\n  },\n\n  highlight(args = {}) {\n\n    // `color`   ... color\n    // `blur`    ... blur\n    // `width`   ... width\n    // `opacity` ... opacity\n\n    let color   = args.color || 'red';\n    let blur    = isFinite(args.blur) ? args.blur : 0;\n    let width   = isFinite(args.width) ? args.width : 1;\n    let opacity = isFinite(args.opacity) ? args.opacity : 1;\n\n    return trim(`\n      <filter>\n        <feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/>\n        <feMorphology result=\"morphed\" in=\"SourceGraphic\" operator=\"dilate\" radius=\"${width}\"/>\n        <feComposite result=\"composed\" in=\"colored\" in2=\"morphed\" operator=\"in\"/>\n        <feGaussianBlur result=\"blured\" in=\"composed\" stdDeviation=\"${blur}\"/> \n        <feBlend in=\"SourceGraphic\" in2=\"blured\" mode=\"normal\"/>\n      </filter>\n    `);\n  },\n\n  blur(args = {}) {\n\n    // `x` ... horizontal blur\n    // `y` ... vertical blur (optional)\n\n    let x            = isFinite(args.x) ? args.x : 2;\n    let stdDeviation = isFinite(args.y) ? [x, args.y] : x;\n\n    return trim(`\n      <filter>\n        <feGaussianBlur stdDeviation=\"${stdDeviation}\"/>\n      </filter>\n    `);\n  },\n\n  dropShadow(args = {}) {\n\n    // `dx`      ... horizontal shift\n    // `dy`      ... vertical shift\n    // `blur`    ... blur\n    // `color`   ... color\n    // `opacity` ... opacity\n\n    let dx      = args.dx || 0;\n    let dy      = args.dy || 0;\n    let color   = args.color || 'black';\n    let blur    = isFinite(args.blur) ? args.blur : 4;\n    let opacity = isFinite(args.opacity) ? args.opacity : 1;\n\n    let template = 'SVGFEDropShadowElement' in window\n      ? `<filter>\n           <feDropShadow stdDeviation=\"${blur}\" dx=\"${dx}\" dy=\"${dy}\" flood-color=\"${color}\" flood-opacity=\"${opacity}\" />\n         </filter>`\n      : `<filter>\n           <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"${blur}\" />\n           <feOffset dx=\"${dx}\" dy=\"${dy}\" result=\"offsetblur\" />\n           <feFlood flood-color=\"${color}\" />\n           <feComposite in2=\"offsetblur\" operator=\"in\" />\n           <feComponentTransfer>\n             <feFuncA type=\"linear\" slope=\"${opacity}\" />\n           </feComponentTransfer>\n           <feMerge>\n             <feMergeNode/>\n             <feMergeNode in=\"SourceGraphic\"/>\n           </feMerge>\n         </filter>`;\n\n    return trim(template);\n  },\n\n  grayScale(args = {}) {\n\n    // `amount` ... the proportion of the conversion.\n    // A value of 1 is completely grayscale.\n    // A value of 0 leaves the input unchanged.\n\n    let amount = isFinite(args.amount) ? args.amount : 1;\n\n    let a = 0.2126 + 0.7874 * (1 - amount);\n    let b = 0.7152 - 0.7152 * (1 - amount);\n    let c = 0.0722 - 0.0722 * (1 - amount);\n    let d = 0.2126 - 0.2126 * (1 - amount);\n    let e = 0.7152 + 0.2848 * (1 - amount);\n    let f = 0.0722 - 0.0722 * (1 - amount);\n    let g = 0.2126 - 0.2126 * (1 - amount);\n    let h = 0.0722 + 0.9278 * (1 - amount);\n\n    return trim(`\n      <filter>\n        <feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0\"/>\n      </filter>\n    `);\n  },\n\n  sepia(args = {}) {\n\n    // `amount` ... the proportion of the conversion.\n    // A value of 1 is completely sepia.\n    // A value of 0 leaves the input unchanged.\n\n    let amount = isFinite(args.amount) ? args.amount : 1;\n\n    let a = 0.393 + 0.607 * (1 - amount);\n    let b = 0.769 - 0.769 * (1 - amount);\n    let c = 0.189 - 0.189 * (1 - amount);\n    let d = 0.349 - 0.349 * (1 - amount);\n    let e = 0.686 + 0.314 * (1 - amount);\n    let f = 0.168 - 0.168 * (1 - amount);\n    let g = 0.272 - 0.272 * (1 - amount);\n    let h = 0.534 - 0.534 * (1 - amount);\n    let i = 0.131 + 0.869 * (1 - amount);\n\n    return trim(`\n      <filter>\n        <feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0\"/>\n      </filter>\n    `);\n  },\n\n  saturate(args = {}) {\n\n    // `amount` ... the proportion of the conversion.\n    // A value of 0 is completely un-saturated.\n    // A value of 1 leaves the input unchanged.\n\n    let amount = isFinite(args.amount) ? args.amount : 1;\n\n    return trim(`\n      <filter>\n        <feColorMatrix type=\"saturate\" values=\"${1 - amount}\"/>\n      </filter>\n    `);\n  },\n\n  hueRotate(args = {}) {\n\n    // `angle` ...  the number of degrees around the color\n    // circle the input samples will be adjusted.\n\n    let angle = args.angle || 0;\n\n    return trim(`\n      <filter>\n        <feColorMatrix type=\"hueRotate\" values=\"${angle}\"/>\n      </filter>\n    `);\n  },\n\n  invert(args = {}) {\n\n    // `amount` ... the proportion of the conversion.\n    // A value of 1 is completely inverted.\n    // A value of 0 leaves the input unchanged.\n\n    let amount  = isFinite(args.amount) ? args.amount : 1;\n    let amount2 = 1 - amount;\n\n    return trim(`\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n          <feFuncG type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n          <feFuncB type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n        </feComponentTransfer>\n      </filter>\n    `);\n  },\n\n  brightness(args = {}) {\n\n    // `amount` ... proportion of the conversion.\n    // A value of 0 will create an image that is completely black.\n    // A value of 1 leaves the input unchanged.\n\n    let amount = isFinite(args.amount) ? args.amount : 1;\n\n    return trim(`\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type=\"linear\" slope=\"${amount}\"/>\n          <feFuncG type=\"linear\" slope=\"${amount}\"/>\n          <feFuncB type=\"linear\" slope=\"${amount}\"/>\n        </feComponentTransfer>\n      </filter>\n    `);\n  },\n\n  contrast(args = {}) {\n\n    // `amount` ... proportion of the conversion.\n    // A value of 0 will create an image that is completely black.\n    // A value of 1 leaves the input unchanged.\n\n    let amount  = isFinite(args.amount) ? args.amount : 1;\n    let amount2 = 0.5 - amount / 2;\n\n    return trim(`\n      <filter>\n       <feComponentTransfer>\n          <feFuncR type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n          <feFuncG type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n          <feFuncB type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n        </feComponentTransfer>\n      </filter>\n    `);\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/common/filters.js\n **/","import * as utils from '../common/utils';\n\n\nclass CellView {\n\n  constructor(paper, cell) {\n\n    this.cell    = cell;\n    this.paper   = paper;\n    this.invalid = true;  // default need to be repainted\n\n    this.ensureElement();\n    this.setup();\n  }\n\n  ensureElement() { return this; }\n\n  setup() { return this; }\n\n  render() { return this; }\n\n  update() { return this; }\n\n  compileMarkup(markup, data) {\n\n    return utils.isFunction(markup)\n      ? markup(data)\n      : utils.format(markup, data);\n  }\n\n  getCell() {\n\n    return this.cell;\n  }\n\n  getPaper() {\n\n    return this.paper;\n  }\n\n  getModel() {\n\n    return this.paper && this.paper.getModel();\n  }\n\n  getPane() {\n\n    let result;\n\n    let pane = this.cell.metadata.pane;\n    if (pane) {\n      if (utils.isString(pane)) {\n        result = this.paper[pane];\n      } else if (utils.isNode(pane)) {\n        result = pane;\n      }\n    }\n\n    return result || this.paper.drawPane;\n  }\n\n  destroy() {\n\n    utils.removeElement(this.elem);\n    utils.destroy(this);\n  }\n}\n\n\n// exports\n// -------\n\nexport default CellView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/CellView.js\n **/","import Node from '../../cells/Node';\n\n\nclass Image extends Node {}\n\n\nImage.setDefaults({\n\n  markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><image/></g><text/></g>',\n\n  attrs: {\n    '.': {\n      fill: '#ffffff',\n      stroke: 'none'\n    },\n    'text': {\n      'font-size': 14,\n      'text': '',\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-dy': 20,\n      'y-alignment': 'middle',\n      'fill': '#000000',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n});\n\n\nexport default Image;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Image.js\n **/","import Node from '../../cells/Node';\n\n\nclass Circle extends Node {}\n\n\nCircle.setDefaults({\n\n  markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><circle/></g><text/></g>',\n\n  size: {\n    width: 60,\n    height: 60\n  },\n\n  attrs: {\n    '.': {\n      fill: '#ffffff',\n      stroke: 'none'\n    },\n    'circle': {\n      fill: '#ffffff',\n      stroke: '#000000',\n      r: 30,\n      cx: 30,\n      cy: 30\n    },\n    'text': {\n      'font-size': 14,\n      'text': '',\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-y': .5,\n      'y-alignment': 'middle',\n      'fill': '#000000',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n});\n\n\nexport default Circle;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Circle.js\n **/","import Path from './Path';\n\nclass Rhombus extends Path {}\n\nRhombus.setDefaults({\n\n  attrs: {\n    path: {\n      d: 'M 30 0 L 60 30 30 60 0 30 z'\n    },\n    text: {\n      'ref-y': 0.5,\n      'y-alignment': 'middle'\n    }\n  }\n});\n\nexport default Rhombus;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Rhombus.js\n **/","import Node from '../../cells/Node';\n\n\nclass Ellipse extends Node {}\n\n\nEllipse.setDefaults({\n\n  markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><ellipse/></g><text/></g>',\n\n  size: {\n    width: 60,\n    height: 40\n  },\n\n  attrs: {\n    '.': {\n      fill: '#ffffff',\n      stroke: 'none'\n    },\n    'ellipse': {\n      fill: '#ffffff',\n      stroke: '#000000',\n      rx: 30,\n      ry: 20,\n      cx: 30,\n      cy: 20\n    },\n    'text': {\n      'font-size': 14,\n      'text': '',\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-y': .5,\n      'y-alignment': 'middle',\n      'fill': '#000000',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n});\n\n\nexport default Ellipse;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Ellipse.js\n **/","import Node from '../../cells/Node';\n\nclass Polygon extends Node {}\n\nPolygon.setDefaults({\n\n  markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><polygon/></g><text/></g>',\n\n  size: {\n    width: 60,\n    height: 40\n  },\n\n  attrs: {\n    '.': {\n      fill: '#ffffff',\n      stroke: 'none'\n    },\n    'polyline': {\n      fill: '#ffffff',\n      stroke: '#000000'\n    },\n    'text': {\n      'font-size': 14,\n      'text': '',\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-dy': 20,\n      'y-alignment': 'middle',\n      'fill': '#000000',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n});\n\n\nexport default Polygon;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Polygon.js\n **/","import Node from '../../cells/Node';\n\nclass Polyline extends Node {}\n\nPolyline.setDefaults({\n\n  markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><polyline/></g><text/></g>',\n\n  size: {\n    width: 60,\n    height: 40\n  },\n\n  attrs: {\n    '.': {\n      fill: '#ffffff',\n      stroke: 'none'\n    },\n    'polyline': {\n      fill: '#ffffff',\n      stroke: '#000000'\n    },\n    'text': {\n      'font-size': 14,\n      'text': '',\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-dy': 20,\n      'y-alignment': 'middle',\n      'fill': '#000000',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n});\n\n\nexport default Polyline;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Polyline.js\n **/","import Node from '../../cells/Node';\n\nclass LabelLink extends Node {}\n\nLabelLink.setDefaults({\n  markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><rect/></g><a><text/></a></g>',\n  attrs: {\n    '.': {\n      fill: '#fff',\n      stroke: 'none'\n    },\n    'rect': {\n      'fill': '#fff',\n      'stroke': '#000',\n      'stroke-width': '1',\n      'width': 80,\n      'height': 30\n    },\n    'text': {\n      'fill': '#000',\n      'font-size': 12,\n      'ref-x': .5,\n      'ref-y': .5,\n      'text-anchor': 'middle',\n      'y-alignment': 'middle',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n});\n\n\nexport default LabelLink;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/LabelLink.js\n **/","import Node from '../../cells/Node';\n\nclass ElementLink extends Node {}\n\nElementLink.setDefaults({\n  markup: '<a><g class=\"pane-rotatable\"><g class=\"pane-scalable\"><rect/></g><text/></g></a>',\n  attrs: {\n    '.': {\n      fill: '#fff',\n      stroke: 'none'\n    },\n    'rect': {\n      'fill': '#fff',\n      'stroke': '#000',\n      'stroke-width': '1',\n      'width': 80,\n      'height': 30\n    },\n    'text': {\n      'fill': '#000',\n      'font-size': 12,\n      'ref-x': .5,\n      'ref-y': .5,\n      'text-anchor': 'middle',\n      'y-alignment': 'middle',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n});\n\n\nexport default ElementLink;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/ElementLink.js\n **/","import Change           from '../changes/Change';\nimport RootChange       from '../changes/RootChange';\nimport ChildChange      from '../changes/ChildChange';\nimport VisibleChange    from '../changes/VisibleChange';\nimport TerminalChange   from '../changes/TerminalChange';\nimport GeometryChange   from '../changes/GeometryChange';\nimport CollapseChange   from '../changes/CollapseChange';\nimport ChangeCollection from '../changes/ChangeCollection';\n\nconst changes = {\n  Change,\n  RootChange,\n  ChildChange,\n  VisibleChange,\n  TerminalChange,\n  GeometryChange,\n  CollapseChange,\n  ChangeCollection\n};\n\n\nexport {\n  changes\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/index.js\n **/","export default class Change {\n\n  // constructor() {\n  //\n  //   if (new.target === Change) {\n  //     throw new Error('`Change` is an abstract class that cannot be instantiated.');\n  //   }\n  // }\n\n  digest() {\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/Change.js\n **/","import Change from './Change';\n\nexport default class RootChange extends Change {\n\n  constructor(model, root) {\n\n    super();\n\n    this.model    = model;\n    this.root     = root;\n    this.previous = root;\n  }\n\n  digest() {\n\n    this.root     = this.previous;\n    this.previous = this.model.rootChanged(this.previous);\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/RootChange.js\n **/","import Change from './Change';\n\nexport default class ChildChange extends Change {\n\n  constructor(model, child, parent, index) {\n\n    super();\n\n    this.model  = model;\n    this.child  = child;\n    this.parent = parent;\n    this.index  = index;\n\n    this.previous      = parent;\n    this.previousIndex = index;\n  }\n\n  digest() {\n\n    let model = this.model;\n    let child = this.child;\n\n    let newParent = this.previous;\n    let newIndex  = this.previousIndex;\n\n    let oldParent = child.parent;\n    let oldIndex  = oldParent ? oldParent.indexOfChild(child) : 0;\n\n    // the new parent is null, then the child(and link) will be removed\n    if (!newParent) {\n      this.disConnect(child, false);\n    }\n\n    oldParent = model.childChanged(child, newParent, newIndex);\n\n    this.parent        = newParent;\n    this.index         = newIndex;\n    this.previous      = oldParent;\n    this.previousIndex = oldIndex;\n\n    return this;\n  }\n\n  disConnect(cell) {\n\n    if (cell.isLink()) {\n\n      let source = cell.getTerminal(true);\n      let target = cell.getTerminal(false);\n\n      if (source) {\n        this.model.terminalChanged(cell, null, true);\n      }\n\n      if (target) {\n        this.model.terminalChanged(cell, null, false);\n      }\n    }\n\n    cell.eachChild(function (child) {\n      this.disConnect(child);\n    }, this);\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/ChildChange.js\n **/","import Change from './Change';\n\nexport default class VisibleChange extends Change {\n\n  constructor(model, cell, visible) {\n\n    super();\n\n    this.model    = model;\n    this.cell     = cell;\n    this.visible  = visible;\n    this.previous = visible;\n  }\n\n  digest() {\n\n    this.visible  = this.previous;\n    this.previous = this.model.visibleChanged(this.cell, this.previous);\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/VisibleChange.js\n **/","import Change from './Change';\n\n\nexport default class TerminalChange extends Change {\n\n  constructor(model, link, terminal, isSource) {\n\n    super();\n\n    this.model    = model;\n    this.link     = link;\n    this.terminal = terminal;\n    this.previous = terminal;\n    this.isSource = isSource;\n  }\n\n  digest() {\n\n    this.terminal = this.previous;\n    this.previous = this.model.terminalChanged(this.link, this.terminal, this.isSource);\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/TerminalChange.js\n **/","import Change from './Change';\n\nexport default class GeometryChange extends Change {\n\n  constructor(model, cell, geometry) {\n\n    super();\n\n    this.model    = model;\n    this.cell     = cell;\n    this.geometry = geometry;\n    this.previous = geometry;\n\n  }\n\n  digest() {\n\n    this.geometry = this.previous;\n    this.previous = this.model.geometryChanged(this.cell, this.previous);\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/GeometryChange.js\n **/","import Change from './Change';\n\nexport default class CollapseChange extends Change {\n\n  constructor(model, cell, collapsed) {\n\n    super();\n\n    this.model     = model;\n    this.cell      = cell;\n    this.collapsed = collapsed;\n    this.previous  = collapsed;\n  }\n\n  digest() {\n\n    this.collapsed = this.previous;\n    this.previous  = this.model.collapseChanged(this.cell, this.previous);\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/CollapseChange.js\n **/","export default class ChangeCollection {\n\n  constructor(model) {\n\n    this.model   = model;\n    this.changes = [];\n  }\n\n  hasChange() {\n\n    return !!this.changes.length;\n  }\n\n  getChanges() {\n\n    return this.changes;\n  }\n\n  add(change) {\n\n    if (change) {\n      this.changes.push(change);\n    }\n\n    return this;\n  }\n\n  clear() {\n\n    this.changes = [];\n\n    return this;\n  }\n\n  notify() {\n\n    this.model.trigger('change', this.changes);\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/ChangeCollection.js\n **/","import Point   from './Point';\nimport Line    from './Line';\nimport Rect    from './Rect';\nimport Ellipse from './Ellipse';\nimport bezier  from './bezier';\n\nconst geometry = {\n  Point,\n  Line,\n  Rect,\n  Ellipse,\n  bezier\n};\n\nexport {\n  geometry\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/index.js\n **/","// import * as utils from '../common/utils';\nimport      Point from '../geometry/Point';\n// import Line  from '../geometry/Line';\n\nexport function curveThroughPoints(points) {\n\n  let controlPoints = getCurveControlPoints(points);\n  let path          = ['M', points[0].x, points[0].y];\n\n  for (let i = 0; i < controlPoints[0].length; i += 1) {\n    path.push('C',\n      controlPoints[0][i].x,\n      controlPoints[0][i].y,\n      controlPoints[1][i].x,\n      controlPoints[1][i].y,\n      points[i + 1].x,\n      points[i + 1].y\n    );\n  }\n  return path;\n}\n\nexport function getCurveControlPoints(knots) {\n\n  let firstControlPoints  = [];\n  let secondControlPoints = [];\n\n  let n = knots.length - 1;\n\n  // Special case: Bezier curve should be a straight line.\n  if (n === 1) {\n\n    // 3P1 = 2P0 + P3\n    firstControlPoints[0] = new Point(\n      (2 * knots[0].x + knots[1].x) / 3,\n      (2 * knots[0].y + knots[1].y) / 3\n    );\n\n    // P2 = 2P1 – P0\n    secondControlPoints[0] = new Point(\n      2 * firstControlPoints[0].x - knots[0].x,\n      2 * firstControlPoints[0].y - knots[0].y\n    );\n\n    return [firstControlPoints, secondControlPoints];\n  }\n\n  // Calculate first Bezier control points.\n  // Right hand side vector.\n  let rhs = [];\n\n  // Set right hand side X values.\n  for (let i = 1; i < n - 1; i += 1) {\n    rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;\n  }\n  rhs[0]     = knots[0].x + 2 * knots[1].x;\n  rhs[n - 1] = (8 * knots[n - 1].x + knots[n].x) / 2.0;\n\n  // Get first control points X-values.\n  let x = getFirstControlPoints(rhs);\n\n\n  // Set right hand side Y values.\n  for (let i = 1; i < n - 1; i += 1) {\n    rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;\n  }\n  rhs[0]     = knots[0].y + 2 * knots[1].y;\n  rhs[n - 1] = (8 * knots[n - 1].y + knots[n].y) / 2.0;\n\n  // Get first control points Y-values.\n  let y = getFirstControlPoints(rhs);\n\n  // Fill output arrays.\n  for (let i = 0; i < n; i += 1) {\n    // First control point.\n    firstControlPoints.push(new Point(x[i], y[i]));\n    // Second control point.\n    if (i < n - 1) {\n      secondControlPoints.push(new Point(\n        2 * knots[i + 1].x - x[i + 1],\n        2 * knots[i + 1].y - y[i + 1]));\n    } else {\n      secondControlPoints.push(new Point(\n        (knots[n].x + x[n - 1]) / 2,\n        (knots[n].y + y[n - 1]) / 2));\n    }\n  }\n\n  return [firstControlPoints, secondControlPoints];\n}\n\nfunction getFirstControlPoints(rhs) {\n\n  let n   = rhs.length;\n  // `x` is a solution vector.\n  let x   = [];\n  let tmp = [];\n  let b   = 2.0;\n\n  x[0] = rhs[0] / b;\n\n  // Decomposition and forward substitution.\n  for (let i = 1; i < n; i += 1) {\n    tmp[i] = 1 / b;\n    b      = (i < n - 1 ? 4.0 : 3.5) - tmp[i];\n    x[i]   = (rhs[i] - x[i - 1]) / b;\n  }\n\n  for (let i = 1; i < n; i += 1) {\n    // back substitution.\n    x[n - i - 1] -= tmp[n - i] * x[n - i];\n  }\n\n  return x;\n}\n\n/* FIXME not used\n function getInversionSolver(p0, p1, p2, p3) {\n let pts = arguments;\n\n function l(i, j) {\n // calculates a determinant 3x3\n // [p.x  p.y  1]\n // [pi.x pi.y 1]\n // [pj.x pj.y 1]\n let pi = pts[i];\n let pj = pts[j];\n return function (p) {\n let w = (i % 3 ? 3 : 1) * (j % 3 ? 3 : 1);\n let lij = p.x * (pi.y - pj.y) + p.y * (pj.x - pi.x) + pi.x * pj.y - pi.y * pj.x;\n return w * lij;\n };\n }\n\n return function solveInversion(p) {\n let ct = 3 * l(2, 3)(p1);\n let c1 = l(1, 3)(p0) / ct;\n let c2 = -l(2, 3)(p0) / ct;\n let la = c1 * l(3, 1)(p) + c2 * (l(3, 0)(p) + l(2, 1)(p)) + l(2, 0)(p);\n let lb = c1 * l(3, 0)(p) + c2 * l(2, 0)(p) + l(1, 0)(p);\n return lb / (lb - la);\n };\n }\n */\n\n/*\n function getCurveDivider(p0, p1, p2, p3) {\n\n // Divide a Bezier curve into two at point defined by value 't' <0,1>.\n // Using deCasteljau algorithm. http://math.stackexchange.com/a/317867\n // @param control points (start, control start, control end, end)\n // @return a function accepts t and returns 2 curves each defined by 4 control points.\n\n return function divideCurve(t) {\n let l = new Line(p0, p1).pointAt(t);\n let m = new Line(p1, p2).pointAt(t);\n let n = new Line(p2, p3).pointAt(t);\n let p = new Line(l, m).pointAt(t);\n let q = new Line(m, n).pointAt(t);\n let r = new Line(p, q).pointAt(t);\n\n return [{\n p0,\n p1: l,\n p2: p,\n p3: r\n }, {\n p0: r,\n p1: q,\n p2: n,\n p3\n }];\n };\n }\n */\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/bezier.js\n **/","import * as utils from '../common/utils';\n\n\nfunction triggerEvents(callbacks, args, context) {\n\n  let pass = true;\n\n  for (let i = 0, l = callbacks.length; i < l; i += 2) {\n    pass = utils.invoke(callbacks[i], args, callbacks[i + 1] || context) !== false && pass;\n  }\n\n  return pass;\n}\n\n\nclass Events {\n\n  on(events, callback, context) {\n\n    if (!callback) {\n      return this;\n    }\n\n    let listeners = this.__events || (this.__events = {});\n\n    utils.forEach(utils.split(events), (event) => {\n      let list = listeners[event] || (listeners[event] = []);\n      list.push(callback, context);\n    });\n\n    return this;\n  }\n\n  once(events, callback, context) {\n\n    let that = this;\n    let cb   = function (...args) {\n      that.off(events, cb);\n      callback.apply(context || that, args);\n    };\n\n    return this.on(events, cb, context);\n  }\n\n  off(events, callback, context) {\n\n    let listeners = this.__events;\n    if (!listeners) {\n      return this;\n    }\n\n    // removing *all* events.\n    if (!(events || callback || context)) {\n      delete this.__events;\n      return this;\n    }\n\n    events = events ? utils.split(events) : utils.keys(listeners);\n\n    utils.forEach(events, (event) => {\n\n      let list = listeners[event];\n      if (!list) {\n        return;\n      }\n\n      // remove all event.\n      if (!(callback || context)) {\n        delete listeners[event];\n        return;\n      }\n\n      for (let i = list.length - 2; i >= 0; i -= 2) {\n        if (!(callback && list[i] !== callback ||\n          context && list[i + 1] !== context)) {\n          list.splice(i, 2);\n        }\n      }\n    });\n\n    return this;\n  }\n\n  trigger(eventName, ...args) {\n\n    let listeners = this.__events;\n    if (!listeners || !eventName) {\n      return null;\n    }\n\n    let pass = true;\n    let all  = listeners['*'];\n\n    utils.forEach(utils.split(eventName), function (event) {\n\n      let callbacks;\n\n      if (event !== '*') {\n        callbacks = listeners[event];\n        if (callbacks) {\n          pass = triggerEvents(callbacks, args, this) && pass;\n        }\n      }\n\n      if (all) {\n        pass = triggerEvents(all, [event].concat(args), this) && pass;\n      }\n    }, this);\n\n    return pass;\n  }\n}\n\n\n// exports\n// -------\n\nexport default Events;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/common/Events.js\n **/","import * as utils from '../common/utils';\nimport Events     from '../common/Events';\nimport Cell       from '../cells/Cell';\nimport Terminal   from '../cells/Terminal';\n\nimport RootChange       from '../changes/RootChange';\nimport SizeChange       from '../changes/SizeChange';\nimport ChildChange      from '../changes/ChildChange';\nimport VisibleChange    from '../changes/VisibleChange';\nimport PositionChange   from '../changes/PositionChange';\nimport RotationChange   from '../changes/RotationChange';\nimport TerminalChange   from '../changes/TerminalChange';\nimport GeometryChange   from '../changes/GeometryChange';\nimport CollapseChange   from '../changes/CollapseChange';\nimport AttributeChange  from '../changes/AttributeChange';\nimport ChangeCollection from '../changes/ChangeCollection';\n\n\nclass Model extends Events {\n\n  constructor(root) {\n\n    super();\n\n    this.nextId       = 0;\n    this.updateLevel  = 0;\n    this.endingUpdate = false;\n\n    this.changes = new ChangeCollection(this);\n\n    if (root) {\n      this.setRoot(root);\n    } else {\n      this.clear();\n    }\n  }\n\n  clear() {\n\n    return this.setRoot(this.createRoot());\n  }\n\n  getDefaultParent() {\n\n    // the first layer\n    return this.getRoot().getChildAt(0);\n  }\n\n  isOrphan(cell) {\n\n    return cell && cell.isOrphan();\n  }\n\n  isAncestor(ancestor, descendant) {\n\n    return ancestor && ancestor.isAncestor(descendant);\n  }\n\n  contains(ancestor, descendant) {\n\n    if (!descendant) {\n      descendant = ancestor;\n      ancestor   = this.root;\n    }\n\n    return this.isAncestor(ancestor, descendant);\n  }\n\n  getAncestors(descendant) {\n\n    return descendant ? descendant.getAncestors() : [];\n  }\n\n  getDescendants(ancestor) {\n\n    return ancestor ? ancestor.getDescendants() : [];\n  }\n\n  getParents(/* cells */) {\n    /* FIXME\n     let parents = [];\n\n     if (cells) {\n\n     let hash = {};\n\n     forEach(cells, function (cell) {\n     let parent = cell.parent;\n\n     if (parent) {\n     let id = cellRoute.create(parent);\n\n     if (!hash[id]) {\n     hash[id] = parent;\n     parents.push(parent);\n     }\n     }\n     });\n     }\n\n     return parents;\n     */\n  }\n\n  getCellById(id) {\n\n    return this.cells ? this.cells[id] : null;\n  }\n\n  findCellAtPoint(localPoint) {\n\n    let result = [];\n\n    if (localPoint) {\n      this.eachCell((cell) => {\n        if (this.isNode(cell)) {\n          let rect = cell.getBBox();\n          if (rect && rect.containsPoint(localPoint)) {\n            result.push(cell);\n          }\n        }\n      });\n    }\n\n    return result;\n  }\n\n  findCellInArea(area) {\n\n    let result = [];\n\n    if (area) {\n      this.eachCell((cell) => {\n        if (this.isNode(cell)) {\n          let rect = cell.getBBox();\n          if (rect && area.containsRect(rect)) {\n            result.push(cell);\n          }\n        }\n      });\n    }\n\n    return result;\n  }\n\n  createCellId() {\n\n    let id = this.nextId;\n    this.nextId += 1;\n\n    return 'cell-' + id;\n  }\n\n\n  // root\n  // ----\n\n  isRoot(cell) {\n\n    return cell && this.root === cell;\n  }\n\n  createRoot() {\n\n    let root = new Cell();\n\n    root.insertChild(this.createLayer(), { silent: true });\n\n    return root;\n  }\n\n  getRoot(cell) {\n\n    let root = this.root;\n\n    while (cell) {\n      root = cell;\n      cell = cell.parent;\n    }\n\n    return root;\n  }\n\n  setRoot(root) {\n\n    return this.digest(new RootChange(this, root));\n  }\n\n  rootChanged(root) {\n\n    let prev = this.root;\n\n    this.root   = root;\n    this.cells  = null;\n    this.nextId = 0;\n    this.cellAdded(root);\n\n    return prev;\n  }\n\n\n  // Layers\n  // ------\n\n  isLayer(cell) {\n\n    return cell && this.isRoot(cell.parent);\n  }\n\n  getLayers() {\n\n    return this.getRoot().children || [];\n  }\n\n  createLayer() {\n\n    return new Cell();\n  }\n\n  eachLayer(iterator, context) {\n\n    return utils.forEach(this.getLayers(), iterator, context);\n  }\n\n\n  // cell\n  // ----\n\n  addNode(node, parent, index) {\n\n    return this.addCells([node], parent, index);\n  }\n\n  addLink(link, source, target, parent, index) {\n\n    return this.addCells([link], parent, index, source, target);\n  }\n\n  addCell(cell, parent, index, source, target) {\n\n    return this.addCells([cell], parent, index, source, target);\n  }\n\n  addCells(cells, parent, index, source, target) {\n\n    parent = parent || this.getDefaultParent();\n    index  = utils.fixIndex(index, parent.getChildCount());\n\n    this.beginUpdate();\n\n    try {\n      utils.forEach(cells, (child) => {\n        if (child) {\n          if (child !== parent) {\n            this.setParent(child, parent, index);\n            index += 1;\n          }\n\n          source && this.setTerminal(child, source, true);\n          target && this.setTerminal(child, target, false);\n        }\n      });\n\n    } finally {\n      this.endUpdate();\n    }\n\n    return this;\n  }\n\n  removeCell(cell) {\n\n    if (cell) {\n      if (this.isRoot(cell)) {\n        this.setRoot(null);\n      } else if (this.getParent(cell)) {\n        this.digest(new ChildChange(this, cell, null));\n      }\n    }\n\n    return cell;\n  }\n\n  getParent(child) {\n\n    return child ? child.parent : null;\n  }\n\n  setParent(child, parent, index) {\n\n    if (child) {\n      if (parent) {\n        try {\n          this.beginUpdate();\n          this.digest(new ChildChange(this, child, parent, index));\n        } finally {\n          this.endUpdate();\n        }\n      } else {\n        this.removeCell(child);\n      }\n    }\n    return this;\n  }\n\n  childChanged(child, parent, index) {\n\n    let previous = this.getParent(child);\n\n    if (parent) {\n      if (parent !== previous || previous.indexOfChild(child) !== index) {\n        // `insertChild` will firstly remove cell from previous parent\n        parent.insertChild(child, index, { silent: true });\n      }\n    } else if (previous) {\n      previous.removeChild(child, { silent: true });\n    }\n\n    if (parent) {\n      // check if the previous parent was already in the\n      // model and avoids calling cellAdded if it was.\n      if (!this.contains(previous)) {\n        this.cellAdded(child);\n      }\n    } else {\n      this.cellRemoved(child);\n    }\n\n    return previous;\n  }\n\n  // linkChanged(link, terminal, isSource) {\n  //\n  //    let prev = link.getTerminal(isSource);\n  //\n  //    if (terminal) {\n  //        terminal.addLink(link, isSource);\n  //    } else if (prev) {\n  //        prev.removeLink(link, isSource);\n  //    }\n  //\n  //    return prev;\n  // }\n\n  cellAdded(cell) {\n\n    // create an Id for the cell and map it\n\n    if (cell) {\n      // creates an Id for the cell if not Id exists\n      let id = cell.getId() || this.createCellId(cell);\n      if (id) {\n        let collision = this.getCellById(id);\n\n        if (collision !== cell) {\n          // creates new Id for the cell as long as there is a collision\n          while (collision) {\n            id        = this.createCellId(cell);\n            collision = this.getCellById(id);\n          }\n\n          // lazily creates the cells dictionary\n          if (!this.cells) {\n            this.cells = {};\n          }\n\n          cell.setId(id);\n          this.cells[id] = cell;\n        }\n      }\n\n      // makes sure IDs of deleted cells are not reused\n      if (utils.isNumeric(id)) {\n        this.nextId = Math.max(this.nextId, id);\n      }\n\n      cell.setModel(this);\n      // recursively processes child cells\n      cell.eachChild(this.cellAdded, this);\n    }\n  }\n\n  cellRemoved(cell) {\n\n    if (cell) {\n      cell.eachChild((child) => {\n        this.cellRemoved(child);\n      });\n\n      let id = cell.getId();\n      if (this.cells && id) {\n        delete this.cells[id];\n      }\n\n      cell.setModel(null);\n    }\n  }\n\n  updateLinkParents(cell, root) {\n\n    // Updates the parent for all links that are connected to node\n\n    root = root || this.getRoot(cell);\n\n    // update links on children first\n    cell.eachChild((child) => {\n      this.updateLinkParents(child, root);\n    });\n\n    // update the parents of all connected links\n    cell.eachLink((link) => {\n      // update edge parent if edge and child have\n      // a common root node (does not need to be the\n      // model root node)\n      if (this.isAncestor(root, link)) {\n        this.updateLinkParent(link, root);\n      }\n    });\n  }\n\n  updateLinkParent(link, root) {\n\n    let that   = this;\n    let cell   = null;\n    let source = link.getTerminal(true);\n    let target = link.getTerminal(false);\n\n    // use the first non-relative descendants of the source terminal\n    while (source && !source.isLink() && source.geometry && source.geometry.relative) {\n      source = source.parent;\n    }\n\n    // use the first non-relative descendants of the target terminal\n    while (target && !target.isLink() && target.geometry && target.geometry.relative) {\n      target = target.parent;\n    }\n\n    if (that.isAncestor(root, source) && that.isAncestor(root, target)) {\n\n      if (source === target) {\n        cell = source.parent;\n      } else {\n        cell = that.getNearestCommonAncestor(source, target);\n      }\n\n      if (cell &&\n        (cell.parent !== that.viewport || that.isAncestor(cell, link)) &&\n        link.parent !== cell) {\n\n        let geo = link.geometry;\n\n        if (geo) {\n          let origin1 = that.getOrigin(link.parent);\n          let origin2 = that.getOrigin(cell);\n\n          let dx = origin2.x - origin1.x;\n          let dy = origin2.y - origin1.y;\n\n          geo = geo.clone();\n          geo.translate(-dx, -dy);\n          that.setGeometry(link, geo);\n        }\n\n        that.add(cell, link);\n      }\n    }\n  }\n\n  getNearestCommonAncestor(/* cell1, cell2 */) {\n\n    /* FIXME\n     if (cell1 && cell2) {\n\n     let route1 = cellRoute.create(cell1);\n     let route2 = cellRoute.create(cell2);\n\n     if (route1 && route2) {\n\n     let cell = cell1;\n     let route = route2;\n     let current = route1;\n\n     if (route1.length > route2.length) {\n     cell = cell2;\n     route = route1;\n     current = route2;\n     }\n\n     while (cell) {\n     let parent = cell.parent;\n\n     // check if the cell path is equal to the beginning of the given cell path\n     if (route.indexOf(current + cellRoute.separator) === 0 && parent) {\n     return cell;\n     }\n\n     cell = parent;\n     current = cellRoute.getParentRoute(current);\n     }\n     }\n     }\n     */\n\n    return null;\n  }\n\n  eachCell(iterator, context) {\n\n    if (this.cells && iterator && utils.isFunction(iterator)) {\n      utils.forIn(this.cells, (cell, id) => {\n        iterator.call(context, cell, id);\n      });\n    }\n  }\n\n  filterCell(iterator, context) {\n\n    let result = [];\n\n    if (this.cells && iterator && utils.isFunction(iterator)) {\n      utils.forIn(this.cells, (cell, id) => {\n        if (iterator.call(context, cell, id)) {\n          result.push(cell);\n        }\n      });\n    }\n\n    return result;\n  }\n\n  eachNode(iterator, context) {\n\n    let nodes = this.filterCell(cell => this.isNode(cell), this);\n\n    return utils.forEach(nodes, iterator, context);\n  }\n\n  eachLink(iterator, context) {\n\n    let links = this.filterCell(cell => this.isLink(cell), this);\n\n    return utils.forEach(links, iterator, context);\n  }\n\n\n  // children\n  // --------\n\n  getChildNodes(parent) {\n\n    return this.getChildCells(parent, true, false);\n  }\n\n  getChildLinks(parent) {\n\n    return this.getChildCells(parent, false, true);\n  }\n\n  eachChildNode(parent, iterator, context) {\n\n    utils.forEach(this.getChildNodes(parent), iterator, context);\n  }\n\n  eachChildLink(parent, iterator, context) {\n\n    utils.forEach(this.getChildLinks(parent), iterator, context);\n  }\n\n  getChildCells(parent, isNode, isLink) {\n\n    if (parent) {\n      return parent.filterChild(child =>\n        (isNode && child.isNode()) || (isLink && child.isLink())\n      );\n    }\n\n    return [];\n  }\n\n  indexOfChild(cell, child) {\n\n    return cell ? cell.indexOfChild(child) : -1;\n  }\n\n  getChildAt(cell, index) {\n\n    return cell ? cell.getChildAt(index) : null;\n  }\n\n  getChildren(cell) {\n\n    return cell ? cell.children : null;\n  }\n\n  getChildCount(cell) {\n\n    return cell ? cell.getChildCount() : 0;\n  }\n\n\n  // node\n  // ----\n\n  isNode(cell) {\n\n    return cell ? cell.isNode() : false;\n  }\n\n  getLinkCount(cell) {\n\n    return cell ? cell.getLinkCount() : 0;\n  }\n\n  indexOfLink(cell, link) {\n\n    return cell ? cell.indexOfLink(link) : -1;\n  }\n\n  getLinkAt(cell, index) {\n\n    return cell ? cell.getLinkAt(index) : null;\n  }\n\n\n  // link\n  // ----\n\n  isLink(link) {\n\n    return link ? link.isLink() : false;\n  }\n\n  getTerminal(link, isSource) {\n\n    return link ? link.getTerminal(isSource) : null;\n  }\n\n  getTerminalNode(link, isSource) {\n\n    return link ? link.getTerminalNode(isSource) : null;\n  }\n\n  getTerminalPort(link, isSource) {\n\n    return link ? link.getTerminalPort(isSource) : null;\n  }\n\n  getTerminalPoint(link, isSource) {\n\n    return link ? link.getTerminalPoint(isSource) : null;\n  }\n\n  setTerminal(link, terminal, isSource) {\n\n    // fully replace the terminal\n\n    if (link) {\n      try {\n        this.beginUpdate();\n        this.digest(new TerminalChange(this, link, new Terminal(terminal), isSource));\n      } finally {\n        this.endUpdate();\n      }\n    }\n\n    return this;\n  }\n\n  setTerminalNode(link, node, isSource) {\n\n    if (link) {\n      this.setTerminal(link, node, isSource);\n    }\n\n    return this;\n  }\n\n  setTerminalPort(link, port, isSource) {\n\n    // partial replace the terminal port\n\n    if (link) {\n      let terminal = this.getTerminal(link, isSource);\n\n      terminal = terminal\n        ? terminal.duplicate({ port })\n        : new Terminal({ port });\n\n      this.setTerminal(link, terminal, isSource);\n    }\n\n    return this;\n  }\n\n  setTerminalPoint(link, point, isSource) {\n\n    if (link) {\n      this.setTerminal(link, point, isSource);\n    }\n\n    return this;\n  }\n\n  setTerminals(link, source, target) {\n\n    this.beginUpdate();\n\n    try {\n      this.setTerminal(link, source, true);\n      this.setTerminal(link, target, false);\n    } finally {\n      this.endUpdate();\n    }\n\n    return this;\n  }\n\n  removeFromTerminal(link, isSource) {\n\n    if (link) {\n      this.setTerminal(link, null, isSource);\n    }\n\n    return this;\n  }\n\n  terminalChanged(link, terminal, isSource) {\n\n    let prev = this.getTerminal(link, isSource);\n\n    if (terminal) {\n      terminal.addLink(link, isSource, { silent: true });\n    } else if (prev) {\n      prev.removeLink(link, isSource, { silent: true });\n    }\n\n    return prev;\n  }\n\n\n  // collapse\n  // --------\n\n  isCollapsed(cell) {\n\n    return cell ? cell.isCollapsed() : false;\n  }\n\n  setCollapsed(cell, collapsed) {\n\n    if (cell && collapsed !== this.isCollapsed(cell)) {\n      try {\n        this.beginUpdate();\n        this.digest(new CollapseChange(this, cell, collapsed));\n      } finally {\n        this.endUpdate();\n      }\n    }\n\n    return this;\n  }\n\n  collapseChanged(cell, collapsed) {\n\n    let previous = this.isCollapsed(cell);\n\n    cell.setCollapsed(collapsed, { silent: true });\n\n    return previous;\n  }\n\n\n  // visible\n  // -------\n\n  isVisible(cell) {\n\n    return cell ? cell.isVisible() : false;\n  }\n\n  setVisible(cell, visible) {\n\n    if (cell && visible !== this.isVisible(cell)) {\n      try {\n        this.beginUpdate();\n        this.digest(new VisibleChange(this, cell, visible));\n      } finally {\n        this.endUpdate();\n      }\n    }\n\n    return this;\n  }\n\n  visibleChanged(cell, visible) {\n\n    let previous = this.isVisible(cell);\n\n    cell.setVisible(visible, { silent: true });\n\n    return previous;\n  }\n\n\n  // attribute\n  // ---------\n\n  getAttribute(cell) {\n\n    return cell ? cell.getAttribute() : null;\n  }\n\n  setAttribute(cell, attrs) {\n\n    if (cell) {\n      try {\n        this.beginUpdate();\n        this.digest(new AttributeChange(this, cell, attrs));\n      } finally {\n        this.endUpdate();\n      }\n    }\n\n    return this;\n  }\n\n  attributeChanged(cell, attrs) {\n\n    let previous = this.getAttribute(cell);\n\n    cell.setAttribute(attrs, { silent: true });\n\n    return previous;\n  }\n\n\n  // geometry\n  // --------\n\n  getPosition(cell, raw) {\n\n    return cell ? cell.getPosition(raw) : null;\n  }\n\n  setPosition(cell, position) {\n\n    if (cell && position) {\n\n      let previous = cell.getPosition(true) || {};\n\n      position.relative = position.relative === true;\n      previous.relative = previous.relative === true;\n\n      if (previous.x !== position.x ||\n        previous.y !== position.y ||\n        previous.relative !== position.relative) {\n\n        try {\n          this.beginUpdate();\n          this.digest(new PositionChange(this, cell, {\n            x: position.x,\n            y: position.y,\n            relative: position.relative\n          }));\n        } finally {\n          this.endUpdate();\n        }\n      }\n    }\n\n    return this;\n  }\n\n  positionChanged(cell, position) {\n\n    let previous = cell.getPosition(true);\n\n    cell.setPosition(position, { silent: true });\n\n    return previous;\n  }\n\n  getSize(cell, raw) {\n\n    return cell ? cell.getSize(raw) : null;\n  }\n\n  setSize(cell, size) {\n\n    if (cell && size) {\n\n      let prev = cell.getSize(true) || {};\n\n      size.relative = size.relative === true;\n      prev.relative = prev.relative === true;\n\n      if (prev.width !== size.width ||\n        prev.height !== size.height ||\n        prev.relative !== size.relative) {\n\n        try {\n          this.beginUpdate();\n          this.digest(new SizeChange(this, cell, {\n            width: size.width,\n            height: size.height,\n            relative: size.relative\n          }));\n        } finally {\n          this.endUpdate();\n        }\n      }\n    }\n\n    return this;\n  }\n\n  sizeChanged(cell, size) {\n\n    let previous = cell.getSize(true);\n\n    cell.setSize(size, { silent: true });\n\n    return previous;\n  }\n\n  getRotation(cell, raw) {\n\n    return cell ? cell.getRotation(raw) : null;\n  }\n\n  setRotation(cell, rotation) {\n\n    if (cell && rotation) {\n\n      let previous = cell.getRotation(true) || {};\n\n      rotation.relative = rotation.relative === true;\n      previous.relative = previous.relative === true;\n\n      if (previous.angle !== rotation.angle ||\n        previous.relative !== rotation.relative) {\n\n        try {\n          this.beginUpdate();\n          this.digest(new RotationChange(this, cell, {\n            angle: rotation.angle,\n            relative: rotation.relative\n          }));\n        } finally {\n          this.endUpdate();\n        }\n      }\n    }\n\n    return this;\n  }\n\n  rotationChanged(cell, rotation) {\n\n    let previous = cell.getRotation(true);\n\n    cell.setRotation(rotation, { silent: true });\n\n    return previous;\n  }\n\n  getGeometry(cell, raw) {\n\n    return cell ? cell.getGeometry(raw) : null;\n  }\n\n  setGeometry(cell, geom) {\n\n    if (cell && geom) {\n      try {\n        this.beginUpdate();\n        this.digest(new GeometryChange(this, cell, geom));\n      } finally {\n        this.endUpdate();\n      }\n    }\n\n    return this;\n  }\n\n  geometryChanged(cell, geom) {\n\n    let previous = cell.getGeometry(true) || {};\n\n    utils.forEach(['size', 'position', 'rotation'], (key) => {\n      if (geom[key]) {\n        this[key + 'Changed'](cell, geom[key]);\n      }\n    });\n\n    return previous;\n  }\n\n\n  // update\n  // ------\n\n  digest(change) {\n\n    // take effect the change\n    change.digest();\n\n    this.beginUpdate();\n    this.changes.add(change);\n    this.endUpdate();\n\n    return this;\n  }\n\n  beginUpdate() {\n\n    this.updateLevel += 1;\n    this.trigger('beginUpdate');\n\n    if (this.updateLevel === 1) {\n      this.trigger('startEdit');\n    }\n  }\n\n  endUpdate() {\n\n    this.updateLevel -= 1;\n\n    if (this.updateLevel === 0) {\n      this.trigger('endEdit');\n    }\n\n    if (!this.endingUpdate) {\n\n      this.endingUpdate = this.updateLevel === 0;\n\n      let changes = this.changes;\n\n      this.trigger('endUpdate', changes.getChanges());\n\n      // TODO: 如果此时还没有和 paper 关联, 所有的 changes 都将失效, 还需要一种机制来管理\n      if (this.endingUpdate && changes.hasChange()) {\n        changes\n          .notify()\n          .clear();\n      }\n\n      this.endingUpdate = false;\n    }\n  }\n\n  isUpdated() {\n\n    return this.updateLevel === 0;\n  }\n\n  destroy() {\n\n    utils.destroy(this);\n  }\n}\n\n\n// exports\n// -------\n\nexport default Model;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/Model.js\n **/","import Change from './Change';\n\nexport default class SizeChange extends Change {\n\n  constructor(model, cell, size) {\n\n    super();\n\n    this.model    = model;\n    this.cell     = cell;\n    this.size     = size;\n    this.previous = size;\n  }\n\n  digest() {\n\n    this.size     = this.previous;\n    this.previous = this.model.sizeChanged(this.cell, this.previous);\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/SizeChange.js\n **/","import Change from './Change';\n\nexport default class PositionChange extends Change {\n\n  constructor(model, cell, position) {\n\n    super();\n\n    this.model    = model;\n    this.cell     = cell;\n    this.position = position;\n    this.previous = position;\n  }\n\n  digest() {\n\n    this.position = this.previous;\n    this.previous = this.model.positionChanged(this.cell, this.previous);\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/PositionChange.js\n **/","import Change from './Change';\n\nexport default class RotationChange extends Change {\n\n  constructor(model, cell, rotation) {\n\n    super();\n\n    this.model    = model;\n    this.cell     = cell;\n    this.rotation = rotation;\n    this.previous = rotation;\n  }\n\n  digest() {\n\n    this.position = this.previous;\n    this.previous = this.model.rotationChanged(this.cell, this.previous);\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/RotationChange.js\n **/","import Change from './Change';\n\n\nexport default class AttributeChange extends Change {\n\n  constructor(model, cell, attrs) {\n\n    super();\n\n    this.model    = model;\n    this.cell     = cell;\n    this.attrs    = attrs;\n    this.previous = attrs;\n  }\n\n  digest() {\n\n    this.attrs    = this.previous;\n    this.previous = this.model.attributeChanged(this.cell, this.previous);\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/AttributeChange.js\n **/","import * as utils from '../common/utils';\nimport vector     from '../common/vector';\nimport detector   from '../common/detector';\nimport Events     from '../common/Events';\nimport Rect       from '../geometry/Rect';\nimport Point      from '../geometry/Point';\n\nimport Model    from '../core/Model';\nimport Cell     from '../cells/Cell';\nimport LinkView from '../views/LinkView';\nimport NodeView from '../views/NodeView';\n\nimport RootChange      from '../changes/RootChange';\nimport ChildChange     from '../changes/ChildChange';\nimport SizeChange      from '../changes/SizeChange';\nimport VisibleChange   from '../changes/VisibleChange';\nimport PositionChange  from '../changes/PositionChange';\nimport RotationChange  from '../changes/RotationChange';\nimport TerminalChange  from '../changes/TerminalChange';\nimport GeometryChange  from '../changes/GeometryChange';\nimport CollapseChange  from '../changes/CollapseChange';\nimport AttributeChange from '../changes/AttributeChange';\n\n\n// const\n// -----\nconst win = window;\nconst doc = win.document;\n\nconst classNames = {\n  wrap: 'pane-wrap',\n  stage: 'pane-stage',\n  svg: 'pane-svg',\n  viewport: 'pane-viewport',\n  htmlPane: 'pane-html',\n  rawPane: 'pane-raw'\n};\n\n// the default options for paper\nconst defaultOptions = {\n  // container: null,\n  // model: null,\n  width: '100%',\n  height: '100%',\n  tx: 0,\n  ty: 0,\n  sx: 1,\n  sy: 1,\n  gridSize: 1,\n\n  // number of mouseMove events after which the\n  // pointerClick event will be still triggered.\n  clickThreshold: 0,\n  isValidEvent: null,\n  eventDelegate: null\n};\n\nlet idCounter = 0;\n\n\n// Paper\n// -----\n\nclass Paper extends Events {\n\n  constructor(options) {\n\n    super();\n\n    idCounter += 1;\n\n    this.id = 'paper-' + idCounter;\n\n    // You should call `init` manually when `options` is empty.\n    // That's useful when you want to listen life-cycle events.\n    if (options) {\n      this.init(options);\n    }\n  }\n\n\n  // events\n  // ------\n  //  - paper:configure\n  //  - paper:ensureElements\n  //  - paper:createPanes\n  //  - paper:setup\n  //  - paper:init\n  //  - paper:destroy\n  //  - paper:resize\n  //  - paper:scale\n  //  - paper:translate\n\n\n  configure(options) {\n\n    this.options = utils.merge({}, defaultOptions, options);\n    this.trigger('paper:configure', this.options);\n\n    return this;\n  }\n\n  init(options = {}) {\n\n    this.configure(options);\n    this.container = options.container;\n\n    if (!this.container) {\n      throw new Error('Initialize error: invalid container');\n    }\n\n    options = this.options;\n\n    this.ensureElement()\n      .createPanes()\n      .setup()\n      .resize(options.width, options.height)\n      .translate(options.tx, options.ty)\n      .scale(options.sx, options.sy)\n      .setModel(options.model);\n\n    this.trigger('paper:init', this.options);\n\n    return this;\n  }\n\n  ensureElement() {\n\n    this.wrap     = utils.createElement('div');\n    this.stage    = utils.createElement('div');\n    this.svg      = utils.createSvgDocument();\n    this.viewport = utils.createSvgElement('g');\n\n    utils.addClass(this.wrap, classNames.wrap);\n    utils.addClass(this.stage, classNames.stage);\n    utils.addClass(this.svg, classNames.svg);\n    utils.addClass(this.viewport, classNames.viewport);\n\n    this.svg.appendChild(this.viewport);\n    this.stage.appendChild(this.svg);\n    this.wrap.appendChild(this.stage);\n    this.container.appendChild(this.wrap);\n\n    this.trigger('paper:ensureElements');\n\n    return this;\n  }\n\n  getContainer() {\n\n    return this.container;\n  }\n\n  getWrap() {\n\n    return this.wrap;\n  }\n\n  getStage() {\n\n    return this.stage;\n  }\n\n  getSvg() {\n\n    return this.svg;\n  }\n\n  getViewport() {\n\n    return this.viewport;\n  }\n\n  getEventDelegate() {\n\n    let eventDelegate = this.eventDelegate;\n\n    if (!eventDelegate) {\n\n      eventDelegate = this.options.eventDelegate;\n\n      if (utils.isFunction(eventDelegate)) {\n        eventDelegate = eventDelegate.call(this);\n      }\n\n      this.eventDelegate = eventDelegate || this.getWrap();\n    }\n\n    return this.eventDelegate;\n  }\n\n  createPanes() {\n\n    const viewport = this.viewport;\n    const stage    = this.stage;\n\n    this.backgroundPane = viewport.appendChild(utils.createSvgElement('g'));\n\n    // container of links\n    this.linkPane = viewport.appendChild(utils.createSvgElement('g'));\n\n    // container of nodes\n    this.drawPane = viewport.appendChild(utils.createSvgElement('g'));\n\n    // layer above the drawing pane, for controllers and handlers\n    this.controlPane = viewport.appendChild(utils.createSvgElement('g'));\n\n    // layer above the drawing pane and controller pane, for decorators\n    this.decoratePane = viewport.appendChild(utils.createSvgElement('g'));\n\n    // html pane for hold html element, with scale and translation\n    this.htmlPane = stage.appendChild(utils.createElement('div'));\n\n    utils.addClass(this.htmlPane, classNames.htmlPane);\n\n    // whithout scale and translation\n    this.rawPane = stage.appendChild(utils.createElement('div'));\n\n    utils.addClass(this.rawPane, classNames.rawPane);\n\n    this.trigger('paper:createPanes');\n\n    return this;\n  }\n\n  setup() {\n\n    let delegate = this.getEventDelegate();\n\n    utils.addEventListener(delegate, 'contextmenu', this.onContextMenu.bind(this));\n    utils.addEventListener(delegate, 'dblclick', this.onDblClick.bind(this));\n    utils.addEventListener(delegate, 'click', this.onClick.bind(this));\n    utils.addEventListener(delegate, 'mouseenter', '.pane-cell', this.onCellMouseEnter.bind(this));\n    utils.addEventListener(delegate, 'mouseleave', '.pane-cell', this.onCellMouseLeave.bind(this));\n    utils.addEventListener(delegate, 'mouseover', '.pane-cell', this.onCellMouseOver.bind(this));\n    utils.addEventListener(delegate, 'mouseout', '.pane-cell', this.onCellMouseOut.bind(this));\n\n    // Chrome in windows8: `'ontouchstart' in document.documentElement` return `true`\n\n    // if (detector.IS_TOUCH) {\n    //   utils.addEventListener(delegate, 'touchstart', this.onPointerDown.bind(this));\n    // } else {\n    utils.addEventListener(delegate, 'mousedown', this.onPointerDown.bind(this));\n    // }\n\n    // Hold the value when mouse has been moved: when mouse moved,\n    // no click event will be triggered.\n    this.mouseMoved = 0;\n\n    // Disables built-in pan and zoom in IE10 and later\n    if (detector.IS_POINTER) {\n      this.container.style.msTouchAction = 'none';\n    }\n\n    this.trigger('paper:setup');\n\n    return this;\n  }\n\n  getModel() {\n\n    return this.model;\n  }\n\n  setModel(model = new Model()) {\n\n    // one model can be used in different papers\n\n    this.model = model;\n    this.model.on('change', this.handleChanges, this);\n\n    this.reValidate();\n\n    return this;\n  }\n\n  destroy() {\n\n    this.trigger('paper:destroy');\n\n    utils.removeElement(this.wrap);\n\n    if (detector.IS_POINTER) {\n      this.container.style.msTouchAction = '';\n    }\n\n    let model = this.getModel();\n    if (model && !model.destroyed) {\n      model.destroy();\n    }\n\n    utils.destroy(this);\n  }\n\n  registerHandlers(handlers) {\n\n    handlers = utils.isArray(handlers) ? handlers : [handlers];\n\n    this.handlers      = this.handlers || [];\n    this.handlerByName = this.handlerByName || {};\n\n    utils.forEach(handlers, function (handler) {\n      if (this.handlerByName[handler.name]) {\n        throw new Error('handler with name \"' + handler.name + '\" is already registered');\n      }\n      // handler = utils.isFunction(handler) ? new handler(that) : handler;\n      this.handlers.push(handler);\n      this.handlerByName[handler.name] = handler;\n    }, this);\n\n    return this;\n  }\n\n\n  // transform\n  // ---------\n\n  resize(width, height, relative) {\n\n    if (!utils.isNil(width) && !utils.isNil(height)) {\n\n      let isPercent = utils.isPercentage(width);\n      if (isPercent) {\n        width = utils.toFloat(width, true) * this.container.clientWidth;\n      }\n\n      isPercent = utils.isPercentage(height);\n      if (isPercent) {\n        height = utils.toFloat(height, true) * this.container.clientHeight;\n      }\n\n      if (relative) {\n        width += utils.isNil(this.width) ? 0 : this.width;\n        height += utils.isNil(this.height) ? 0 : this.height;\n      }\n\n      width  = Math.round(width);\n      height = Math.round(height);\n\n      vector(this.svg).attr({\n        width,\n        height\n      });\n\n      utils.setStyle(this.stage, {\n        width: width + 'px',\n        height: height + 'px'\n      });\n\n      this.width  = width;\n      this.height = height;\n\n      this.trigger('paper:resize', width, height);\n    }\n\n    return this;\n  }\n\n  resizeTo(width, height) {\n\n    return this.resize(width, height, false);\n  }\n\n  resizeBy(width, height) {\n\n    return this.resize(width, height, true);\n  }\n\n  translate(tx, ty, relative) {\n\n    if (!utils.isNil(tx) && !utils.isNil(ty)) {\n\n      if (relative) {\n        tx += utils.isNil(this.tx) || 0;\n        ty += utils.isNil(this.ty) || 0;\n      }\n\n      vector(this.viewport).translate(tx, ty);\n\n      // translate htmlPane\n      utils.setStyle(this.htmlPane, {\n        top: ty + 'px',\n        left: tx + 'px'\n      });\n\n      this.tx = tx;\n      this.ty = ty;\n\n      this.trigger('paper:translate', tx, ty);\n    }\n\n    return this;\n  }\n\n  translateTo(x, y) {\n\n    return this.translate(x, y, false);\n  }\n\n  translateBy(x, y) {\n\n    return this.translate(x, y, true);\n  }\n\n  scale(sx, sy, ox = 0, oy = 0) {\n\n    sy = sy || sx;\n\n    if (sx && sy) {\n\n      let vViewport = vector(this.viewport);\n\n      // remove previous transform so that the new scale is not affected\n      // by previous scales, especially the old translate() does not\n      // affect the new translate if an origin is specified.\n      vViewport.attr('transform', '');\n\n      let oldTx = this.tx;\n      let oldTy = this.ty;\n\n      if (ox || oy || oldTx || oldTy) {\n\n        let newTx = oldTx - ox * (sx - 1);\n        let newTy = oldTy - oy * (sy - 1);\n        this.translateTo(newTx, newTy);\n      }\n\n      vViewport.scale(sx, sy);\n      // scale htmlPane\n      utils.setStyle(this.htmlPane, {\n        transform: 'translate3d(0, 0, 0) scale3d(' + sx + ',' + sy + ', 1)'\n      });\n\n\n      this.sx = sx;\n      this.sy = sy;\n\n      this.trigger('paper:scale', sx, sy, ox, oy);\n    }\n\n    return this;\n  }\n\n  getContentBBox(withoutTransformations) {\n\n    if (withoutTransformations) {\n\n      return vector(this.viewport).getBBox(true, this.svg);\n    }\n\n    let rect = this.viewport.getBoundingClientRect();\n\n    // Using Screen CTM was the only way to get the real viewport\n    // bounding box working in both Google Chrome and Firefox.\n    let screenCTM = this.viewport.getScreenCTM();\n\n    // for non-default origin we need to take the\n    // viewport translation into account\n    let viewportCTM = this.viewport.getCTM();\n\n    return Rect.fromRect({\n      x: rect.left - screenCTM.e + viewportCTM.e,\n      y: rect.top - screenCTM.f + viewportCTM.f,\n      width: rect.width,\n      height: rect.height\n    });\n  }\n\n  fitToContent(frameWidth, frameHeight, padding, options) {\n\n    // Expand/shrink the paper to fit the content. Snap the width/height to\n    // the grid defined in `gridWidth`, `gridHeight`. `padding` adds to the\n    // resulting width/height of the paper.\n\n    if (utils.isObject(frameWidth)) {\n\n      options     = frameWidth;\n      padding     = options.padding || 0;\n      frameWidth  = options.frameWidth || 1;\n      frameHeight = options.frameHeight || 1;\n\n    } else {\n\n      options     = options || {};\n      padding     = padding || 0;\n      frameWidth  = frameWidth || 1;\n      frameHeight = frameHeight || 1;\n    }\n\n    padding = utils.normalizeSides(padding);\n\n    // get the content boundary\n    let cBounds = this.getContentBBox(true);\n\n    cBounds.x *= this.sx;\n    cBounds.y *= this.sy;\n    cBounds.width *= this.sx;\n    cBounds.height *= this.sy;\n\n    let width  = utils.snapToGrid(cBounds.width + cBounds.x || 1, frameWidth, 'ceil');\n    let height = utils.snapToGrid(cBounds.height + cBounds.y || 1, frameHeight, 'ceil');\n\n    let tx = this.tx;\n    let ty = this.ty;\n\n    function needTranslate(val) {\n\n      return !options.allowNewOrigin\n        || options.allowNewOrigin === 'any'\n        || (options.allowNewOrigin === 'negative' && val < 0)\n        || (options.allowNewOrigin === 'positive' && val >= 0);\n    }\n\n    if (needTranslate(cBounds.x)) {\n\n      tx = Math.ceil(-cBounds.x / frameWidth) * frameWidth;\n      tx += padding.left;\n      width += tx;\n    }\n\n    if (needTranslate(cBounds.y)) {\n\n      ty = Math.ceil(-cBounds.y / frameHeight) * frameHeight;\n      ty += padding.top;\n      height += ty;\n    }\n\n    width += padding.right;\n    height += padding.bottom;\n\n    width  = utils.clamp(width, options.minWidth || 0, options.maxWidth || Number.MAX_VALUE);\n    height = utils.clamp(height, options.minHeight || 0, options.maxHeight || Number.MAX_VALUE);\n\n    let sizeChanged   = width !== this.width || height !== this.height;\n    let originChanged = tx !== this.tx || ty !== this.ty;\n\n    if (originChanged) {\n      this.translate(tx, ty);\n    }\n\n    if (sizeChanged) {\n      this.resize(width, height);\n    }\n\n    return sizeChanged || originChanged;\n  }\n\n  scaleContentToFit(options = {}) {\n\n    let contentBBox = this.getContentBBox(true);\n\n    if (!contentBBox.width || !contentBBox.height) {\n      return this;\n    }\n\n    options = utils.merge({\n      padding: 0,\n      minScale: null,\n      maxScale: null,\n      scaleGrid: null,\n      preserveAspectRatio: true,\n      // minScaleX,\n      // minScaleY,\n      // maxScaleX,\n      // maxScaleY,\n      // fittingBBox\n    }, options);\n\n\n    let padding     = utils.normalizeSides(options.padding);\n    let fittingBBox = options.fittingBBox;\n\n    if (!fittingBBox) {\n      fittingBBox = {\n        x: this.tx,\n        y: this.ty,\n        width: this.width,\n        height: this.height\n      };\n    }\n\n    fittingBBox = Rect.fromRect(fittingBBox).moveAndExpand({\n      x: padding.left,\n      y: padding.top,\n      width: -(padding.left + padding.right),\n      height: -(padding.top + padding.bottom)\n    });\n\n\n    let sx = fittingBBox.width / contentBBox.width;\n    let sy = fittingBBox.height / contentBBox.height;\n\n    // snap scale to a grid\n    let scaleGrid = options.scaleGrid;\n    if (scaleGrid) {\n      sx = utils.snapToGrid(sx, scaleGrid, 'floor');\n      sy = utils.snapToGrid(sy, scaleGrid, 'floor');\n    }\n\n    // scale min/max boundaries\n    let minScaleX = options.minScaleX || options.minScale;\n    let maxScaleX = options.maxScaleX || options.maxScale;\n    let minScaleY = options.minScaleY || options.minScale;\n    let maxScaleY = options.maxScaleY || options.maxScale;\n\n    sx = utils.clamp(sx, minScaleX, maxScaleX);\n    sy = utils.clamp(sy, minScaleY, maxScaleY);\n\n    if (options.preserveAspectRatio) {\n      sx = sy = Math.min(sx, sy);\n    }\n\n    this.scale(sx, sy);\n\n    contentBBox = this.getContentBBox(true);\n\n    let tx = fittingBBox.x - contentBBox.x;\n    let ty = fittingBBox.y - contentBBox.y;\n\n    this.translateTo(tx, ty);\n\n    return this;\n  }\n\n\n  // validate\n  // --------\n\n  reValidate() {\n\n    return this\n      .invalidate()\n      .validate();\n  }\n\n  clear(cell = this.model.getRoot(), force = false, recurse = true) {\n\n    this.removeView(cell);\n\n    if (recurse && (force || cell !== this.currentRoot)) {\n      cell.eachChild(function (child) {\n        this.clear(child, force, recurse);\n      }, this);\n    } else {\n      this.invalidate(cell, true, true);\n    }\n\n    return this;\n  }\n\n  invalidate(cell = this.model.getRoot(), recurse = true, includeLink = true) {\n\n    let view = this.getView(cell);\n    if (view) {\n      view.invalid = true;\n    }\n\n    if (!cell.invalidating) {\n\n      cell.invalidating = true;\n\n      if (recurse) {\n        cell.eachChild(function (child) {\n          this.invalidate(child, recurse, includeLink);\n        }, this);\n      }\n\n      if (includeLink) {\n        cell.eachLink(function (link) {\n          this.invalidate(link, recurse, includeLink);\n        }, this);\n      }\n\n      cell.invalidating = false;\n    }\n\n    return this;\n  }\n\n  validate(cell = this.model.getRoot()) {\n\n    return this\n      .validateCell(cell)\n      .validateView(cell);\n  }\n\n  validateCell(cell, visible = true) {\n\n    // create or remove view for cell\n    if (cell) {\n\n      visible = visible && cell.isVisible();\n\n      let view = this.getView(cell, visible);\n      if (view && !visible) {\n        this.removeView(cell, false, false);\n      }\n\n      cell.eachChild(function (child) {\n        this.validateCell(child, visible);\n      }, this);\n    }\n\n    return this;\n  }\n\n  validateView(cell, recurse = true) {\n\n    if (cell) {\n\n      let view = this.getView(cell);\n      if (view) {\n        if (view.invalid) {\n          // geometry shoule be updated after the parent be validated\n          // for child node may has relative geometry\n          this.validateView(cell.getParent(), false)\n            .updateNodeGeometry(cell)\n            .renderView(cell);\n\n          view.invalid = false;\n        }\n      }\n\n      if (recurse) {\n        cell.eachChild(function (child) {\n          this.validateView(child, recurse);\n        }, this);\n      }\n    }\n\n    return this;\n  }\n\n  updateNodeGeometry(node) {\n    // update the node's geometry\n    if (node && node.isNode()) {\n      this.updateNodeSize(node)\n        .updateNodePosition(node)\n        .updateNodeRotation(node);\n    }\n\n    return this;\n  }\n\n  updateNodeSize(node) {\n\n    // only update the node's size\n    if (node && node.isNode()) {\n\n      let size   = node.metadata.size || {};\n      let width  = !utils.isUndefined(size.width) ? size.width : 1;\n      let height = !utils.isUndefined(size.height) ? size.height : 1;\n\n      let parent = node.parent;\n\n      if (size.relative && parent && parent.isNode()) {\n\n        let parentSize = parent.size;\n        let isPercent  = utils.isPercentage(width);\n\n        width = utils.fixNumber(width, isPercent, 0);\n\n        if (isPercent || width > 0 && width < 1) {\n          width *= parentSize.width;\n        } else {\n          width += parentSize.width;\n        }\n\n        isPercent = utils.isPercentage(height);\n        height    = utils.fixNumber(height, isPercent, 0);\n\n        if (isPercent || height > 0 && height < 1) {\n          height *= parentSize.height;\n        } else {\n          height += parentSize.height;\n        }\n\n      } else {\n        width  = utils.fixNumber(width, false, 1);\n        height = utils.fixNumber(height, false, 1);\n      }\n\n      // update size attribute of node\n      node.size = {\n        width: Math.max(width, 1),\n        height: Math.max(height, 1)\n      };\n    }\n\n    return this;\n  }\n\n  updateNodePosition(node) {\n\n    if (node && node.isNode()) {\n\n      let pos = node.metadata.position || {};\n      let x   = !utils.isUndefined(pos.x) ? pos.x : 0;\n      let y   = !utils.isUndefined(pos.y) ? pos.y : 0;\n\n      let parent = node.parent;\n\n      if (pos.relative && parent && parent.isNode()) {\n\n        let parentPos  = parent.position;\n        let parentSize = parent.size;\n\n        let isPercent = utils.isPercentage(x);\n\n        x = utils.fixNumber(x, isPercent, 0);\n\n        if (isPercent || x > -1 && x < 1) {\n          x = parentPos.x + parentSize.width * x;\n        } else {\n          x += parentPos.x;\n        }\n\n        isPercent = utils.isPercentage(y);\n\n        y = utils.fixNumber(y, isPercent, 0);\n\n        if (isPercent || y > -1 && y < 1) {\n          y = parentPos.y + parentSize.height * y;\n        } else {\n          y += parentPos.y;\n        }\n\n      } else {\n        x = utils.fixNumber(x, false, 0);\n        y = utils.fixNumber(y, false, 0);\n      }\n\n      node.position = this.snapToGrid({\n        x,\n        y\n      }, true);\n    }\n\n\n    return this;\n  }\n\n  updateNodeRotation(node) {\n\n    if (node && node.isNode()) {\n\n      let raw    = node.metadata.rotation || {};\n      let angle  = utils.fixNumber(raw.angle, false, 0);\n      let parent = node.parent;\n\n      if (raw.inherited && parent && parent.isNode() && parent.rotation !== 0) {\n\n        // update node's position\n        let pos    = node.position;\n        let size   = node.size;\n        let center = new Point(pos.x + size.width / 2, pos.y + size.height / 2);\n\n        let parentPos  = parent.position;\n        let parentSize = parent.size;\n\n        let centerX      = parentPos.x + parentSize.width / 2;\n        let centerY      = parentPos.y + parentSize.height / 2;\n        let parentCenter = new Point(centerX, centerY);\n\n        // angle is according to the clockwise\n        center.rotate(parentCenter, -parent.rotation);\n\n        // move the node to the new position\n        pos.x = center.x - size.width / 2;\n        pos.y = center.y - size.height / 2;\n\n        angle += parent.rotation;\n      }\n\n      node.rotation = angle;\n    }\n\n    return this;\n  }\n\n\n  // view\n  // ----\n\n  getView(cell, create) {\n\n    if (cell) {\n      let view = this.getViewById(cell.id);\n      if (!view && create && cell.isVisible()) {\n        view = this.createView(cell);\n      }\n\n      return view;\n    }\n    return null;\n  }\n\n  getViewById(cellId) {\n\n    return this.views ? this.views[cellId] : null;\n  }\n\n  eachView(iterator, context) {\n\n    return utils.forIn(this.views, iterator, context);\n  }\n\n  getTerminalView(link, isSource) {\n\n    let terminal = this.model.getTerminal(link, isSource);\n\n    return terminal && terminal.node ? this.getView(terminal.node) : null;\n  }\n\n  createView(cell) {\n\n    if (cell) {\n\n      let View = cell.metadata.view;\n      if (!View) {\n        View = cell.isLink() ? LinkView\n          : cell.isNode() ? NodeView\n          : null;\n      }\n\n      if (View) {\n\n        let view = new View(this, cell);\n\n        if (!this.views) {\n          this.views = {};\n        }\n\n        this.views[cell.id] = view;\n\n        return view;\n      }\n    }\n\n    return null;\n  }\n\n  removeView(cell, recurse = true, includeLink = true) {\n\n    if (cell) {\n\n      if (recurse) {\n        cell.eachChild(function (child) {\n          this.removeView(child, recurse, includeLink);\n        }, this);\n      }\n\n      if (includeLink) {\n        cell.eachLink(function (link) {\n          this.removeView(link, recurse, includeLink);\n        }, this);\n      }\n\n      let view = this.getView(cell);\n      if (view) {\n        delete this.views[cell.id];\n        view.destroy();\n      }\n    }\n\n    return this;\n  }\n\n  renderView(cell) {\n\n    let view = this.getView(cell);\n    if (view) {\n      if (cell.isLink() && !this.canRenderLink(cell)) {\n        this.removeView(cell);\n      } else {\n        view.render();\n      }\n    }\n\n    return this;\n  }\n\n  canRenderLink(link) {\n\n    let sourceNode = link.getTerminalNode(true);\n    let targetNode = link.getTerminalNode(false);\n\n    // unVisible or do not in the paper(view is null)\n    if (sourceNode && (!sourceNode.isVisible() || !this.getView(sourceNode))) {\n      return false;\n    }\n\n    if (targetNode && (!targetNode.isVisible() || !this.getView(targetNode))) {\n      return false;\n    }\n\n    return (sourceNode || link.getTerminalPoint(true))\n      && (targetNode || link.getTerminalPoint(false));\n  }\n\n  findViewByElem(elem) {\n\n    if (this.views) {\n\n      elem = utils.isString(elem)\n        ? this.svg.querySelector(elem)\n        : elem;\n\n      while (elem && elem !== this.svg && elem !== document) {\n\n        let cellId = elem.cellId;\n        if (cellId) {\n          return this.views[cellId];\n        }\n\n        elem = elem.parentNode;\n      }\n    }\n\n    return null;\n  }\n\n  findViewByCell(cell) {\n\n    return utils.isString(cell)\n      ? this.getViewById(cell)\n      : this.getView(cell);\n  }\n\n  findViewByPoint(/* point */) {\n\n  }\n\n  findViewsInArea(/* rect */) {\n\n  }\n\n\n  // changes\n  // -------\n\n  handleChanges(changes) {\n\n    utils.forEach(changes, function (change) {\n      this.distributeChange(change);\n    }, this);\n\n    this.validate();\n\n    return this;\n  }\n\n  distributeChange(change) {\n\n    if (change instanceof RootChange) {\n\n      this.onRootChanged(change);\n\n    } else if (change instanceof ChildChange) {\n\n      this.onChildChanged(change);\n\n    } else if (change instanceof VisibleChange) {\n\n      this.onVisibleChange(change);\n\n    } else if (change instanceof TerminalChange) {\n\n      this.onTerminalChange(change);\n\n    } else if (change instanceof SizeChange) {\n\n      this.onSizeChange(change);\n\n    } else if (change instanceof PositionChange) {\n\n      this.onPositionChange(change);\n\n    } else if (change instanceof RotationChange) {\n\n      this.onRotationChange(change);\n\n    } else if (change instanceof AttributeChange) {\n\n      this.onAttributeChange(change);\n\n    } else if (change instanceof GeometryChange) {\n\n      this.onGeometryChange(change);\n\n    } else if (change instanceof CollapseChange) {\n\n      this.onCollapseChange(change);\n    }\n\n    return this;\n  }\n\n  onRootChanged(change) {\n\n    if (change.viewport) {\n      this.invalidate(change.viewport, true, true);\n    }\n\n    if (change.previous) {\n      this.removeView(change.previous, true, true);\n    }\n  }\n\n  onChildChanged(change) {\n\n    let newParent = change.parent;\n    let oldParent = change.previous;\n\n    this.invalidate(change.child, true, true);\n\n    if (!newParent) {\n      this.removeView(change.child, true, true);\n    }\n\n    if (newParent !== oldParent) {\n      newParent && this.invalidate(newParent, false, false);\n      oldParent && this.invalidate(oldParent, false, false);\n    }\n  }\n\n  onVisibleChange(change) {\n\n    this.invalidate(change.cell, true, true);\n  }\n\n  onTerminalChange(change) {\n\n    this.invalidate(change.link, true, true);\n  }\n\n  onSizeChange(change) {\n\n    this.invalidate(change.cell, true, true);\n  }\n\n  onPositionChange(change) {\n\n    this.invalidate(change.cell, true, true);\n  }\n\n  onRotationChange(change) {\n\n    this.invalidate(change.cell, true, true);\n  }\n\n  onAttributeChange(change) {\n\n    this.invalidate(change.cell, true, true);\n  }\n\n  onGeometryChange(change) {\n\n    this.invalidate(change.cell, true, true);\n  }\n\n  onCollapseChange(change) {\n\n    this.invalidate(change.cell, true, true);\n  }\n\n\n  // router\n  // ------\n\n  static registRouter(name, fn) {\n\n    if (!this.router) {\n      this.router = {};\n    }\n\n    this.router[name] = fn;\n\n    return this;\n  }\n\n  static getRouter(name) {\n\n    return this.router ? this.router[name] : null;\n  }\n\n  getRouter(name) {\n\n    return this.constructor.getRouter(name);\n  }\n\n\n  // connector\n  // ---------\n\n  static registConnector(name, fn) {\n\n    if (!this.connectors) {\n      this.connectors = {};\n    }\n\n    this.connectors[name] = fn;\n\n    return this;\n  }\n\n  static getConnector(name) {\n\n    return this.connectors ? this.connectors[name] : null;\n  }\n\n  getConnector(name) {\n\n    return this.constructor.getConnector(name);\n  }\n\n\n  // marker\n  // ------\n\n  static registMarker(name, fn) {\n\n    if (!this.markers) {\n      this.markers = {};\n    }\n\n    this.markers[name] = fn;\n\n    return this;\n  }\n\n  static getMarker(name) {\n\n    return this.markers ? this.markers[name] : null;\n  }\n\n  getMarker(name) {\n\n    return this.constructor.getMarker(name);\n  }\n\n\n  // events\n  // ------\n\n  isValidEvent(e, view) {\n\n    // If the event is interesting, returns `true`.\n    // Otherwise, return `false`.\n\n    const cell = view && view.cell;\n\n    if (this.options.isValidEvent && !this.options.isValidEvent(e, cell, view)) {\n      return false;\n    }\n\n    if (cell && cell instanceof Cell) {\n      return true;\n    }\n\n\n    let target   = e.target;\n    let delegate = this.eventDelegate;\n\n    if (delegate === target || utils.containsElement(delegate, target)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  onContextMenu(e) {\n\n    e = utils.normalizeEvent(e);\n\n    let view = this.findViewByElem(e.target);\n\n    if (!this.isValidEvent(e, view)) {\n      return;\n    }\n\n    let localPoint = this.snapToGrid({\n      x: e.clientX,\n      y: e.clientY\n    });\n\n    if (view) {\n      this.trigger('cell:contextmenu', view.cell, view, e, localPoint.x, localPoint.y);\n    } else {\n      this.trigger('blank:contextmenu', e, localPoint.x, localPoint.y);\n    }\n  }\n\n  onDblClick(e) {\n\n    e.preventDefault();\n    e = utils.normalizeEvent(e);\n\n    let view = this.findViewByElem(e.target);\n\n    if (!this.isValidEvent(e, view)) {\n      return;\n    }\n\n    let localPoint = this.snapToGrid({\n      x: e.clientX,\n      y: e.clientY\n    });\n\n    if (view) {\n      this.trigger('cell:dblclick', view.cell, view, e, localPoint.x, localPoint.y);\n    } else {\n      this.trigger('blank:dblclick', e, localPoint.x, localPoint.y);\n    }\n  }\n\n  onClick(e) {\n\n    if (this.mouseMoved <= this.options.clickThreshold) {\n\n      e = utils.normalizeEvent(e);\n\n      let view = this.findViewByElem(e.target);\n\n      if (!this.isValidEvent(e, view)) {\n        return;\n      }\n\n      let localPoint = this.snapToGrid({\n        x: e.clientX,\n        y: e.clientY\n      });\n\n      if (view) {\n        this.trigger('cell:click', view.cell, view, e, localPoint.x, localPoint.y);\n      } else {\n        this.trigger('blank:click', e, localPoint.x, localPoint.y);\n      }\n    }\n  }\n\n  onCellMouseOver(e) {\n\n    this.onCellHover(e, 'mouseover');\n  }\n\n  onCellMouseOut(e) {\n\n    this.onCellHover(e, 'mouseout');\n  }\n\n  onCellMouseEnter(e) {\n\n    this.onCellHover(e, 'mouseenter');\n  }\n\n  onCellMouseLeave(e) {\n\n    this.onCellHover(e, 'mouseleave');\n  }\n\n  onCellHover(e, eventName) {\n\n    e = utils.normalizeEvent(e);\n\n    let view = this.findViewByElem(e.target);\n\n    if (!this.isValidEvent(e, view)) {\n      return;\n    }\n\n    let localPoint = this.snapToGrid({\n      x: e.clientX,\n      y: e.clientY\n    });\n\n    this.trigger('cell:' + eventName, view.cell, view, e, localPoint.x, localPoint.y);\n  }\n\n  onPointerDown(e) {\n\n    e = utils.normalizeEvent(e);\n\n    if (!utils.isLeftMouseButton(e)) {\n      return;\n    }\n\n    let view = this.findViewByElem(e.target);\n    let cell = view && view.cell;\n\n    if (!this.isValidEvent(e, view)) {\n      return;\n    }\n\n    this.triggerPointDown(e, cell, view);\n  }\n\n  triggerPointDown(e, cell, view) {\n\n    e.preventDefault();\n\n    this.mouseMoved = 0;\n\n    let localPoint = this.snapToGrid({\n      x: e.clientX,\n      y: e.clientY\n    });\n\n    if (view) {\n      this.sourceView = view;\n      this.trigger('cell:pointerDown', cell, view, e, localPoint.x, localPoint.y);\n    } else {\n      this.trigger('blank:pointerDown', e, localPoint.x, localPoint.y);\n    }\n\n    this.onMouseMoveHandler = this.onMouseMoveHandler || this.onPointerMove.bind(this);\n    this.onMouseUpHandler   = this.onMouseUpHandler || this.onPointerUp.bind(this);\n\n    // Chrome in windows8: `'ontouchstart' in document.documentElement` return `true`\n    // if (detector.IS_TOUCH) {\n    //   utils.addEventListener(doc, 'touchmove', this.onMouseMoveHandler);\n    //   utils.addEventListener(doc, 'touchend', this.onMouseUpHandler);\n    // } else {\n    utils.addEventListener(doc, 'mousemove', this.onMouseMoveHandler);\n    utils.addEventListener(doc, 'mouseup', this.onMouseUpHandler);\n    // }\n  }\n\n  onPointerMove(e) {\n\n    e.preventDefault();\n    e = utils.normalizeEvent(e);\n\n    let localPoint = this.snapToGrid({\n      x: e.clientX,\n      y: e.clientY\n    });\n\n    let sourceView = this.sourceView;\n    if (sourceView) {\n      this.mouseMoved += 1;\n      this.trigger('cell:pointerMove', sourceView.cell, sourceView, e, localPoint.x, localPoint.y);\n    } else {\n      this.trigger('blank:pointerMove', e, localPoint.x, localPoint.y);\n    }\n  }\n\n  onPointerUp(e) {\n\n    e = utils.normalizeEvent(e);\n\n    let localPoint = this.snapToGrid({\n      x: e.clientX,\n      y: e.clientY\n    });\n\n    let sourceView = this.sourceView;\n    if (sourceView) {\n      this.trigger('cell:pointerUp', sourceView.cell, sourceView, e, localPoint.x, localPoint.y);\n      this.sourceView = null;\n    } else {\n      this.trigger('blank:pointerUp', e, localPoint.x, localPoint.y);\n    }\n\n    // Chrome in windows8: `'ontouchstart' in document.documentElement` return `true`\n    // if (detector.IS_TOUCH) {\n    //   utils.removeEventListener(doc, 'touchmove', this.onMouseMoveHandler);\n    //   utils.removeEventListener(doc, 'touchend', this.onMouseUpHandler);\n    // } else {\n    utils.removeEventListener(doc, 'mousemove', this.onMouseMoveHandler);\n    utils.removeEventListener(doc, 'mouseup', this.onMouseUpHandler);\n    // }\n  }\n\n\n  // utils\n  // -----\n\n  snapToGrid(point, isLocal) {\n\n    // Convert global coordinates to the local ones of the `drawPane`.\n    // Otherwise, improper transformation would be applied when the\n    // drawPane gets transformed (scaled/rotated).\n    let gridSize = this.options.gridSize || 1;\n\n    if (!isLocal) {\n      point = vector(this.drawPane).toLocalPoint(point.x, point.y);\n    }\n\n    return {\n      x: utils.snapToGrid(point.x, gridSize),\n      y: utils.snapToGrid(point.y, gridSize)\n    };\n  }\n\n  toLocalPoint(point) {\n\n    let offset   = this.getRootOffset();\n    let svgPoint = this.svg.createSVGPoint();\n\n    svgPoint.x = point.x + offset.left;\n    svgPoint.y = point.y + offset.top;\n\n    let result = svgPoint.matrixTransform(this.drawPane.getCTM().inverse());\n\n    return Point.fromPoint(result);\n  }\n\n  toClientPoint(point) {\n\n    let offset   = this.getRootOffset();\n    let svgPoint = this.svg.createSVGPoint();\n\n    svgPoint.x = point.x;\n    svgPoint.y = point.y;\n\n    let result = svgPoint.matrixTransform(this.drawPane.getCTM());\n\n    result.x -= offset.left;\n    result.y -= offset.top;\n\n    return Point.fromPoint(result);\n  }\n\n  getRootOffset() {\n\n    // This is a hack for Firefox! If there wasn't a fake (non-visible)\n    // rectangle covering the whole SVG area, the `$(paper.svg).offset()`\n    // used below won't work.\n    let fakeRect;\n    if (detector.IS_FF) {\n\n      fakeRect = vector('rect', {\n        width: this.options.width,\n        height: this.options.height,\n        x: 0,\n        y: 0,\n        opacity: 0\n      });\n\n      this.svg.appendChild(fakeRect.node);\n    }\n\n    let paperOffset = utils.getOffset(this.svg);\n\n    if (detector.IS_FF) {\n      fakeRect.remove();\n    }\n\n    let body       = doc.body;\n    let docElem    = doc.documentElement;\n    let scrollTop  = body.scrollTop || docElem.scrollTop;\n    let scrollLeft = body.scrollLeft || docElem.scrollLeft;\n\n    return {\n      left: scrollLeft - paperOffset.left,\n      top: scrollTop - paperOffset.top\n    };\n  }\n\n  toLocalRect(rect) {\n\n    let origin = this.toLocalPoint({\n      x: rect.x,\n      y: rect.y\n    });\n    let corner = this.toLocalPoint({\n      x: rect.x + rect.width,\n      y: rect.y + rect.height\n    });\n\n    return new Rect(origin.x, origin.y, corner.x - origin.x, corner.y - origin.y);\n  }\n}\n\n\n// exports\n// -------\n\nexport default Paper;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/Paper.js\n **/","import * as utils from '../common/utils';\nimport     vector from '../common/vector';\nimport      Point from '../geometry/Point';\nimport VectorView from '../views/VectorView';\n\n\nclass LinkView extends VectorView {\n\n  render() {\n\n    this.vel.empty();\n\n    this.renderMarkup()\n      .update();\n\n    return this;\n  }\n\n  update() {\n\n    this.cache = {};\n\n    return this\n      .parseRouter()\n      .parseConnector()\n      .parseTerminal(true)\n      .parseTerminal(false)\n      .updateMarker()\n      .updateConnector()\n      .updateAttributes();\n  }\n\n  updateAttributes(attrs) {\n\n    utils.forIn(attrs || this.cell.attrs, (attrMap, selector) => {\n\n      let processed = [];\n\n      if (utils.isObject(attrMap.fill)) {\n        this.applyGradient(selector, 'fill', attrMap.fill);\n        processed.push('fill');\n      }\n\n      if (utils.isObject(attrMap.stroke)) {\n        this.applyGradient(selector, 'stroke', attrMap.stroke);\n        processed.push('stroke');\n      }\n\n      if (utils.isObject(attrMap.filter)) {\n        this.applyFilter(selector, attrMap.filter);\n        processed.push('filter');\n      }\n\n      // remove processed attributes from attrs\n      let normal = {};\n\n      utils.forIn(attrMap, (value, key) => {\n        if (!utils.contains(processed, key)) {\n          normal[key] = value;\n        }\n      });\n\n      this.applyAttr(selector, normal);\n    });\n\n    return this;\n  }\n\n  parseRouter() {\n\n    // convert vertices to router points\n    let link     = this.cell;\n    let router   = link.getRouter();\n    let vertices = utils.filter(link.vertices || [], p => Point.isPointLike(p));\n\n    vertices = utils.map(vertices, p => Point.fromPoint(p));\n\n    let parser = router.parse && utils.isFunction(router.parse)\n      ? router.parse\n      : router.name && this.paper.getRouter(router.name);\n\n    // parsed vertices\n    let routerPoints = parser && utils.isFunction(parser)\n      ? parser.call(this, vertices, router.options || {})\n      : vertices;\n\n    this.cacheRouterPoints(routerPoints);\n\n    return this;\n  }\n\n  parseConnector() {\n\n    let link         = this.cell;\n    let connector    = link.getConnector();\n    let sourceMarker = link.getMarker(true);\n    let targetMarker = link.getMarker(false);\n\n    let connectorStrokeWidth    = this.getStrokeWidth(connector.selector);\n    let sourceMarkerStrokeWidth = this.getStrokeWidth(sourceMarker.selector);\n    let targetMarkerStrokeWidth = this.getStrokeWidth(targetMarker.selector);\n\n    // update stroke width to marker options\n    let sourceMarkerOptions = sourceMarker.options;\n    if (!sourceMarkerOptions) {\n      sourceMarkerOptions = sourceMarker.options = {};\n    }\n\n    sourceMarkerOptions.connectorStrokeWidth = connectorStrokeWidth;\n    sourceMarkerOptions.markerStrokeWidth    = sourceMarkerStrokeWidth;\n\n    let targetMarkerOptions = targetMarker.options;\n    if (!targetMarkerOptions) {\n      targetMarkerOptions = targetMarker.options = {};\n    }\n\n    targetMarkerOptions.connectorStrokeWidth = connectorStrokeWidth;\n    targetMarkerOptions.markerStrokeWidth    = targetMarkerStrokeWidth;\n\n    // cache\n    this.cacheConnector(connector);\n    this.cacheMarker(sourceMarker, true);\n    this.cacheMarker(targetMarker, false);\n\n    return this;\n  }\n\n  parseTerminal(isSource) {\n\n    let link  = this.cell;\n    let point = link.getTerminalPoint(isSource);\n    let node  = link.getTerminalNode(isSource);\n    let view  = node && this.paper.getView(node);\n    let port  = link.getTerminalPort(isSource);\n\n    this.cacheStaticConnPoint(point, isSource);\n    this.cacheTerminalView(view, isSource);\n    this.cacheTerminalPort(port, isSource);\n\n    return this;\n  }\n\n  updateMarker() {\n\n    return this\n      .renderMarker(true)\n      .renderMarker(false)\n      .updateConnectionPoint(true)\n      .updateConnectionPoint(false)\n      .transformMarker(true)\n      .transformMarker(false)\n      .updateConnectionPointOnMarker(true)\n      .updateConnectionPointOnMarker(false);\n  }\n\n  updateConnector() {\n\n    let connector = this.fetchConnector();\n\n    let parser = connector.parse && utils.isFunction(connector.parse)\n      ? connector.parse\n      : connector.name && this.paper.getConnector(connector.name);\n\n    if (parser && utils.isFunction(parser)) {\n\n      let sourcePoint = this.getConnectionPoint(true);\n      let targetPoint = this.getConnectionPoint(false);\n      if (sourcePoint && targetPoint) {\n\n        let pathData = parser.call(this,\n          sourcePoint,\n          targetPoint,\n          this.fetchRouterPoints(),\n          connector.options || {}\n        );\n\n        this.applyAttr(connector.selector, { d: pathData });\n      } else {\n        this.vel.empty();\n      }\n    } else {\n      throw new Error('Unknown connector: \"' + connector.name + '\"');\n    }\n\n    return this;\n  }\n\n  renderMarker(isSource) {\n\n    let marker  = this.fetchMarker(isSource);\n    let vMarker = this.findOne(marker.selector);\n\n    if (marker && vMarker) {\n\n      let parser = marker.parse && utils.isFunction(marker.parse)\n        ? marker.parse\n        : marker.name && this.paper.getMarker(marker.name);\n\n      if (parser && utils.isFunction(parser)) {\n\n        let renderedMarker = parser(vMarker, marker.options);\n\n        // if return a new marker element, replace the old one\n        let newVel = renderedMarker.vel;\n        if (newVel) {\n\n          // replace\n          let elem      = vMarker.node;\n          let parent    = elem.parentNode;\n          let className = vMarker.getClassName();\n\n          parent.insertBefore(newVel.node, elem);\n          parent.removeChild(elem);\n          newVel.addClass(className);\n\n          vMarker = newVel;\n        }\n\n        this.cacheMarkerVel(vMarker, isSource);\n        this.cacheRenderedMarker(renderedMarker, isSource);\n      }\n    }\n\n    return this;\n  }\n\n  updateConnectionPoint(isSource) {\n\n    let staticPoint = this.fetchStaticConnPoint(isSource);\n    if (!staticPoint) {\n      this.updateConnPointOnPort(isSource) ||\n      this.updateConnPointOnNode(isSource);\n    }\n\n    return this;\n  }\n\n  updateConnPointOnPort(isSource) {\n\n    let point = this.fetchConnPointOnPort(isSource);\n    if (!point) {\n\n      let view = this.fetchTerminalView(isSource);\n      let port = this.fetchTerminalPort(isSource);\n      if (port && view) {\n\n        if (view.getConnectionPointOnPort) {\n          point = view.getConnectionPointOnPort(port, isSource);\n        }\n\n        if (!point) {\n          let bbox = this.getPortBodyBBox(isSource);\n          if (bbox) {\n\n            let ref  = this.getReferencePoint(bbox, isSource);\n            let geom = this.getPortBodyGeom(isSource) || bbox;\n\n            if (ref) {\n              point = geom.intersectionWithLineFromCenterToPoint(ref);\n            }\n\n            point = point || geom.getCenter();\n          }\n        }\n\n        this.cacheConnPointOnPort(point, isSource);\n      }\n    }\n\n    return point;\n  }\n\n  updateConnPointOnNode(isSource) {\n\n    // find the connection point on the terminal\n\n    let point = this.fetchConnPointOnNode(isSource);\n    if (!point) {\n\n      let view = this.fetchTerminalView(isSource);\n      if (view) {\n\n        if (view.getConnectionPointOnBorder) {\n          point = view.getConnectionPointOnBorder();\n        }\n\n        if (!point) {\n\n          let bbox = this.getTerminalBBox(isSource);\n          if (bbox) {\n\n            let reference = this.getReferencePoint(bbox, isSource);\n            if (reference) {\n              point = bbox.intersectionWithLineFromCenterToPoint(reference);\n            }\n\n            point = point || bbox.getCenter();\n          }\n        }\n\n        this.cacheConnPointOnNode(point, isSource);\n      }\n    }\n\n    return point;\n  }\n\n  getStrokeWidth(selector) {\n\n    let vel = this.findOne(selector);\n    if (vel && vel.node) {\n\n      let strokeWidth = utils.getComputedStyle(vel.node, 'stroke-width');\n\n      return strokeWidth && utils.toFloat(strokeWidth) || 0;\n    }\n\n    return 0;\n  }\n\n  getTerminalBBox(isSource) {\n\n    let bbox = this.fetchTerminalBBox(isSource);\n    if (!bbox) {\n\n      let view = this.fetchTerminalView(isSource);\n      if (view) {\n        bbox = view.getStrokedBBox();\n        bbox = this.fixStrokedBBox(bbox, isSource);\n      }\n\n      // cache\n      this.cacheTerminalBBox(bbox, isSource);\n    }\n\n    return bbox;\n  }\n\n  fixStrokedBBox(bbox, isSource) {\n\n    if (bbox) {\n\n      let marker         = this.fetchMarker(isSource);\n      let renderedMarker = this.fetchRenderedMarker(isSource);\n\n      if (marker && renderedMarker) {\n\n        let markerStrokeWidth = marker.options.markerStrokeWidth;\n        if (markerStrokeWidth) {\n\n          let rad = renderedMarker.rad || 0;\n          if (rad >= Math.PI / 4 || rad === 0) {\n            bbox.grow(markerStrokeWidth / 2);\n          } else {\n            bbox.grow(markerStrokeWidth / Math.sin(rad) / 2);\n          }\n        }\n      }\n    }\n\n    return bbox;\n  }\n\n  getReferencePoint(bbox, isSource) {\n\n    // static point\n    let reference = this.fetchStaticConnPoint(isSource);\n\n    // vertices\n    if (!reference) {\n\n      let vertices = this.fetchRouterPoints();\n\n      reference = isSource\n        ? vertices[0]\n        : vertices[vertices.length - 1];\n    }\n\n    // port\n    if (!reference) {\n\n      let portBBox = this.getPortBodyBBox(!isSource);\n      if (portBBox) {\n        reference = portBBox.intersectionWithLineFromCenterToPoint(bbox.getCenter());\n        reference = reference || portBBox.getCenter();\n      }\n    }\n\n    // terminal\n    if (!reference) {\n\n      let terminalBBox = this.getTerminalBBox(!isSource);\n      if (terminalBBox) {\n        reference = terminalBBox.intersectionWithLineFromCenterToPoint(bbox.getCenter());\n        reference = reference || terminalBBox.getCenter();\n      }\n\n    }\n\n    return reference;\n  }\n\n  getPortBodyBBox(isSource) {\n\n    let bbox = this.fetchPortBodyBBox(isSource);\n    if (!bbox) {\n\n      let view = this.fetchTerminalView(isSource);\n      let port = this.fetchTerminalPort(isSource);\n      if (view && port) {\n\n        if (view.getPortBodyBBox) {\n          bbox = view.getPortBodyBBox(port, isSource);\n        }\n\n        if (bbox) {\n          bbox = this.fixStrokedBBox(bbox, isSource);\n          this.cachePortBodyBBox(bbox, isSource);\n        }\n      }\n    }\n\n    return bbox;\n  }\n\n  getPortBodyGeom(isSource) {\n\n    let geom = this.fetchPortBodyGeom(isSource);\n    if (!geom) {\n\n      let view = this.fetchTerminalView(isSource);\n      let port = this.fetchTerminalPort(isSource);\n      if (view && port) {\n\n        if (view.getPortBodyGeom) {\n          geom = view.getPortBodyGeom(port, isSource);\n        }\n\n        if (geom) {\n          geom = this.fixStrokedBBox(geom, isSource);\n          this.cachePortBodyGeom(geom, isSource);\n        }\n      }\n    }\n\n    return geom;\n  }\n\n  getConnectionPoint(isSource) {\n\n    return this.fetchStaticConnPoint(isSource)\n      || this.fetchConnPointOnMarker(isSource)\n      || this.fetchConnPointOnPort(isSource)\n      || this.fetchConnPointOnNode(isSource);\n  }\n\n  transformMarker(isSource, ref) {\n\n    let renderedMarker = this.fetchRenderedMarker(isSource);\n    if (renderedMarker) {\n\n      let pane        = this.getPane();\n      let vertices    = this.fetchRouterPoints();\n      let sourcePoint = this.getConnectionPoint(true);\n      let targetPoint = this.getConnectionPoint(false);\n\n      let position  = isSource ? sourcePoint : targetPoint;\n      let reference = ref || isSource\n        ? (vertices[0] || targetPoint)\n        : (vertices[vertices.length - 1] || sourcePoint);\n      // make the marker at the right position\n      let markerVel = this.fetchMarkerVel(isSource);\n\n      if (position && reference && markerVel) {\n        markerVel.translateAndAutoOrient(position, reference, pane);\n      }\n    }\n\n    return this;\n  }\n\n  updateConnectionPointOnMarker(isSource) {\n\n    let markerVel      = this.fetchMarkerVel(isSource);\n    let renderedMarker = this.fetchRenderedMarker(isSource);\n\n    if (markerVel && renderedMarker) {\n\n      let pane  = this.getPane();\n      let point = renderedMarker.point;\n\n      let p = vector.createSVGPoint(point.x, point.y);\n\n      p = p.matrixTransform(markerVel.getTransformToElement(pane));\n\n      let connectionPoint = Point.fromPoint(p);\n\n      this.cacheConnPointOnMarker(connectionPoint, isSource);\n    }\n\n    return this;\n  }\n\n\n  // cache\n  // -----\n\n  cacheRouterPoints(points) {\n\n    this.cache.routerPoints = points;\n  }\n\n  fetchRouterPoints() {\n\n    return this.cache.routerPoints;\n  }\n\n  cacheConnector(connector) {\n\n    this.cache.connector = connector;\n  }\n\n  fetchConnector() {\n\n    return this.cache.connector;\n  }\n\n  cacheMarker(marker, isSource) {\n\n    if (isSource) {\n      this.cache.sourceMarker = marker;\n    } else {\n      this.cache.targetMarker = marker;\n    }\n  }\n\n  fetchMarker(isSource) {\n\n    return isSource ? this.cache.sourceMarker : this.cache.targetMarker;\n  }\n\n  cacheRenderedMarker(renderedMarker, isSource) {\n\n    if (renderedMarker) {\n      if (isSource) {\n        this.cache.renderedSourceMarker = renderedMarker;\n      } else {\n        this.cache.renderedTargetMarker = renderedMarker;\n      }\n    }\n  }\n\n  fetchRenderedMarker(isSource) {\n\n    return isSource ? this.cache.renderedSourceMarker : this.cache.renderedTargetMarker;\n  }\n\n  cacheMarkerVel(vel, isSource) {\n\n    if (vel) {\n      if (isSource) {\n        this.cache.sourceMarkerVel = vel;\n      } else {\n        this.cache.targetMarkerVel = vel;\n      }\n    }\n  }\n\n  fetchMarkerVel(isSource) {\n\n    return isSource ? this.cache.sourceMarkerVel : this.cache.targetMarkerVel;\n  }\n\n  cacheTerminalView(view, isSource) {\n\n    if (view) {\n      if (isSource) {\n        this.cache.sourceView = view;\n      } else {\n        this.cache.targetView = view;\n      }\n    }\n  }\n\n  fetchTerminalView(isSource) {\n\n    return isSource ? this.cache.sourceView : this.cache.targetView;\n  }\n\n  cacheTerminalPort(port, isSource) {\n\n    if (!utils.isNil(port)) {\n      if (isSource) {\n        this.cache.sourcePort = port;\n      } else {\n        this.cache.targetPort = port;\n      }\n    }\n  }\n\n  fetchTerminalPort(isSource) {\n\n    return isSource ? this.cache.sourcePort : this.cache.targetPort;\n  }\n\n  cacheStaticConnPoint(point, isSource) {\n\n    if (point) {\n      if (isSource) {\n        this.cache.staticSourcePoint = point;\n      } else {\n        this.cache.staticTargetPoint = point;\n      }\n    }\n  }\n\n  fetchStaticConnPoint(isSource) {\n\n    return isSource ? this.cache.staticSourcePoint : this.cache.staticTargetPoint;\n  }\n\n  cacheConnPointOnMarker(point, isSource) {\n\n    if (point) {\n      if (isSource) {\n        this.cache.sourcePointOnMarker = point;\n      } else {\n        this.cache.targetPointOnMarker = point;\n      }\n    }\n  }\n\n  fetchConnPointOnMarker(isSource) {\n\n    return isSource ? this.cache.sourcePointOnMarker : this.cache.targetPointOnMarker;\n  }\n\n  cacheConnPointOnPort(point, isSource) {\n\n    if (point) {\n      if (isSource) {\n        this.cache.sourcePointOnPort = point;\n      } else {\n        this.cache.targetPointOnPort = point;\n      }\n    }\n  }\n\n  fetchConnPointOnPort(isSource) {\n\n    return isSource ? this.cache.sourcePointOnPort : this.cache.targetPointOnPort;\n  }\n\n  cacheConnPointOnNode(point, isSource) {\n\n    if (point) {\n      if (isSource) {\n        this.cache.sourcePointOnTerminal = point;\n      } else {\n        this.cache.targetPointOnTerminal = point;\n      }\n    }\n  }\n\n  fetchConnPointOnNode(isSource) {\n\n    return isSource ? this.cache.sourcePointOnTerminal : this.cache.targetPointOnTerminal;\n  }\n\n  cacheTerminalBBox(bbox, isSource) {\n\n    if (bbox) {\n      if (isSource) {\n        this.cache.sourceTerminalBBox = bbox;\n      } else {\n        this.cache.targetTerminalBBox = bbox;\n      }\n    }\n  }\n\n  fetchTerminalBBox(isSource) {\n\n    return isSource ? this.cache.sourceTerminalBBox : this.cache.targetTerminalBBox;\n  }\n\n  cachePortBodyBBox(bbox, isSource) {\n\n    if (bbox) {\n      if (isSource) {\n        this.cache.sourcePortBBox = bbox;\n      } else {\n        this.cache.targetPortBBox = bbox;\n      }\n    }\n  }\n\n  fetchPortBodyBBox(isSource) {\n\n    return isSource ? this.cache.sourcePortBBox : this.cache.targetPortBBox;\n  }\n\n  cachePortBodyGeom(geom, isSource) {\n\n    if (geom) {\n      if (isSource) {\n        this.cache.sourcePortGeom = geom;\n      } else {\n        this.cache.targetPortGeom = geom;\n      }\n    }\n  }\n\n  fetchPortBodyGeom(isSource) {\n\n    return isSource ? this.cache.sourcePortGeom : this.cache.targetPortGeom;\n  }\n}\n\n\n// exports\n// -------\n\nexport default LinkView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/LinkView.js\n **/","import * as utils from '../common/utils';\nimport Point      from '../geometry/Point';\nimport Cell       from '../cells/Cell';\n\n\nclass Link extends Cell {\n\n  constructor(options) {\n\n    super(options);\n\n    this.vertices = this.metadata.vertices || [];\n  }\n\n\n  // static\n  // ------\n\n  static isLink(link) {\n    return link && link instanceof Link;\n  }\n\n\n  // methods\n  // -------\n\n  isLink() {\n\n    return true;\n  }\n\n  getRouter() {\n\n    let router = this.metadata.router || {};\n\n    if (utils.isFunction(router)) {\n      router = { parse: router };\n    } else if (!utils.isObject(router)) {\n      router = { name: router };\n    }\n\n    return router;\n  }\n\n  getMarker(isSource) {\n\n    let marker = isSource\n      ? this.metadata.sourceMarker\n      : this.metadata.targetMarker;\n\n    if (utils.isFunction(marker)) {\n      marker = { parse: marker };\n    } else if (!utils.isObject(marker)) {\n      marker = { name: marker };\n    }\n\n    marker.selector = isSource ? '.source-marker' : '.target-marker';\n\n    return marker;\n  }\n\n  getConnector() {\n\n    let connector = this.metadata.connector || {};\n\n    if (utils.isFunction(connector)) {\n      connector = { parse: connector };\n    } else if (!utils.isObject(connector)) {\n      connector = { name: connector };\n    }\n\n    connector.selector = '.connector';\n\n    return connector;\n  }\n\n\n  // vertices\n  // --------\n\n  getVertices() {\n\n    return this.vertices;\n  }\n\n  getVerticesCount() {\n\n    return this.vertices ? this.vertices.length : 0;\n  }\n\n  getVerticeAt(index) {\n\n    return this.vertices ? this.vertices[index] : null;\n  }\n\n  indexOfVertice(point) {\n\n    if (point && Point.isPointLike(point)) {\n\n      for (let i = 0, l = this.getVerticesCount(); i < l; i += 1) {\n\n        let vertice = this.getVerticeAt(i);\n\n        if (point.x === vertice.x && point.y === vertice.y) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  eachVertice(iterator, context) {\n\n    return utils.forEach(this.vertices, iterator, context);\n  }\n\n  filterVertice(iterator, context) {\n\n    return utils.filter(this.vertices, iterator, context);\n  }\n\n  insertVertice(points, index) {\n\n    let length = this.getVerticesCount();\n\n    index = utils.fixIndex(index, length);\n\n    if (!utils.isArray(points)) {\n      points = [points];\n    }\n\n    if (index === length) {\n      this.vertices.push(...points);\n    } else {\n      this.vertices.splice(index, 0, points);\n    }\n\n    return this;\n  }\n\n  removeVertice(point) {\n\n    let index = this.indexOfVertice(point);\n    if (index >= 0) {\n      this.removeVerticeAt(index);\n    }\n\n    return this;\n  }\n\n  removeVerticeAt(index) {\n\n    let vertice = this.getVerticeAt(index);\n    if (vertice) {\n      this.vertices.splice(index, 1);\n    }\n    return vertice;\n  }\n\n  clearVertices() {\n\n    this.vertices = [];\n\n    return this;\n  }\n\n\n  // common\n  // ------\n\n  clone(options, withData) {\n\n    let cloned = super.clone(options, withData);\n\n    cloned.vertices = [];\n\n    utils.forEach(this.vertices, (point) => {\n      if (Point.isPointLike(point)) {\n        cloned.vertices.push({ x: point.x, y: point.y });\n      }\n    });\n\n    return cloned;\n  }\n}\n\n\nLink.setDefaults({\n  tagName: 'g',\n  markup: '<path class=\"connector\"/><path class=\"source-marker\"/><path class=\"target-marker\"/>',\n  classNames: 'pane-cell pane-link', // pane-cell for event handler\n  pane: 'linkPane',\n  data: null,   // related data(for business logic)\n  view: null,   // specify the constructor of the view\n  router: null,\n  connector: 'sharp',\n  sourceMarker: null,\n  targetMarker: null,\n  attrs: {\n    '.connector': {\n      'fill': 'none',\n      'stroke': '#000',\n      'stroke-width': 1\n    },\n    '.source-marker': {\n      'fill': '#000',\n      'stroke': '#000',\n      'stroke-width': 1\n    },\n    '.target-marker': {\n      'fill': '#000',\n      'stroke': '#000',\n      'stroke-width': 1\n    }\n  }\n});\n\n\n// exports\n// -------\n\nexport default Link;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/cells/Link.js\n **/","import * as utils from '../common/utils';\nimport Events     from '../common/Events';\n\n\nclass Handler extends Events {\n\n  constructor(paper, options = {}) {\n\n    super();\n\n    this.paper    = paper;\n    this.disabled = false;\n\n    this.configure(options)\n      .init();\n  }\n\n  configure() { return this; }\n\n  init() { return this; }\n\n  destroy() {\n\n    utils.destroy(this);\n  }\n\n  getPaper() {\n\n    return this.paper;\n  }\n\n  getModel() {\n\n    return this.paper && this.paper.model;\n  }\n\n  isDisabled() {\n\n    return this.disabled === true;\n  }\n\n  isEnabled() {\n\n    return this.disabled === false;\n\n  }\n\n  disable() {\n\n    this.disabled = true;\n    this.trigger('handler:disabled');\n\n    return this;\n  }\n\n  enable() {\n\n    this.disabled = false;\n    this.trigger('handler:enabled');\n\n    return this;\n  }\n\n  invoke(callback, context) {\n\n    if (!this.isDisabled()) {\n      callback.call(context);\n    }\n\n    return this;\n  }\n}\n\n\n// exports\n// -------\n\nexport default Handler;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/handlers/Handler.js\n **/","import       * as utils from '../common/utils';\nimport           vector from '../common/vector';\nimport          Handler from './Handler';\nimport VertexController from '../controllers/Vertex';\n\nclass SelectHandler extends Handler {\n\n  init(options = {}) {\n\n    let that = this;\n\n    this.name = options.name || 'select';\n\n    let paper = this.getPaper();\n    let model = this.getModel();\n\n    this.previewVel  = vector('rect', {\n      'fill': 'none',\n      'stroke-dasharray': '3px, 3px',\n      'stroke': 'black'\n    });\n    this.previewRect = this.previewVel.node;\n\n    paper.controlPane.appendChild(this.previewRect);\n\n    this.hidePreview();\n\n    paper.selection = [];\n\n    this.origin = {\n      x: 0,\n      y: 0\n    };\n\n    paper.on('cell:pointerDown', (cell, view, e) => {\n\n      that.invoke(() => {\n        that.origin = {\n          x: e.x,\n          y: e.y\n        };\n        that.selectCell(cell, utils.hasModifierKey(e));\n      });\n    });\n\n    paper.on('cell:pointerMove', (cell, view, e) => {\n      that.invoke(() => {\n        that.showPreview()\n          .redrawPreview(e);\n      });\n    });\n\n    paper.on('cell:pointerUp', (cell, view, e) => {\n      that.invoke(() => {\n        let previousPosition = that.origin;\n        if (e.x !== previousPosition.x || e.y !== previousPosition.y) {\n\n          model.beginUpdate();\n\n          utils.forEach(paper.selection, (c) => {\n            let position = c.metadata.position;\n            model.setGeometry(c, {\n              position: {\n                x: position.x + (e.x - previousPosition.x),\n                y: position.y + (e.y - previousPosition.y),\n                relative: position.relative\n              }\n            });\n          });\n\n          model.endUpdate();\n\n          utils.forEach(paper.selection, (c) => {\n            c.vertexController.redraw();\n          });\n        }\n        that.hidePreview();\n      });\n    });\n\n    paper.on('blank:pointerDown', (e) => {\n      that.invoke(() => {\n        if (!utils.hasModifierKey(e)) {\n          that.clearSelection();\n        }\n      });\n    });\n\n    return this;\n  }\n\n  hidePreview() {\n\n    this.previewVel.hide();\n\n    return this;\n  }\n\n  showPreview() {\n\n    this.previewVel.show();\n    return this;\n  }\n\n  redrawPreview(position) {\n\n    let paper      = this.getPaper();\n    let previewVel = this.previewVel;\n    let selection  = paper.selection;\n\n    if (selection.length) {\n\n      let minP = {\n        x: Number.MAX_VALUE,\n        y: Number.MAX_VALUE\n      };\n      let maxP = {\n        x: 0,\n        y: 0\n      };\n\n      utils.forEach(selection, (cell) => {\n        let view = paper.getView(cell);\n        let bbox = view.vel.getBBox();\n        if (bbox.x < minP.x) {\n          minP.x = bbox.x;\n        }\n        if (bbox.y < minP.y) {\n          minP.y = bbox.y;\n        }\n        if (bbox.x + bbox.width > maxP.x) {\n          maxP.x = bbox.x + bbox.width;\n        }\n        if (bbox.y + bbox.height > maxP.y) {\n          maxP.y = bbox.y + bbox.height;\n        }\n      });\n\n      let previousPosition = this.origin;\n\n      previewVel.attr({\n        x: minP.x + (position.x - previousPosition.x),\n        y: minP.y + (position.y - previousPosition.y),\n        width: maxP.x - minP.x,\n        height: maxP.y - minP.y\n      });\n    }\n\n    return this;\n  }\n\n  _selectCell(cell) {\n\n    let paper = this.getPaper();\n\n    cell.vertexController = new VertexController(paper, {\n      cell\n    });\n    cell.selected         = true;\n    paper.selection.push(cell);\n    return this;\n  }\n\n  _unselectCell(cell) {\n\n    let paper     = this.getPaper();\n    let selection = paper.selection;\n\n    if (utils.contains(selection, cell)) {\n      paper.selection.splice(utils.indexOf(selection, cell), 1);\n    }\n\n    cell.vertexController.destroy();\n    cell.selected = false;\n\n    return this;\n  }\n\n  selectCell(cell, multi) {\n\n    if (!multi) {\n      this.clearSelection();\n    } else {\n      return cell.selected\n        ? this._unselectCell(cell)\n        : this._selectCell(cell);\n    }\n\n    if (cell.selected) {\n      return this;\n    }\n\n    this.clearSelection();\n    this._selectCell(cell);\n\n    return this;\n  }\n\n  clearSelection() {\n\n    utils.forEach(this.paper.selection, (cell) => {\n      cell.vertexController.destroy();\n      cell.selected = false;\n    });\n\n    this.paper.selection = [];\n\n    return this;\n  }\n}\n\n\n// exports\n// -------\n\nexport default SelectHandler;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/handlers/Selection.js\n **/","import * as utils from '../common/utils';\nimport   detector from '../common/detector';\nimport     vector from '../common/vector';\nimport       Rect from '../geometry/Rect';\nimport Controller from './Controller';\n\n\n// TODO listen to cell's change event to redraw\n\nconst win = window;\nconst doc = win.document;\n\nconst defaults = {\n  boundsAttr: {\n    'fill': 'none',\n    'stroke': '#0f0',\n    'stroke-dasharray': '3px, 3px',\n  },\n  rotaterOffset: -12,\n  rotaterAttr: {\n    rx: 5,\n    ry: 5,\n    fill: '#0f0',\n    stroke: 'black',\n    style: 'cursor:crosshair;'\n  },\n  resizerAttr: {\n    height: 6,\n    width: 6,\n    fill: '#0f0',\n    stroke: 'black',\n  }\n};\n\nconst RESIZER_NAMES = [\n  'nw-resize',\n  'n-resize',\n  'ne-resize',\n  'e-resize',\n  'se-resize',\n  's-resize',\n  'sw-resize',\n  'w-resize',\n];\n\n\nclass VertexController extends Controller {\n\n  init(options) {\n\n    this.options = utils.merge({}, defaults, options);\n\n    let vel = vector('g', {\n      class: 'vertex-bounds'\n    });\n\n    this.cell = options.cell;\n    this.vel  = vel;\n    this.elem = vel.node;\n    this.paper.controlPane.appendChild(this.elem);\n\n    this.redraw();\n\n    return this;\n  }\n\n  redraw() {\n    let that = this;\n    let cell = that.cell;\n\n    that.moveTo(cell.position)\n      .rotate()\n      .setSize(cell.size)\n      .drawBounds()\n      .drawRotater()\n      .drawResizers();\n\n    this.bindEvents();\n\n    return this;\n  }\n\n  moveTo(pos) {\n\n    this.vel.translate(pos.x, pos.y);\n    this.position = pos;\n\n    return this;\n  }\n\n  setSize(size) {\n\n    this.size = size;\n\n    return this;\n  }\n\n  rotate(rotation, cx, cy) {\n\n    let cell = this.cell;\n\n    cx       = utils.isNumeric(cx) ? cx : cell.size.width / 2;\n    cy       = utils.isNumeric(cy) ? cy : cell.size.height / 2;\n    rotation = utils.isNumeric(rotation) ? rotation : cell.rotation;\n\n    this.vel.rotate(rotation, cx, cy);\n    this.rotation = rotation;\n\n    return this;\n  }\n\n  drawBounds() {\n\n    let attrs = utils.extend({}, this.options.boundsAttr, this.size);\n    if (this.boundsVel) {\n      this.boundsVel.attr(attrs);\n    } else {\n      this.boundsVel = vector('rect', attrs);\n      this.vel.append(this.boundsVel);\n    }\n\n    return this;\n  }\n\n  drawRotater() {\n\n    if (!this.rotaterVel) {\n      this.rotaterVel = vector('ellipse', this.options.rotaterAttr);\n      this.vel.append(this.rotaterVel);\n    }\n\n    this.rotaterVel.translate(this.size.width / 2, this.options.rotaterOffset);\n\n    return this;\n  }\n\n  drawResizers() {\n\n    let options = this.options;\n\n    if (!this.resizers) {\n      this.resizers = [];\n      utils.forEach(RESIZER_NAMES, function () {\n        this.createResizer();\n      }, this);\n    }\n\n    // TODO change class and cursor style according to cell rotate angle\n    let resizers = this.resizers;\n    let rx       = options.resizerAttr.width / 2;\n    let ry       = options.resizerAttr.height / 2;\n    let h        = this.size.height;\n    let w        = this.size.width;\n    resizers[0].translate(-rx, -ry);\n    resizers[1].translate(-rx + w / 2, -ry);\n    resizers[2].translate(-rx + w, -ry);\n    resizers[3].translate(-rx + w, -ry + h / 2);\n    resizers[4].translate(-rx + w, -ry + h);\n    resizers[5].translate(-rx + w / 2, -ry + h);\n    resizers[6].translate(-rx, -ry + h);\n    resizers[7].translate(-rx, -ry + h / 2);\n\n    this.cacheResizerBBox();\n    this.adjustResizers();\n\n    return this;\n  }\n\n  cacheResizerBBox() {\n\n    utils.forEach(this.resizers, (resizer) => {\n      if (!resizer.hidden) {\n        resizer.cachedBBox = resizer.getBBox();\n      }\n    });\n    return this;\n  }\n\n  adjustResizers() {\n    let cell = this.cell;\n\n    const STEP_ANGLE = 45;\n    let rotation     = utils.normalizeAngle(cell.rotation);\n    let offset       = Math.floor(rotation / STEP_ANGLE);\n    let length       = RESIZER_NAMES.length;\n\n    utils.forEach(this.resizers, (resizer, i) => {\n      let name = RESIZER_NAMES[(i + offset) % length];\n      resizer.attr({\n        class: 'resizer ' + name\n      });\n      resizer.css({\n        cursor: name\n      });\n    });\n    return this;\n  }\n\n  createResizer() {\n    let that = this;\n\n    let resizerVel = vector('rect', that.options.resizerAttr);\n    that.resizers.push(resizerVel);\n    that.vel.append(resizerVel);\n    return that;\n  }\n\n  hideRotater() {\n\n    this.rotaterVel.hide();\n\n    return this;\n  }\n\n  showRotater() {\n\n    this.rotaterVel.show();\n    return this;\n  }\n\n  showResizers() {\n\n    utils.forEach(this.resizers, (resizer) => {\n      resizer.show();\n    });\n    return this;\n  }\n\n  hideResizers(exceptNode) {\n\n    this.cacheResizerBBox();\n    utils.forEach(this.resizers, (resizer) => {\n      if (resizer.node !== exceptNode) {\n        resizer.hide();\n      }\n    });\n\n    return this;\n  }\n\n  resetEvents(e) {\n\n    this.isRotating  = false;\n    this.isResizing  = false;\n    this.eventTarget = null;\n\n    if (e && e.target) {\n      this.eventTarget      = e.target;\n      this.isRotating       = (e.target === this.rotaterVel.node);\n      this.isResizing       = utils.hasClass(e.target, 'resizer');\n      this.oldEventPosition = {\n        x: e.x,\n        y: e.y\n      };\n    }\n    if (this.isRotating) {\n      this.hideResizers();\n    } else {\n      this.showResizers();\n    }\n    if (this.isResizing) {\n      this.hideRotater();\n      this.hideResizers(e.target);\n    } else {\n      this.showRotater();\n    }\n\n    return this;\n  }\n\n  bindEvents() {\n    let elem = this.elem;\n    this.resetEvents();\n\n    let onPointerDown = this.onPointerDown.bind(this);\n    let onPointerMove = this.onPointerMove.bind(this);\n    let onPointerUp   = this.onPointerUp.bind(this);\n    if (detector.IS_TOUCH) {\n      utils.addEventListener(elem, 'touchstart', onPointerDown);\n      utils.addEventListener(doc, 'touchmove', onPointerMove);\n      utils.addEventListener(doc, 'touchend', onPointerUp);\n    } else {\n      utils.addEventListener(elem, 'mousedown', onPointerDown);\n      utils.addEventListener(doc, 'mousemove', onPointerMove);\n      utils.addEventListener(doc, 'mouseup', onPointerUp);\n    }\n\n    return this;\n  }\n\n  onPointerDown(e) {\n\n    e.stopPropagation();\n\n    this.resetEvents(e);\n\n    return this;\n  }\n\n  onPointerMove(e) {\n    let that = this;\n    // let paper = that.paper;\n\n    if (that.isRotating) {\n      e.stopPropagation();\n      let dx = that.position.x + that.size.width / 2 - e.x;\n      let dy = that.position.y + that.size.height / 2 - e.y;\n\n      let alpha = (dx !== 0) ? Math.atan(dy / dx) * 180 / Math.PI + 90 : ((dy < 0) ? 180 : 0);\n      if (dx > 0) {\n        alpha -= 180;\n      }\n      that.rotate(alpha);\n    }\n    if (that.isResizing) {\n      e.stopPropagation();\n      let oldPos                = that.oldEventPosition;\n      let newPos                = {\n        x: e.x,\n        y: e.y\n      };\n      let eventTarget           = that.eventTarget;\n      let currentResizerIndex   = 0;\n      let isRotationResizer     = false;\n      let isAntiRotationResizer = false;\n      utils.some(that.resizers, (resizer, i) => {\n        if (resizer.node === eventTarget) {\n          currentResizerIndex = i;\n          return true;\n        }\n        return false;\n      });\n      let oppositeResizerIndex = (currentResizerIndex - 4 + 8) % 8;\n      if (currentResizerIndex % 2 !== 0) {\n        if (currentResizerIndex === 1 || currentResizerIndex === 5) {\n          isRotationResizer = true;\n        }\n        if (currentResizerIndex === 3 || currentResizerIndex === 7) {\n          isAntiRotationResizer = true;\n        }\n        currentResizerIndex -= 1;\n        oppositeResizerIndex -= 1;\n      }\n      let edgePoint       = that.resizers[oppositeResizerIndex].cachedBBox.getCenter();\n      let movingEdgePoint = that.resizers[currentResizerIndex].getBBox().getCenter();\n      let dx              = 0;\n      let dy              = 0;\n      if (isRotationResizer) {\n        dx = 0; // TODO\n        dy = 0; // TODO\n      } else if (isAntiRotationResizer) {\n        dx = 0; // TODO\n        dy = 0; // TODO\n      } else {\n        dx = newPos.x - oldPos.x;\n        dy = newPos.y - oldPos.y;\n      }\n      let newRect = Rect.fromVerticesAndRotation(edgePoint, {\n        x: movingEdgePoint.x + dx,\n        y: movingEdgePoint.y + dy\n      }, that.rotation);\n      // let newCenter = newRect.getCenter();\n\n      that\n        .moveTo({\n          x: newRect.x,\n          y: newRect.y\n        })\n        .setSize({\n          height: newRect.height,\n          width: newRect.width\n        })\n        .drawBounds()\n        .drawResizers()\n        .rotate(that.rotation/* , newCenter.x, newCenter.y */);\n\n      that.oldEventPosition = newPos;\n    }\n    return that;\n  }\n\n  onPointerUp(e) {\n    let that = this;\n\n    if (that.isResizing || that.isRotating) {\n      e.stopPropagation();\n      let model = that.model;\n      // let cell = that.cell;\n      model.beginUpdate();\n      if (that.isRotating) {\n        model.setGeometry(that.cell, {\n          rotation: {\n            angle: that.rotation\n          }\n        });\n      }\n      if (that.isResizing) {\n        model.setGeometry(that.cell, {\n          position: {\n            x: that.position.x,\n            y: that.position.y\n          },\n          rotation: {\n            angle: that.rotation\n          },\n          size: {\n            width: that.size.width,\n            height: that.size.height,\n          }\n        });\n      }\n      model.endUpdate();\n      that.redraw();\n      that.resetEvents();\n    }\n    return that;\n  }\n\n  destroy() {\n\n    this.boundsVel.remove();\n    this.rotaterVel.remove();\n\n    utils.forEach(this.resizers, (vel) => {\n      vel.remove();\n    });\n\n    this.vel.remove();\n\n    utils.destroy(this);\n  }\n}\n\n\n// exports\n// -------\n\nexport default VertexController;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controllers/Vertex.js\n **/","import Events from '../common/Events';\n\n\nclass Controller extends Events {\n\n  constructor(paper, options = {}) {\n\n    super();\n\n    this.paper = paper;\n    this.model = paper.model;\n\n    this.init(options);\n    this.on('controller:initalized');\n  }\n\n  init() {\n    return this;\n  }\n\n  destroy() { }\n}\n\n\n// exports\n// -------\n\nexport default Controller;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controllers/Controller.js\n **/","import * as utils from '../common/utils';\nimport     vector from '../common/vector';\nimport       Rect from '../geometry/Rect';\nimport       Link from '../cells/Link';\nimport    Handler from './Handler';\n\n\nclass ConnectionHandler extends Handler {\n\n  init(options = {}) {\n\n    let that  = this;\n    let paper = this.getPaper();\n    let model = this.getModel();\n\n    this.name = options.name || 'connection';\n\n    this.sourceCellView = null;\n    this.targetCellView = null;\n    this.sourcePort     = null;\n    this.targetPort     = null;\n\n    this.connecting     = false;\n    this.previewingLink = null;\n\n    paper.on('cell:mouseOver', (cell, view) => {\n      if (that.sourceCellView !== view) {\n        if (that.connecting) {\n          // 加校验\n          that.setTargetCellView(view);\n        } else {\n          // 加校验\n          that.setSourceCellView(view);\n        }\n      }\n    });\n\n    paper.on('cell:mouseOut', (cell, view, e) => {\n      if (that.connecting) {\n        if (that.targetCellView === view && that._isOut(view, e.toElement)) {\n          that.setTargetCellView(null);\n        }\n      } else {\n        if (that.sourceCellView === view && that._isOut(view, e.toElement)) {\n          that.setSourceCellView(null);\n        }\n      }\n    });\n\n    utils.addEventListener(paper.decoratePane, 'mouseout', '.port-decorator.out', (e) => {\n      if (!that.connecting && !utils.hasClass(e.toElement, 'port-decorator-layer')) {\n        that.setSourceCellView(null);\n      }\n    });\n\n    utils.addEventListener(paper.decoratePane, 'mousedown', '.port-decorator.out', (e) => {\n      that.connecting   = true;\n      let decoratorNode = e.delegateTarget;\n      that.sourcePort   = decoratorNode.cellView.findPortByElem(decoratorNode.portBody);\n      that._drawInPortDecorators();\n    });\n\n    utils.addEventListener(paper.container, 'mousemove', (e) => {\n      if (that.connecting) {\n        if (that.previewingLink) {\n          model.setTerminal(that.previewingLink, paper.toLocalPoint({\n            x: e.x,\n            y: e.y\n          }), false);\n        } else {\n          that.previewingLink = new Link({\n            sourceMarker: 'block',\n            targetMarker: 'block'\n          });\n          model.addLink(that.previewingLink, {\n            node: that.sourceCellView.cell,\n            port: that.sourcePort,\n          }, paper.toLocalPoint({\n            x: e.x,\n            y: e.y\n          }));\n        }\n      }\n    });\n\n    paper.on('cell:pointerUp', (/* cell, view, e, x, y */) => {\n      // console.log('cell:mouseup');\n      // if (that.connecting) {\n      // } else {\n      // }\n      that.connecting = false;\n      that.setSourceCellView(null);\n      that._clearInPortDecorators();\n    });\n    paper.on('blank:pointerUp', (/* cell, view, e, x, y */) => {\n      // console.log('blank:mouseup');\n      // if (that.connecting) {\n      // } else {\n      // }\n      that.connecting = false;\n      that.setSourceCellView(null);\n      that._clearInPortDecorators();\n    });\n\n    return this;\n  }\n\n  _isOut(view, elem) {\n    return !utils.containsElement(view.elem, elem) && !utils.hasClass(elem, 'port-decorator-layer');\n  }\n\n  setSourceCellView(view) {\n\n    let that  = this;\n    let paper = this.getPaper();\n    if (this.sourceCellView) {\n      utils.forEach(paper.decoratePane.querySelectorAll('.port-decorator.out'), (decorator) => {\n        vector(decorator).remove();\n      });\n    }\n\n    that.sourceCellView = view;\n\n    if (view) {\n      that._drawPortDecorators(view, 'out');\n    }\n\n    return this;\n  }\n\n  _drawInPortDecorators() {\n    let that = this;\n    // let sourceView = that.sourceCellView;\n    return that;\n  }\n\n  _clearInPortDecorators() {\n    let that  = this;\n    let paper = that.paper;\n    utils.forEach(paper.decoratePane.querySelectorAll('.port-decorator.in'), (decorator) => {\n      vector(decorator).remove();\n    });\n    return that;\n  }\n\n  _drawPortDecorators(view, inOrOut) {\n\n    let decoratorMarkup = [\n      '<g class=\"port-decorator ${className}\">',\n      '<circle class=\"back port-decorator-layer\" r=\"8\" cx=\"${x}\" cy=\"${y}\"></circle>',\n      '<circle class=\"front port-decorator-layer\" r=\"3\" cx=\"${x}\" cy=\"${y}\"></circle>',\n      '</g>'\n    ].join('');\n\n    let portBodies   = view.elem.querySelectorAll('.pane-ports.' + inOrOut + ' .pane-port .port-body');\n    let paper        = this.getPaper();\n    let decoratePane = paper.decoratePane;\n\n    utils.forEach(portBodies, (portBody) => {\n      let bbox      = Rect.fromRect(vector(portBody).getBBox(false));\n      let center    = bbox.getCenter();\n      let decorator = vector(utils.format(decoratorMarkup, utils.extend({\n        className: inOrOut\n      }, center)));\n      decoratePane.appendChild(decorator.node);\n      decorator.node.cellView = view;\n      decorator.node.portBody = portBody;\n      // TODO decorator.node.portMeta = portMeta\n    });\n  }\n\n  setTargetCellView(/* view */) {\n    let that = this;\n    return that;\n  }\n}\n\nexport default ConnectionHandler;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/handlers/Connection.js\n **/","import * as utils from '../../common/utils';\n\nexport default function sharpConnector(sourcePoint, targetPoint, vertices) {\n\n  let d = ['M', sourcePoint.x, sourcePoint.y];\n\n  utils.forEach(vertices, (vertex) => {\n    d.push(vertex.x, vertex.y);\n  });\n\n  d.push(targetPoint.x, targetPoint.y);\n\n  return d.join(' ');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/connector/sharp.js\n **/","import * as bezier from '../../geometry/bezier';\nimport       Point from '../../geometry/Point';\n\n\nfunction fixMarker(view, isSource, reference) {\n\n  let cache = view.cache;\n\n  let renderedMarker = isSource\n    ? cache.renderedSourceMarker\n    : cache.renderedTargetMarker;\n\n  let markerVel = isSource\n    ? cache.sourceMarkerVel\n    : cache.targetMarkerVel;\n\n  if (renderedMarker && markerVel) {\n\n    // get connection point of the marker connecting to the terminal\n    let position = isSource\n      ? cache.sourcePointOnTerminal || cache.staticSourcePoint\n      : cache.targetPointOnTerminal || cache.staticTargetPoint;\n\n    if (position) {\n      markerVel.translateAndAutoOrient(position, reference, view.getPane());\n      // fix the connection point on the marker\n      view.updateConnectionPointOnMarker(isSource);\n    }\n  }\n}\n\nfunction getConnectionPoint(view, isSource) {\n\n  let cache = view.cache;\n\n  if (isSource) {\n    return cache.sourcePointOnMarker\n      || cache.sourcePointOnTerminal\n      || cache.staticSourcePoint;\n  }\n\n  return cache.targetPointOnMarker ||\n    cache.targetPointOnTerminal ||\n    cache.staticTargetPoint;\n\n}\n\nexport default function smoothConnector(sourcePoint, targetPoint, vertices) {\n\n  let view = this;\n  let pathArr;\n  let sourceReference;\n  let targetReference;\n\n  if (vertices && vertices.length) {\n\n    let knots         = [sourcePoint].concat(vertices).concat([targetPoint]);\n    let controlPoints = bezier.getCurveControlPoints(knots);\n    let length        = controlPoints[0].length;\n\n    sourceReference = Point.fromPoint(controlPoints[0][0]);\n    targetReference = Point.fromPoint(controlPoints[1][length - 1]);\n\n    fixMarker(view, true, sourceReference);\n    fixMarker(view, false, targetReference);\n\n    knots[0]                = getConnectionPoint(view, true);\n    knots[knots.length - 1] = getConnectionPoint(view, false);\n\n    pathArr = ['M', knots[0].x, knots[0].y];\n\n    for (let i = 0; i < length; i++) {\n      pathArr.push('C',\n        controlPoints[0][i].x,\n        controlPoints[0][i].y,\n        controlPoints[1][i].x,\n        controlPoints[1][i].y,\n        knots[i + 1].x,\n        knots[i + 1].y\n      );\n    }\n  } else {\n\n    // if we have no vertices use a default cubic bezier curve, cubic\n    // bezier requires two control points. The two control points are both\n    // defined with X as mid way between the source and target points.\n    // SourceControlPoint Y is equal to sourcePoint Y and targetControlPointY\n    // being equal to targetPointY. Handle situation were sourcePointX is\n    // greater or less then targetPointX.\n\n    // let controlPointX = sourcePoint.x < targetPoint.x\n    //    ? targetPoint.x - (targetPoint.x - sourcePoint.x) / 2\n    //    : sourcePoint.x - (sourcePoint.x - targetPoint.x) / 2;\n    //\n    // sourceReference = new Point(controlPointX, sourcePoint.y);\n    // targetReference = new Point(controlPointX, targetPoint.y);\n\n    let controlPointY = (sourcePoint.y + targetPoint.y) / 2;\n\n    // sourceReference = new Point(sourcePoint.x, controlPointY);\n    // targetReference = new Point(targetPoint.x, controlPointY);\n    //\n    // fixMarker(view, true, sourceReference);\n    // fixMarker(view, false, targetReference);\n    //\n    // sourcePoint = getConnectionPoint(view, true);\n    // targetPoint = getConnectionPoint(view, false);\n\n    pathArr = [\n      'M', sourcePoint.x, sourcePoint.y,\n      'C', sourcePoint.x, controlPointY,\n      targetPoint.x, controlPointY,\n      targetPoint.x, targetPoint.y\n    ];\n  }\n\n  return pathArr.join(' ');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/connector/smooth.js\n **/","import * as utils from '../../common/utils';\nimport      Point from '../../geometry/Point';\n\nexport default function roundedConnector(sourcePoint, targetPoint, vertices, options = {}) {\n\n  let offset = options.radius || 10;\n\n  let d1;\n  let d2;\n\n  let d = ['M', sourcePoint.x, sourcePoint.y];\n\n  utils.forEach(vertices, (vertex, index) => {\n\n    // the closest vertices\n    let prev = vertices[index - 1] || sourcePoint;\n    let next = vertices[index + 1] || targetPoint;\n    let cur  = Point.fromPoint(vertex);\n\n    // a half distance to the closest vertex\n    d1 = d2 || cur.distance(prev) / 2;\n    d2 = cur.distance(next) / 2;\n\n    // control points\n    let c1 = Point.fromPoint(vertex).move(prev, -Math.min(offset, d1)).smooth();\n    let c2 = Point.fromPoint(vertex).move(next, -Math.min(offset, d2)).smooth();\n\n    d.push(c1.x, c1.y, 'S', vertex.x, vertex.y, c2.x, c2.y, 'L');\n  });\n\n  d.push(targetPoint.x, targetPoint.y);\n\n  return d.join(' ');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/connector/rounded.js\n **/","import Point from '../../geometry/Point';\n\n\nexport default function classicMarker(vMarker, options) {\n\n  if (vMarker) {\n\n    // let markerStrokeWidth = options.markerStrokeWidth;\n\n    let size    = options.size || 7;\n    let pathArr = [];\n\n    let connectionX = size * 0.75;\n    let connectionY = size / 2;\n\n    pathArr.push('M', 0, size / 2);\n    pathArr.push('L', size, 0);\n    pathArr.push('L', connectionX, connectionY);\n    pathArr.push('L', size, size);\n    pathArr.push('Z');\n\n    vMarker.attr('d', pathArr.join(' '));\n\n    //\n    let connectorStrokeWidth = options.connectorStrokeWidth;\n\n    if (connectorStrokeWidth > 1) {\n      connectionX += (connectorStrokeWidth / 2) * (size - connectionX) / connectionY;\n    }\n\n    // return the connection point on the marker\n    return {\n      rad: Math.atan2(size / 2, size),\n      point: new Point(connectionX, connectionY)\n    };\n  }\n\n  return null;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/marker/classic.js\n **/","import Point from '../../geometry/Point';\n\n\nexport default function diamondMarker(vMarker, options) {\n\n  if (vMarker) {\n\n    let rx      = options.rx || 5;\n    let ry      = options.ry || rx / 2;\n    let pathArr = [];\n\n    pathArr.push('M', rx, 0);\n    pathArr.push('L', 0, ry);\n    pathArr.push('L', rx, ry * 2);\n    pathArr.push('L', rx * 2, ry);\n    pathArr.push('Z');\n\n    vMarker.attr('d', pathArr.join(' '));\n\n    // return the connection point on the marker\n    return {\n      rad: Math.atan2(ry, rx),\n      point: new Point(rx * 2 - 1, ry)\n    };\n  }\n\n  return null;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/marker/diamond.js\n **/","import Point from '../../geometry/Point';\n\nexport default function blockMarker(vMarker, options) {\n\n  if (vMarker) {\n\n    let width  = options.width || 5;\n    let height = options.height || width * Math.tan(1 / 5 * Math.PI);\n\n    let pathArr = [];\n\n    pathArr.push('M', width, 0);\n    pathArr.push('L', 0, height);\n    pathArr.push('L', width, height * 2);\n    pathArr.push('Z');\n\n    vMarker.attr({\n      d: pathArr.join(' ')\n    });\n\n\n    // return the connection point on the marker\n    return {\n      rad: Math.atan2(height, width),\n      point: new Point(width, height)\n    };\n  }\n\n  return null;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/marker/block.js\n **/","import Point from '../../geometry/Point';\n\nexport default function clovenMarker(vMarker, options) {\n\n  if (vMarker) {\n\n    let rx      = options.rx || 7;\n    let ry      = options.ry || rx / 2;\n    let pathArr = [];\n\n    pathArr.push('M', rx, 0);\n    pathArr.push('L', 0, ry);\n    pathArr.push('L', rx, ry * 2);\n\n    vMarker.attr('d', pathArr.join(' '));\n\n    return {\n      rad: Math.atan2(ry, rx),\n      point: new Point(0, ry)\n    };\n  }\n\n  return null;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/marker/cloven.js\n **/","import vector from '../../common/vector';\nimport Point  from '../../geometry/Point';\n\n\nexport default function ovalMarker(vMarker, options) {\n\n  // Note: vMarker should be a `g` element\n\n  if (vMarker) {\n\n    let rx = options.rx || 3.5;\n    let ry = options.ry || rx;\n\n    let vEllipse = vector('ellipse');\n\n    vEllipse.attr({\n      cx: rx,\n      cy: ry,\n      rx,\n      ry\n    });\n\n    // return the connection point on the marker\n    return {\n      vel: vEllipse,\n      rad: 0,\n      point: new Point(rx * 2, ry)\n    };\n  }\n\n  return null;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/marker/oval.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/style/index.less\n ** module id = 74\n ** module chunks = 0 1\n **/"],"sourceRoot":""}